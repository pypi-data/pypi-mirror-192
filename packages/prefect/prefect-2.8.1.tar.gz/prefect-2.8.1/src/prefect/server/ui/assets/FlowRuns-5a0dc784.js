import{$ as Y,W as Z,d as $,Y as q,a0 as c,c as r,r as k,a1 as z,a2 as E,a as t,w as i,a3 as v,a4 as G,o as s,b as l,u as e,a5 as M,j as b,a6 as O,a7 as C,a8 as P,Z as F,a9 as W,f as d,aa as w,ab as I,ac as J,ad as K,ae as Q,af as X,ag as ee,ah as se,ai as oe,aj as te}from"./index-ac647112-08d053b9.js";import{u as ne}from"./usePageTitle-b14d9551.js";import"./index-dfea5a9b.js";import{A as ae}from"./ApiRoute-f22472f7.js";import{r as le}from"./routes-5c579cbb.js";import"./meta-26546594.js";class ue extends ae(Z){}const re=Y(new ue),ce={class:"flow-runs__list"},ie={class:"flow-runs__list-controls"},de={class:"flow-runs__list-controls--right"},he=$({__name:"FlowRuns",setup(g){const S=G(),p=q(),_=c(p.flowRuns.getFlowRunsCount,[{}]),V=r(()=>_.executed),x=r(()=>_.response===0),f=k(),A=z(f,1200),{filter:o,isCustomFilter:N}=E({flowRuns:{nameLike:A}}),m={interval:3e4},R=c(p.flowRuns.getFlowRunsCount,[o],m),B=r(()=>R.response),L=c(re.getFlowRunHistory,[o],m),T=r(()=>L.response??[]),y=c(p.flowRuns.getFlowRuns,[o],m),h=r(()=>y.response??[]),n=k([]);function U(){S.push(le.flowRuns())}const D=()=>{n.value=[],y.refresh(),R.refresh()};return ne("Flow Runs"),(pe,a)=>{const H=v("p-button"),j=v("p-layout-default");return s(),t(j,{class:"flow-runs"},{header:i(()=>[l(e(M))]),default:i(()=>[e(V)?(s(),b(C,{key:0},[e(x)?(s(),t(e(O),{key:0})):(s(),b(C,{key:1},[l(e(P)),e(F).md?(s(),t(e(W),{key:0,history:e(T),"start-date":e(o).flowRuns.expectedStartTimeAfter,"end-date":e(o).flowRuns.expectedStartTimeBefore,class:"flow-runs__chart"},null,8,["history","start-date","end-date"])):d("",!0),w("div",ce,[w("div",ie,[w("div",de,[n.value.length==0?(s(),t(e(I),{key:0,count:e(B),label:"Flow run"},null,8,["count"])):(s(),t(e(J),{key:1,count:n.value.length},null,8,["count"])),l(e(K),{selected:n.value,onDelete:D},null,8,["selected"])]),e(F).md?(s(),t(e(Q),{key:0,modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=u=>f.value=u),placeholder:"Search by run name",label:"Search by run name"},null,8,["modelValue"])):d("",!0),l(e(X),{modelValue:e(o).sort,"onUpdate:modelValue":a[1]||(a[1]=u=>e(o).sort=u)},null,8,["modelValue"])]),l(e(ee),{selected:n.value,"onUpdate:selected":a[2]||(a[2]=u=>n.value=u),"flow-runs":e(h)},null,8,["selected","flow-runs"]),e(h).length?d("",!0):(s(),t(e(se),{key:0},oe({_:2},[e(N)?{name:"actions",fn:i(()=>[l(H,{size:"sm",secondary:"",onClick:U},{default:i(()=>[te(" Clear Filters ")]),_:1})]),key:"0"}:void 0]),1024))])],64))],64)):d("",!0)]),_:1})}}});export{he as default};
