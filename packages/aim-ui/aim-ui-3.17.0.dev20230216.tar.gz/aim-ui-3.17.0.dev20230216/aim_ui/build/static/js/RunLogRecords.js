(this.webpackJsonpui_v2=this.webpackJsonpui_v2||[]).push([[19,20],{1492:function(e,t,n){},1493:function(e,t,n){},1523:function(e,t,n){"use strict";n.r(t);var r,a=n(6),o=n(0),c=n.n(o),i=n(242),u=n(258),s=n(17),l=n.n(s),d=n(259),f=n(11),v=n(345),h=n(5),b=n(871),g=n(63),m=n(327),p=n(90),j=n(365),_={ERROR:{icon:"close-circle",color:"#e64e48",background:"#e64e484a"},WARNING:{icon:"warning-contained",color:"#ffcc00",background:"#ffcc004a"},INFO:{icon:"circle-info",color:"#1473e6",background:"#1473e64a"},DEBUG:{icon:"search",color:"#1c2852",background:"#1c28524a"}};!function(e){e.MONTH="Month",e.DAY="Day",e.RECORD="Record",e.EMPTY="Empty"}(r||(r={}));n(1492);var x=n(1);function O(e){var t=e.data[e.index];return Object(x.jsx)("div",{className:"LogRecordItem",style:e.style,children:function(){var e,n,a,o,c;switch(null===t||void 0===t?void 0:t.itemType){case r.MONTH:return Object(x.jsx)(h.n,{className:"LogRecordItem__content-title",component:"h3",tint:100,weight:700,children:t.date.split("_").join(" ")});case r.DAY:return Object(x.jsxs)("div",{className:"LogRecordItem__title",children:[Object(x.jsx)(h.f,{name:"calendar",fontSize:10,box:!0}),Object(x.jsx)(h.n,{tint:50,size:10,weight:700,children:t.date.split("_").join(" ")})]});case r.RECORD:return Object(x.jsx)("div",{className:"LogRecordItem__content",children:Object(x.jsxs)("div",{className:"LogRecordItem__content__item",children:[Object(x.jsxs)("div",{className:"LogRecordItem__content__item__leftBox",children:[Object(x.jsx)("div",{className:"LogRecordItem__content__item__leftBox__statusBadge",children:Object(x.jsx)(h.f,{name:_[null!==(e=null===t||void 0===t?void 0:t.type)&&void 0!==e?e:"ERROR"].icon,fontSize:16,color:_[null!==(n=null===t||void 0===t?void 0:t.type)&&void 0!==n?n:"ERROR"].color})}),Object(x.jsxs)("div",{className:"LogRecordItem__content__item__leftBox__content",children:[Object(x.jsx)(h.n,{tint:70,size:12,weight:600,className:"LogRecordItem__content__item__leftBox__date",children:null===t||void 0===t?void 0:t.type}),Object(x.jsx)(h.n,{tint:50,size:12,className:"LogRecordItem__content__item__leftBox__date",children:null!==(a=null===t||void 0===t?void 0:t.date)&&void 0!==a?a:"no date found"})]})]}),Object(x.jsxs)("div",{className:"LogRecordItem__content__item__itemBox",style:{justifyContent:t.extraParams?"flex-start":"center"},children:[Object(x.jsx)(m.a,{title:null!==(o=null===t||void 0===t?void 0:t.message)&&void 0!==o?o:"no message found",children:Object(x.jsx)("div",{children:Object(x.jsx)(h.n,{className:"LogRecordItem__content__item__itemBox__message",component:"pre",size:14,children:null!==(c=null===t||void 0===t?void 0:t.message)&&void 0!==c?c:"no message found"})})}),t.extraParams&&Object(x.jsx)("div",{className:"LogRecordItem__content__item__itemBox__extraParams",children:Object(x.jsx)(p.a,{title:"Message Payload",anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},anchor:function(e){var n=e.onAnchorClick;return Object(x.jsxs)("div",{className:"LogRecordItem__content__item__itemBox__extraParams__dict",onClick:function(e){g.a.isEmpty(t.extraParams)||n(e)},children:[Object(x.jsx)("div",{children:Object(x.jsx)(j.a,{src:t.extraParams,style:{width:500,height:300},autoScale:!0})}),Object(x.jsx)("div",{className:"LogRecordItem__content__item__itemBox__extraParams__dict__overflowHandler",children:Object(x.jsx)(h.f,{name:"arrow-bidirectional-open"})})]})},component:Object(x.jsx)(h.h,{json:t.extraParams,dictVisualizerSize:{width:500,height:300}})},t.hash)})]})]},t.hash)});case r.EMPTY:}}()})}var R=c.a.memo(O),L=n(7),y=n(67),E=n.n(y),I=n(76),A=n(19),w=n.n(A),T=n(2),S=n(58),N=n(703),D=n(690),k=n(166);function P(e){var t,n,r,a=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);a--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new F(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function F(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return(F=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new F(e)}var U=function(){var e=Object(N.c)(),t=e.call,n=e.cancel,r=Object(D.a)(function(){var e=Object(S.a)(w.a.mark((function e(n){var r,o;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.runId,o=n.record_range,e.t0=k.d,e.next=4,t(r,o);case 4:return e.t1=e.sent,e.t2={dataProcessor:function(){var e=Object(S.a)(w.a.mark((function e(t){var n,r,o,c,i,u,s,l,d,f,v,h;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={runLogRecordsList:[],runLogRecordsTotalCount:0},e.prev=1,r=!0,o=!1,e.prev=4,i=P(t);case 6:return e.next=8,i.next();case 8:return u=e.sent,r=u.done,e.next=12,u.value;case 12:if(s=e.sent,r){e.next=20;break}l=s,d=Object(a.a)(l,2),f=d[0],v=d[1],"number"===typeof(h=Object(T.a)(Object(T.a)({},v),{},{hash:f[0]})).hash?n.runLogRecordsList.push(h):n.runLogRecordsTotalCount=v;case 17:r=!0,e.next=6;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(4),o=!0,c=e.t0;case 26:if(e.prev=26,e.prev=27,r||null==i.return){e.next=31;break}return e.next=31,i.return();case 31:if(e.prev=31,!o){e.next=34;break}throw c;case 34:return e.finish(31);case 35:return e.finish(26);case 36:e.next=42;break;case 38:throw e.prev=38,e.t1=e.catch(1),console.error(e.t1),e.t1;case 42:return e.abrupt("return",Object(T.a)(Object(T.a)({},n),{},{runLogRecordsList:n.runLogRecordsList.reverse()}));case 43:case"end":return e.stop()}}),e,null,[[1,38],[4,22,26,36],[27,,31,35]])})));return function(t){return e.apply(this,arguments)}}()},e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),o=r.fetchData;return{fetchRunLogRecords:function(e){return o(e)},abortRunLogRecordsFetching:function(){n();var e=Object(N.c)();t=e.call,n=e.cancel},runLogRecordsState:r.state,destroy:r.destroy}}();var C=function(e,t){var n,o,i=c.a.useState([]),u=Object(a.a)(i,2),s=u[0],l=u[1],d=c.a.useState(0),f=Object(a.a)(d,2),v=f[0],h=f[1],m=c.a.useState(0),p=Object(a.a)(m,2),j=p[0],_=p[1],x=c.a.useState(b.LogsLastRequestEnum.DEFAULT),O=Object(a.a)(x,2),R=O[0],y=O[1],A=c.a.useRef(U).current,w=c.a.useRef(null),T=c.a.useRef(-1),S=A.runLogRecordsState((function(e){return e}));c.a.useEffect((function(){var t;return g.a.isEmpty(null===(t=S.data)||void 0===t?void 0:t.runLogRecordsList)&&A.fetchRunLogRecords({runId:e}).then((function(){P(),k()})),function(){A.destroy(),P(!0)}}),[]),c.a.useEffect((function(){t||P()}),[t]),c.a.useEffect((function(){var e,t;if(null===(e=S.data)||void 0===e||null===(t=e.runLogRecordsList)||void 0===t?void 0:t.length){var n=R===b.LogsLastRequestEnum.LIVE_UPDATE?[].concat(Object(L.a)(S.data.runLogRecordsList),Object(L.a)(s)):[].concat(Object(L.a)(s),Object(L.a)(S.data.runLogRecordsList));l(n)}}),[S.data]);var N=c.a.useMemo((function(){var t,n=[],a="",o="",c=0;return s.length&&(null===s||void 0===s||s.forEach((function(t){var i=E()(1e3*t.timestamp).format(I.h);i!==a&&(n.push({date:i,itemType:r.MONTH,height:28}),c+=28,a=i);var u=E()(1e3*t.timestamp).format(I.g);u!==o&&(n.push({date:u,itemType:r.DAY,height:28}),c+=28,o=u);var s=42+14.5*(t.message.trim().match(/\n/g)||"").length;t.args&&(s+=16.5*function e(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)+(Object.keys(t).length>0?1:0);for(var r in t)Array.isArray(t[r])||"object"===typeof t[r]&&null!==t[r]?n+=e(t[r],n):n++;return n>5?5:n}(t.args));var l={date:E()(1e3*t.timestamp).format(I.i),hash:t.hash,message:t.message.trim(),type:t.log_level,creation_time:t.timestamp,extraParams:t.args,runId:e,itemType:r.RECORD,height:s};c+=s,n.push(l)}))),h(c),T.current=null===(t=s[0])||void 0===t?void 0:t.hash,[{itemType:r.EMPTY,height:24}].concat(n)}),[s,e]);function D(){T.current?(y(b.LogsLastRequestEnum.LIVE_UPDATE),A.fetchRunLogRecords({runId:e,record_range:"".concat(T.current,":")}).then((function(){P(),k()}))):(P(),k())}function k(){if(t){var e=window.setTimeout(D,3e3);w.current={intervalId:e}}}function P(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(t||R===b.LogsLastRequestEnum.LIVE_UPDATE)&&A.abortRunLogRecordsFetching(),(null===(e=w.current)||void 0===e?void 0:e.intervalId)&&(clearInterval(w.current.intervalId),w.current=null)}return{isLoading:S.loading,data:N,totalRunLogRecordCount:null!==(n=null===(o=S.data)||void 0===o?void 0:o.runLogRecordsTotalCount)&&void 0!==n?n:0,fetchedCount:s.length,elementsHeightsSum:v,lastRequestType:R,loadMore:function(){var t;if((null===(t=S.data)||void 0===t?void 0:t.runLogRecordsList)&&!S.loading){P(),y(b.LogsLastRequestEnum.LOAD_MORE);var n=s[s.length-1].hash;A.fetchRunLogRecords({runId:e,record_range:n>200?"".concat(n-200,":").concat(n):"0:".concat(n)}).then((function(){P(),k()}))}},startLiveUpdate:k,stopLiveUpdate:P,updateScrollOffset:_,scrollOffset:j,liveUpdateToken:w.current}};n(1493);function M(e){var t=e.runHash,n=e.inProgress,r=C(t,n),o=r.data,s=r.loadMore,g=r.isLoading,m=r.fetchedCount,p=r.totalRunLogRecordCount,j=r.lastRequestType,_=r.elementsHeightsSum,O=r.updateScrollOffset,L=r.scrollOffset,y=r.startLiveUpdate,E=r.stopLiveUpdate,I=r.liveUpdateToken,A=c.a.useRef({}),w=c.a.useRef(null),T=c.a.useState(0),S=Object(a.a)(T,2),N=S[0],D=S[1],k=c.a.useState(0),P=Object(a.a)(k,2),F=P[0],U=P[1];return Object(u.d)((function(){w.current&&(D(w.current.offsetHeight),U(w.current.offsetWidth))}),w),Object(x.jsx)(f.a,{children:Object(x.jsx)(d.a,{isLoading:g&&j===b.LogsLastRequestEnum.DEFAULT,className:"RunDetailTabLoader",height:"100%",children:Object(x.jsx)("div",{className:"RunLogRecords",children:Object(x.jsx)("div",{className:"RunLogRecords__contentWrapper",children:p?Object(x.jsxs)("div",{className:"RunLogRecords__contentWrapper__listWrapper",ref:w,children:[Object(x.jsx)(i.d,{ref:A,height:N||100,itemCount:null===o||void 0===o?void 0:o.length,itemSize:function(e){var t;return null===(t=o[e])||void 0===t?void 0:t.height},width:"100%",overscanCount:100,initialScrollOffset:null!==L&&void 0!==L?L:0,itemData:o,onScroll:function(e){var t=e.scrollOffset,n=e.scrollDirection;O(t),"forward"===n&&t+N>_&&m<p&&!1===g&&s(),"backward"===n&&t<=0&&y(),t>5&&I&&E()},children:R},"".concat(N).concat(F)),Object(x.jsx)("div",{className:l()("overlay",{loading:g&&j===b.LogsLastRequestEnum.LOAD_MORE}),children:Object(x.jsx)(h.l,{size:24})})]}):Object(x.jsx)(v.a,{size:"xLarge",className:"RunDetailTabLoader",title:"No Messages"})})})})})}var q=c.a.memo(M);t.default=q},703:function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return v})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return d}));var r=n(19),a=n.n(r),o=n(58),c=n(145),i=n(684),u=new(n(686).a)("".concat(Object(c.c)()).concat(i.a.RUNS.BASE));function s(e){var t=new AbortController,n=t.signal;function r(){return(r=Object(o.a)(a.a.mark((function t(r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.makeAPIGetRequest("".concat(i.a.RUNS.SEARCH,"/").concat(e),{query_params:r,signal:n});case 2:return t.abrupt("return",t.sent.body);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{call:function(e){return r.apply(this,arguments)},cancel:function(){t.abort()}}}function l(){var e=new AbortController,t=e.signal;function n(){return(n=Object(o.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.makeAPIGetRequest("".concat(i.a.RUNS.SEARCH,"/run"),{query_params:n,signal:t});case 2:return e.abrupt("return",e.sent.body);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{call:function(e){return n.apply(this,arguments)},cancel:function(){e.abort()}}}function d(){var e=new AbortController,t=e.signal;function n(){return(n=Object(o.a)(a.a.mark((function e(n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.makeAPIGetRequest("".concat(n,"/log-records"),{query_params:r?{record_range:r}:{},signal:t});case 2:return e.abrupt("return",e.sent.body);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{call:function(e,t){return n.apply(this,arguments)},cancel:function(){e.abort()}}}function f(e){var t=new AbortController,n=t.signal;function r(){return(r=Object(o.a)(a.a.mark((function t(r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.makeAPIPostRequest("".concat(e,"/get-batch"),{body:r,signal:n});case 2:return t.abrupt("return",t.sent.body);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{call:function(e){return r.apply(this,arguments)},cancel:function(){t.abort()}}}function v(){var e=new AbortController,t=e.signal;function n(){return(n=Object(o.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.makeAPIGetRequest("".concat(i.a.RUNS.ACTIVE),{signal:t});case 2:return e.abrupt("return",e.sent.body);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{call:function(e){return n.apply(this,arguments)},cancel:function(){e.abort()}}}},868:function(e,t,n){},871:function(e,t,n){"use strict";n.r(t),n.d(t,"LogsLastRequestEnum",(function(){return N}));var r=n(6),a=n(0),o=n.n(a),c=n(63),i=n(242),u=n(17),s=n.n(u),l=n(258),d=n(259),f=n(11),v=n(345),h=n(5),b=n(16),g=n(68),m=n(746),p=n(14),j=n(9),_={fg:"#FFF",bg:"#000",newline:!1,colors:function(){var e={0:"#000",1:"#A00",2:"#0A0",3:"#A50",4:"#00A",5:"#A0A",6:"#0AA",7:"#AAA",8:"#555",9:"#F55",10:"#5F5",11:"#FF5",12:"#55F",13:"#F5F",14:"#5FF",15:"#FFF"};return c.a.range(0,6).forEach((function(t){c.a.range(0,6).forEach((function(n){c.a.range(0,6).forEach((function(r){return function(e,t,n,r){var a=e>0?40*e+55:0,o=t>0?40*t+55:0,c=n>0?40*n+55:0;r[16+36*e+6*t+n]=function(e){var t,n=[],r=Object(j.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(x(a))}}catch(o){r.e(o)}finally{r.f()}return"#"+n.join("")}([a,o,c])}(t,n,r,e)}))}))})),c.a.range(0,24).forEach((function(t){var n=t+232,r=x(10*t+8);e[n]="#"+r+r+r})),e}()};function x(e){for(var t=e.toString(16);t.length<2;)t="0"+t;return t}function O(e,t,n,r){var a;if("text"===t)a=n;else if("display"===t)a=function(e,t,n){t=parseInt("".concat(t),10);var r={"-1":function(){return"<br/>"},0:function(){return e.length&&R(e)},1:function(){return L(e,"b")},3:function(){return L(e,"i")},4:function(){return L(e,"u")},8:function(){return y(e,"display:none")},9:function(){return L(e,"strike")},22:function(){return y(e,"font-weight:normal;text-decoration:none;font-style:normal")},23:function(){return A(e,"i")},24:function(){return A(e,"u")},39:function(){return E(e,n.fg)},49:function(){return I(e,n.bg)},53:function(){return y(e,"text-decoration:overline")}};if(r[t])return r[t]();if(4<t&&t<7)return L(e,"blink");var a,o,c,i;if(29<t&&t<38)return E(e,null===n||void 0===n||null===(a=n.colors)||void 0===a?void 0:a[t-30]);if(39<t&&t<48)return I(e,null===n||void 0===n||null===(o=n.colors)||void 0===o?void 0:o[t-40]);if(89<t&&t<98)return E(e,null===n||void 0===n||null===(c=n.colors)||void 0===c?void 0:c[t-90+8]);if(99<t&&t<108)return I(e,null===n||void 0===n||null===(i=n.colors)||void 0===i?void 0:i[t-100+8])}(e,+n,r);else if("xterm256Foreground"===t){var o;a=E(e,null===r||void 0===r||null===(o=r.colors)||void 0===o?void 0:o[+n])}else if("xterm256Background"===t){var c;a=I(e,null===r||void 0===r||null===(c=r.colors)||void 0===c?void 0:c[+n])}else"rgb"===t&&(a=function(e,t){var n=+(t=t.substring(2).slice(0,-1)).substr(0,2),r=t.substring(5).split(";").map((function(e){return("0"+Number(e).toString(16)).substring(-2)})).join("");return y(e,(38===n?"color:#":"background-color:#")+r)}(e,n));return a}function R(e){var t=e.slice(0);return e.length=0,t.reverse().map((function(e){return"</"+e+">"})).join("")}function L(e,t,n){return n||(n=""),e.push(t),"<".concat(t).concat(n?' style="'.concat(n,'"'):"",">")}function y(e,t){return L(e,"span",t)}function E(e,t){return L(e,"span","color:"+t)}function I(e,t){return L(e,"span","background-color:"+t)}function A(e,t){var n;if(e.slice(-1)[0]===t&&(n=e.pop()),n)return"</"+t+">"}var w=function(e,t){e="string"===typeof e?[e]:e;var n=Object.assign({},_,t),r=[],a=[];return function(e,t,n){var r=!1;function a(){return""}function o(e){return t.newline?n("display",-1):n("text",e),""}var c=[{pattern:/^\x08+/,sub:a},{pattern:/^\x1b\[[012]?K/,sub:a},{pattern:/^\x1b\[\(B/,sub:a},{pattern:/^\x1b\[[34]8;2;\d+;\d+;\d+m/,sub:function(e){return n("rgb",e),""}},{pattern:/^\x1b\[38;5;(\d+)m/,sub:function(e,t){return n("xterm256Foreground",t),""}},{pattern:/^\x1b\[48;5;(\d+)m/,sub:function(e,t){return n("xterm256Background",t),""}},{pattern:/^\n/,sub:o},{pattern:/^\r+\n/,sub:o},{pattern:/^\r/,sub:o},{pattern:/^\x1b\[((?:\d{1,3};?)+|)m/,sub:function(e,t){r=!0,0===t.trim().length&&(t="0");var a,o=t.trimRight().split(";"),c=Object(j.a)(o);try{for(c.s();!(a=c.n()).done;){var i=a.value;n("display",i)}}catch(u){c.e(u)}finally{c.f()}return""}},{pattern:/^\x1b\[\d?J/,sub:a},{pattern:/^\x1b\[\d{0,3};\d{0,3}f/,sub:a},{pattern:/^\x1b\[?[\d;]{0,3}/,sub:a},{pattern:/^(([^\x1b\x08\r\n])+)/,sub:function(e){return n("text",e),""}}];function i(t,n){n>3&&r||(r=!1,e=e.replace(t.pattern,t.sub))}var u=[],s=e.length;e:for(;s>0;){for(var l=0,d=0,f=c.length;d<f;l=++d)if(i(c[l],l),e.length!==s){s=e.length;continue e}if(e.length===s)break;u.push(0),s=e.length}}(e.join(""),n,(function(e,t){var o=O(r,e,"".concat(t),n);o&&a.push(o)})),r.length&&a.push(R(r)),a.join("")},T=n(1);function S(e){var t,n,r=e.index,a=e.style,o=e.data;return Object(T.jsx)("div",{style:a,children:Object(T.jsx)("pre",{className:"LogRow__line",dangerouslySetInnerHTML:{__html:w(null!==(t=null===(n=o.logsList)||void 0===n?void 0:n[r-1])&&void 0!==t?t:"")}})})}S.displayName="RunLogsTab";var N,D=o.a.memo(S);!function(e){e.DEFAULT="default",e.LIVE_UPDATE="live-update",e.LOAD_MORE="load-more"}(N||(N={}));n(868);function k(e){var t,n,a=e.isRunLogsLoading,u=e.runHash,j=e.runLogs,_=e.inProgress,x=e.updatedLogsCount,O=o.a.useRef(null),R=o.a.useRef(null),L=o.a.useRef({}),y=o.a.useRef({}),E=o.a.useRef(null),I=o.a.useState(N.DEFAULT),A=Object(r.a)(I,2),w=A[0],S=A[1],k=o.a.useState(g.a.Ok),P=Object(r.a)(k,2),F=P[0],U=P[1],C=o.a.useRef([0,0]),M=o.a.useState(null),q=Object(r.a)(M,2),B=q[0],z=q[1],H=o.a.useState(null),V=Object(r.a)(H,2),W=V[0],G=V[1],Y=o.a.useState(0),J=Object(r.a)(Y,2),K=J[0],Q=J[1],X=o.a.useState(0),Z=Object(r.a)(X,2),$=Z[0],ee=Z[1],te=o.a.useState(null),ne=Object(r.a)(te,2),re=ne[0],ae=ne[1];function oe(){var e,t;S(N.LIVE_UPDATE),ce({runHash:u,record_range:E.current?"".concat((null===(e=C.current)||void 0===e?void 0:e[1])>5?(null===(t=C.current)||void 0===t?void 0:t[1])-5:0,":"):""})}function ce(e){U(g.a.Pending),y.current=m.a.getRunLogs(e),y.current.call().then((function(){U(g.a.Ok),ie(),function(){if(_){var e=window.setTimeout(oe,3e3);O.current={intervalId:e}}}()}))}function ie(){var e,t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(n||w===N.LIVE_UPDATE)&&(null===(t=y.current)||void 0===t||t.abort());(null===(e=O.current)||void 0===e?void 0:e.intervalId)&&clearInterval(O.current.intervalId)}return o.a.useEffect((function(){return ce({runHash:u}),p.a(b.a.runDetails.tabs.logs.tabView),function(){ie(!0)}}),[]),o.a.useEffect((function(){_||ie()}),[_]),o.a.useEffect((function(){var e=c.a.sortBy(Object.values(null!==j&&void 0!==j?j:{}),"index"),t=c.a.sortBy(e.map((function(e){return+e.index}))),n=Array(3).fill("");C.current=[t[0],t[t.length-1]],ae(t),E.current=e.map((function(e){return e.value})).concat(n)}),[j]),o.a.useEffect((function(){var e,t,n,r,a=null!==(e=null===(t=E.current)||void 0===t?void 0:t.length)&&void 0!==e?e:0;if(w===N.LOAD_MORE&&W)null===(n=L.current)||void 0===n||null===(r=n.scrollToItem)||void 0===r||r.call(n,W.visibleStartIndex+x,"start"),S(N.DEFAULT);else if(w===N.LIVE_UPDATE&&W&&(null===W||void 0===W?void 0:W.visibleStopIndex)+x>=a-1||w===N.DEFAULT){var o,i;if(!c.a.isEmpty(re))null===(o=L.current)||void 0===o||null===(i=o.scrollToItem)||void 0===i||i.call(o,a,"end")}else{var u,s,l;null===(u=L.current)||void 0===u||null===(s=u.scrollToItem)||void 0===s||s.call(u,null!==(l=null===W||void 0===W?void 0:W.visibleStartIndex)&&void 0!==l?l:0,"start")}}),[E.current,re]),o.a.useEffect((function(){var e,t,n;w===N.DEFAULT&&K&&$&&(c.a.isEmpty(re)||null===(e=L.current)||void 0===e||null===(t=e.scrollToItem)||void 0===t||t.call(e,null!==(n=null===W||void 0===W?void 0:W.visibleStartIndex)&&void 0!==n?n:0,"start"))}),[K,$]),Object(l.d)((function(){R.current&&(Q(R.current.offsetHeight),ee(R.current.offsetWidth))}),R),Object(T.jsx)(f.a,{children:Object(T.jsx)(d.a,{isLoading:a&&w===N.DEFAULT,className:"RunDetailTabLoader",height:"100%",children:c.a.isEmpty(j)||c.a.isEmpty(re)||c.a.isNil(E.current)?Object(T.jsx)(v.a,{size:"xLarge",className:"RunDetailTabLoader",title:"No Logs"}):Object(T.jsx)("div",{className:"RunDetailLogsTabWrapper",children:Object(T.jsx)("div",{className:"RunDetailLogsTab",children:Object(T.jsx)("div",{className:"Logs",ref:R,children:Object(T.jsxs)("div",{className:"Logs__wrapper",children:[Object(T.jsx)(i.d,{ref:L,height:K||100,itemCount:(null===(t=E.current)||void 0===t?void 0:t.length)+1,itemSize:function(){return 15},width:"100%",overscanCount:100,initialScrollOffset:null!==B&&void 0!==B?B:15*(null===(n=E.current)||void 0===n?void 0:n.length),onItemsRendered:function(e){var t=e.visibleStartIndex,n=e.visibleStopIndex;G({visibleStartIndex:t,visibleStopIndex:n})},itemData:{logsList:E.current},onScroll:function(e){var t,n,r,a=e.scrollOffset,o=e.scrollDirection;z(a),a<=15&&re&&0!==re[0]&&"backward"===o&&(F===g.a.Ok||F===g.a.Pending&&w===N.LIVE_UPDATE)&&(ie(),S(N.LOAD_MORE),ce({runHash:u,record_range:"".concat((null===(t=C.current)||void 0===t?void 0:t[0])>200?(null===(n=C.current)||void 0===n?void 0:n[0])-200:0,":").concat(null===(r=C.current)||void 0===r?void 0:r[0])}))},children:D},"".concat(K).concat($)),Object(T.jsx)("div",{className:s()("overlay",{loading:a&&w===N.LOAD_MORE}),children:Object(T.jsx)(h.l,{size:24})})]})})})})})})}k.displayName="RunLogsTab";var P=o.a.memo(k);t.default=P}}]);
//# sourceMappingURL=RunLogRecords.js.map?version=d811c1f190fa57d22ad5