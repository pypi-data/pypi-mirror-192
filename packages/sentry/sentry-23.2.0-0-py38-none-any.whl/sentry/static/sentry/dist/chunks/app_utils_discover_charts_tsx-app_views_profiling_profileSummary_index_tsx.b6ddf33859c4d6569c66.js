"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_discover_charts_tsx-app_views_profiling_profileSummary_index_tsx"],{"./app/components/profiling/profilingBreadcrumbs.tsx":(e,t,r)=>{r.d(t,{u:()=>c}),r("../node_modules/core-js/modules/es.error.cause.js");var o=r("../node_modules/react/index.js"),n=r("../node_modules/lodash/omit.js"),a=r.n(n),s=r("./app/components/breadcrumbs.tsx"),i=r("./app/locale.tsx"),l=r("./app/utils/profiling/routes.tsx"),u=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function c(e){let{organization:t,trails:r}=e;const n=(0,o.useMemo)((()=>r.map((e=>function(e,t){let{organization:r}=t;switch(e.type){case"landing":return{to:(0,l.XR)({query:a()(e.payload.query,["cursor","query"]),orgSlug:r.slug}),label:(0,i.t)("Profiling"),preservePageFilters:!0};case"profile summary":return{to:(0,l.R0)({query:a()(e.payload.query,["cursor","query"]),orgSlug:r.slug,projectSlug:e.payload.projectSlug,transaction:e.payload.transaction}),label:(0,i.t)("Profile Summary"),preservePageFilters:!0};case"flamechart":return{to:("flamechart"===e.payload.tab?l.TH:l.Qy)({query:e.payload.query,orgSlug:r.slug,projectSlug:e.payload.projectSlug,profileId:e.payload.profileId}),label:e.payload.transaction,preservePageFilters:!0};default:throw new Error(`Unknown breadcrumb type: ${JSON.stringify(e)}`)}}(e,{organization:t})))),[t,r]);return(0,u.tZ)(s.Z,{crumbs:n})}c.displayName="ProfilingBreadcrumbs"},"./app/utils/discover/charts.tsx":(e,t,r)=>{r.d(t,{CX:()=>s,Xp:()=>p,gu:()=>l,x1:()=>u});var o=r("./app/locale.tsx"),n=r("./app/utils.tsx"),a=r("./app/utils/formatters.tsx");function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number";return(0,n.ri)(e)?i(e,t):"—"}function i(e,t){if(!(0,n.ri)(e))return"—";switch(t){case"integer":case"number":return e.toLocaleString();case"percentage":return(0,a.rl)(e,2);case"duration":return(0,a.g9)(e/1e3,2,!0);case"size":return(0,n.F)(e);default:return e.toString()}}function l(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;return u(e,t,r,o)}function u(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;switch(t){case"integer":case"number":return r?(0,a.Du)(e):e.toLocaleString();case"percentage":return(0,a.rl)(e,0);case"duration":return c(e,o);case"size":return(0,n.F)(e,0);default:return e.toString()}}function c(e,t){if(t??=g(e),0===e)return"0";switch(t){case a.ps:{const t=(e/a.ps).toFixed(0);return(0,o.t)("%swk",t)}case a.x4:{const t=(e/a.x4).toFixed(0);return(0,o.t)("%sd",t)}case a.kr:{const t=(e/a.kr).toFixed(0);return(0,o.t)("%shr",t)}case a.EB:{const t=(e/a.EB).toFixed(0);return(0,o.t)("%smin",t)}case a.sh:{const t=(e/a.sh).toFixed(0);return(0,o.t)("%ss",t)}default:const t=e.toFixed(0);return(0,o.t)("%sms",t)}}function p(e,t){let r=0;const o=function(e,t){let r;if(e[0]?.data){let o,n=e[0];e.forEach(((r,a)=>{let{seriesName:s,data:i}=r;!1!==t?.selected?.[s]&&i.length&&(n=e[a],o??=e[a])})),o?.data&&(r={max:Math.max(...o.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e))),min:Math.min(...n.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e)))})}return r}(e,t);if(o){const e=(o.max+o.min)/2;r=g((o.max-o.min)/5),(e/r).toFixed(0).length>6&&(r=g(e))}return r}function g(e){return e>=a.ps?a.ps:e>=a.x4?a.x4:e>=a.kr?a.kr:e>=a.EB?a.EB:e>=a.sh?a.sh:1}},"./app/utils/profiling/hooks/useCurrentProjectFromRouteParam.tsx":(e,t,r)=>{r.d(t,{y:()=>a});var o=r("./app/utils/useParams.tsx"),n=r("./app/utils/useProjects.tsx");function a(){const e=(0,o.U)();return(0,n.Z)({limit:1,slugs:[e?.projectId]}).projects?.[0]??null}},"./app/utils/profiling/routes.tsx":(e,t,r)=>{function o(e){let{orgSlug:t,projectSlug:r,profileId:o}=e;return`/organizations/${t}/profiling/profile/${r}/${o}/flamechart/`}function n(e){let{orgSlug:t,query:r}=e;const o=function(e){let{orgSlug:t}=e;return`/organizations/${t}/profiling/`}({orgSlug:t});return{pathname:o,query:{...r}}}function a(e){let{orgSlug:t,projectSlug:r,transaction:o,query:n}=e;const a=function(e){let{orgSlug:t,projectSlug:r}=e;return`/organizations/${t}/profiling/summary/${r}/`}({orgSlug:t,projectSlug:r});return{pathname:a,query:{...n,transaction:o}}}function s(e){let{orgSlug:t,projectSlug:r,profileId:n,query:a}=e;return{pathname:o({orgSlug:t,projectSlug:r,profileId:n}),query:{...a}}}function i(e){let{orgSlug:t,projectSlug:r,profileId:o,frameName:n,framePackage:a,query:i}=e;return s({orgSlug:t,projectSlug:r,profileId:o,query:{...i,frameName:n,framePackage:a}})}function l(e){let{orgSlug:t,projectSlug:r,profileId:o,query:n}=e;const a=function(e){let{orgSlug:t,projectSlug:r,profileId:o}=e;return`/organizations/${t}/profiling/profile/${r}/${o}/details/`}({orgSlug:t,projectSlug:r,profileId:o});return{pathname:a,query:{...n}}}r.d(t,{O$:()=>o,Qy:()=>l,R0:()=>a,TH:()=>s,XR:()=>n,u$:()=>i})},"./app/views/profiling/profileSummary/index.tsx":(e,t,r)=>{r.r(t),r.d(t,{default:()=>B});var o=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(r("../node_modules/core-js/modules/es.array.push.js"),r("../node_modules/react/index.js")),a=r("../node_modules/react-router/es/index.js"),s=r("./app/components/datePageFilter.tsx"),i=r("./app/components/environmentPageFilter.tsx"),l=r("./app/components/idBadge/index.tsx"),u=r("./app/components/layouts/thirds.tsx"),c=r("./app/components/organizations/pageFilterBar.tsx"),p=r("./app/components/organizations/pageFilters/container.tsx"),g=r("./app/components/profiling/profilingBreadcrumbs.tsx"),d=r("./app/components/sentryDocumentTitle.tsx"),m=r("./app/components/smartSearchBar/index.tsx"),f=r("./app/constants/index.tsx"),y=r("./app/locale.tsx"),x=r("./app/styles/space.tsx"),h=r("./app/utils.tsx"),S=r("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),j=r("./app/utils/discover/fields.tsx"),q=r("./app/utils/profiling/hooks/useCurrentProjectFromRouteParam.tsx"),v=r("./app/utils/profiling/hooks/useProfileFilters.tsx"),b=r("./app/utils/queryString.tsx"),P=r("./app/utils/tokenizeSearch.tsx"),F=r("./app/utils/useOrganization.tsx"),Z=r("./app/utils/withPageFilters.tsx"),_=r("./app/views/profiling/profileSummary/content.tsx"),w=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function k(e){const t=(0,F.Z)(),r=(0,q.y)();(0,n.useEffect)((()=>{(0,S.Z)("profiling_views.profile_summary",{organization:t,project_platform:r?.platform,project_id:r?.id})}),[t]);const o=(0,b.ro)(e.location.query.transaction),x=(0,n.useMemo)((()=>(0,b.ro)(e.location.query.query,"")),[e.location.query.query]),Z=(0,n.useMemo)((()=>{const e=new P.MY(x);return(0,h.ri)(o)&&e.setFilterValues("transaction",[o]),Object.keys(e.filters).forEach((t=>{(0,j.h1)(t)&&e.removeFilter(t)})),e.formatString()}),[x,o]),k=(0,n.useMemo)((()=>{const e=new P.MY("");return(0,h.ri)(o)&&e.setFilterValues("transaction_name",[o]),e.formatString()}),[o]),B=(0,v.J)({query:k,selection:e.selection}),I=(0,n.useCallback)((t=>{a.browserHistory.push({...e.location,query:{...e.location.query,query:t||void 0,cursor:void 0}})}),[e.location]),$=(0,n.useMemo)((()=>[{type:"landing",payload:{query:e.location.query}},{type:"profile summary",payload:{projectSlug:r?.slug??"",query:e.location.query,transaction:o??""}}]),[e.location.query,r?.slug,o]);return(0,w.tZ)(d.Z,{title:(0,y.t)("Profiling — Profile Summary"),orgSlug:t.slug,children:(0,w.tZ)(p.Z,{shouldForceProject:(0,h.ri)(r),forceProject:r,specificProjectSlugs:(0,h.ri)(r)?[r.slug]:[],children:(0,w.tZ)(u.T3,{children:r&&o&&(0,w.BX)(n.Fragment,{children:[(0,w.tZ)(u.h4,{children:(0,w.BX)(u.oB,{children:[(0,w.tZ)(g.u,{organization:t,trails:$}),(0,w.BX)(u.Dx,{children:[r?(0,w.tZ)(l.Z,{project:r,avatarSize:28,hideName:!0,avatarProps:{hasTooltip:!0,tooltip:r.slug}}):null,o]})]})}),(0,w.tZ)(u.uT,{children:(0,w.BX)(u.or,{fullWidth:!0,children:[(0,w.BX)(z,{children:[(0,w.BX)(c.Z,{condensed:!0,children:[(0,w.tZ)(i.Z,{}),(0,w.tZ)(s.Z,{alignDropdown:"left"})]}),(0,w.tZ)(m.Z,{organization:t,hasRecentSearches:!0,searchSource:"profile_summary",supportedTags:B,query:x,onSearch:I,maxQueryLength:f.dI})]}),(0,w.tZ)(_.J,{location:e.location,project:r,selection:e.selection,transaction:o,query:Z})]})})]})})})})}k.displayName="ProfileSummaryPage";const z=(0,o.Z)("div",{target:"e1dzn5ix0"})("display:grid;gap:",(0,x.D)(2),";grid-template-columns:min-content auto;margin-bottom:",(0,x.D)(2),";"),B=(0,Z.Z)(k)}}]);
//# sourceMappingURL=../sourcemaps/app_utils_discover_charts_tsx-app_views_profiling_profileSummary_index_tsx.f3b76edd6829660380bc571f013f7f5c.js.map