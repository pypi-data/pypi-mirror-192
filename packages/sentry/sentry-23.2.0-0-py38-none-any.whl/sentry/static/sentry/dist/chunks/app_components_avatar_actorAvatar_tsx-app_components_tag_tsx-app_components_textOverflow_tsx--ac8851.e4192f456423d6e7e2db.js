"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_avatar_actorAvatar_tsx-app_components_tag_tsx-app_components_textOverflow_tsx--ac8851"],{"./app/actionCreators/teams.tsx":(e,t,s)=>{s.d(t,{Cm:()=>d,PX:()=>i,s:()=>u,tT:()=>p,um:()=>c,z_:()=>l});var r=s("./app/actionCreators/indicator.tsx"),o=s("./app/locale.tsx"),n=s("./app/stores/teamStore.tsx");const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var s=arguments.length,r=new Array(s>2?s-2:0),o=2;o<s;o++)r[o-2]=arguments[o];return e[t]?.(...r)};async function i(e,t){const s=await e.requestPromise(`/organizations/${t.orgId}/user-teams/`);n.Z.loadUserTeams(s)}function l(e,t){n.Z.onUpdateSuccess(e,t)}function c(e,t,s){const r=`/organizations/${t.orgId}/members/${t.memberId??"me"}/teams/${t.teamId}/`;return e.request(r,{method:"POST",success:e=>{n.Z.onUpdateSuccess(t.teamId,e),a(s,"success",e)},error:e=>{a(s,"error",e)}})}function u(e,t,s){const r=`/organizations/${t.orgId}/members/${t.memberId||"me"}/teams/${t.teamId}/`;return e.request(r,{method:"DELETE",success:e=>{n.Z.onUpdateSuccess(t.teamId,e),a(s,"success",e)},error:e=>{a(s,"error",e)}})}function d(e,t,s){return e.requestPromise(`/organizations/${s.orgId}/teams/`,{method:"POST",data:t}).then((e=>(n.Z.onCreateSuccess(e),(0,r.S9)((0,o._N)("[team] has been added to the [organization] organization",{team:`#${e.slug}`,organization:s.orgId})),e)),(e=>{throw(0,r.Iw)((0,o._N)("Unable to create [team] in the [organization] organization",{team:`#${t.slug}`,organization:s.orgId})),e}))}function p(e,t){return e.requestPromise(`/teams/${t.orgId}/${t.teamId}/`,{method:"DELETE"}).then((e=>(n.Z.onRemoveSuccess(t.teamId),(0,r.S9)((0,o._N)("[team] has been removed from the [organization] organization",{team:`#${t.teamId}`,organization:t.orgId})),e)),(e=>{throw(0,r.Iw)((0,o._N)("Unable to remove [team] from the [organization] organization",{team:`#${t.teamId}`,organization:t.orgId})),e}))}},"./app/components/avatar/actorAvatar.tsx":(e,t,s)=>{s.d(t,{Z:()=>u}),s("../node_modules/core-js/modules/es.error.cause.js");var r=s("../node_modules/@sentry/core/esm/exports.js"),o=s("./app/components/avatar/teamAvatar.tsx"),n=s("./app/components/avatar/userAvatar.tsx"),a=s("./app/components/loadingIndicator.tsx"),i=s("./app/stores/memberListStore.tsx"),l=s("./app/utils/teams.tsx"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const u=function(e){let{size:t=24,hasTooltip:s=!0,actor:u,...d}=e;const p={size:t,hasTooltip:s,...d};if("user"===u.type){const e=u.id?i.Z.getById(u.id)??u:u;return(0,c.tZ)(n.Z,{user:e,...p})}return"team"===u.type?(0,c.tZ)(l.Z,{ids:[u.id],children:e=>{let{initiallyLoaded:t,teams:s}=e;return t?(0,c.tZ)(o.Z,{team:s[0],...p}):(0,c.tZ)(a.Z,{mini:!0})}}):(r.$e((e=>{e.setExtra("actor",u),r.Tb(new Error("Unknown avatar type"))})),null)}},"./app/components/tag.tsx":(e,t,s)=>{s.d(t,{A:()=>Z,Z:()=>S});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),n=s("./app/components/button.tsx"),a=s("./app/components/links/externalLink.tsx"),i=s("./app/components/links/link.tsx"),l=s("./app/components/tooltip.tsx"),c=s("./app/icons/index.tsx"),u=s("./app/locale.tsx"),d=s("./app/styles/space.tsx"),p=s("./app/utils.tsx"),m=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),h=s("./app/utils/theme.tsx"),g=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const x="20px";function f(e){let{type:t="default",icon:s,tooltipText:r,to:n,onClick:d,href:x,onDismiss:f,children:S,textMaxWidth:b=150,..._}=e;const C={size:"xs",color:h.ZP.tag[t].iconColor},z=(0,g.tZ)(l.u,{title:r,containerDisplayMode:"inline-flex",children:(0,g.BX)(Z,{type:t,children:[(0,o.isValidElement)(s)?(0,g.tZ)(v,{children:(0,o.cloneElement)(s,{...C})}):((0,p.ri)(x)||(0,p.ri)(n))&&void 0===s?(0,g.tZ)(v,{children:(0,g.tZ)(c.V$,{...C})}):null,(0,g.tZ)(j,{type:t,maxWidth:b,children:S}),(0,p.ri)(f)&&(0,g.tZ)(w,{onClick:function(e){e.preventDefault(),f?.()},size:"zero",priority:"link","aria-label":(0,u.t)("Dismiss"),children:(0,g.tZ)(c.bM,{isCircled:!0,...C})})]})});return(0,g.tZ)(y,{..._,onClick:()=>{(0,m.Z)("tag.clicked",{is_clickable:(0,p.ri)(d)||(0,p.ri)(n)||(0,p.ri)(x),organization:null})},children:(0,p.ri)(x)?(0,g.tZ)(a.Z,{href:x,children:z}):(0,p.ri)(n)&&(0,p.ri)(d)?(0,g.tZ)(i.Z,{to:n,onClick:d,children:z}):(0,p.ri)(n)?(0,g.tZ)(i.Z,{to:n,children:z}):z})}f.displayName="Tag";const y=(0,r.Z)("span",{target:"ecaysl4"})("font-size:",(e=>e.theme.fontSizeSmall),";"),Z=(0,r.Z)("div",{target:"ecaysl3"})("display:inline-flex;align-items:center;height:",x,";border-radius:",x,";background-color:",(e=>e.theme.tag[e.type].background),";border:solid 1px ",(e=>e.theme.tag[e.type].border),";padding:0 ",(0,d.D)(1),";"),v=(0,r.Z)("span",{target:"ecaysl2"})("margin-right:",(0,d.D)(.5),";display:inline-flex;"),j=(0,r.Z)("span",{target:"ecaysl1"})("color:",(e=>["black","white"].includes(e.type)?e.theme.tag[e.type].iconColor:e.theme.textColor),";max-width:",(e=>e.maxWidth),"px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;line-height:",x,";"),w=(0,r.Z)(n.zx,{target:"ecaysl0"})("margin-left:",(0,d.D)(.5),";border:none;"),S=f},"./app/components/textOverflow.tsx":(e,t,s)=>{s.d(t,{Z:()=>a});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const n=(0,r.Z)((e=>{let{children:t,className:s,ellipsisDirection:r,isParagraph:n,"data-test-id":a}=e;const i=n?"p":"div";return"left"===r?(0,o.tZ)(i,{className:s,"data-test-id":a,children:(0,o.tZ)("bdi",{children:t})}):(0,o.tZ)(i,{className:s,"data-test-id":a,children:t})}),{target:"e1lyrgnz0"})((e=>e.theme.overflowEllipsis)," ",(e=>"left"===e.ellipsisDirection&&"\n      direction: rtl;\n      text-align: left;\n    "),";width:auto;line-height:1.2;");n.defaultProps={ellipsisDirection:"right",isParagraph:!1};const a=n},"./app/stores/memberListStore.tsx":(e,t,s)=>{s.d(t,{Z:()=>o});const r={loaded:!1,state:[],init(){this.state=[],this.loaded=!1},loadInitialData(e){this.state=e,this.loaded=!0,this.trigger(this.state,"initial")},isLoaded(){return this.loaded},getById(e){if(this.state){e=""+e;for(let t=0;t<this.state.length;t++)if(this.state[t].id===e)return this.state[t]}},getAll(){return this.state},getState(){return this.state}},o=(0,s("../node_modules/reflux/src/index.js").createStore)(r)},"./app/utils/isActiveSuperuser.tsx":(e,t,s)=>{s.d(t,{M:()=>i});var r=s("../node_modules/js-cookie/dist/js.cookie.mjs"),o=s("./app/stores/configStore.tsx");const n=window.superUserCookieName??"su",a=window.superUserCookieDomain;function i(){const{isSuperuser:e}=o.Z.get("user")||{};if(e){const e=o.Z.get("superUserCookieName")||n,t=o.Z.get("superUserCookieDomain")||a;if(r.Z.set(e,"set-in-isActiveSuperuser",{domain:t}),void 0===r.Z.get(e))return!0}return!1}},"./app/utils/teams.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("../node_modules/react/index.js"),o=s("./app/utils/useTeams.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{children:t,...s}=e;const a=(0,o.Z)(s);return(0,n.tZ)(r.Fragment,{children:t(a)})}a.displayName="Teams";const i=a},"./app/utils/useApi.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var r=s("../node_modules/react/index.js"),o=s("./app/api.tsx");const n=function(){let{persistInFlight:e,api:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=(0,r.useRef)();void 0===s.current&&void 0===t&&(s.current=new o.KU);const n=t??s.current,a=(0,r.useCallback)((()=>{e||n.clear()}),[n,e]);return(0,r.useEffect)((()=>a),[a]),n}},"./app/utils/useProjects.tsx":(e,t,s)=>{s.d(t,{Z:()=>p}),s("../node_modules/core-js/modules/es.array.includes.js");var r=s("../node_modules/react/index.js"),o=s("../node_modules/lodash/uniqBy.js"),n=s.n(o),a=s("./app/stores/organizationStore.tsx"),i=s("./app/stores/projectsStore.tsx"),l=s("./app/stores/useLegacyStore.tsx"),c=s("./app/utils/parseLinkHeader.tsx"),u=s("./app/utils/useApi.tsx");async function d(e,t){let{slugs:s,search:r,limit:o,lastSearch:n,cursor:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i={collapse:["latestDeploys"]};void 0!==s&&s.length>0&&(i.query=s.map((e=>`slug:${e}`)).join(" ")),r&&(i.query=`${i.query??""}${r}`.trim());const l=!n&&!r||n===r;l&&a&&(i.cursor=a),void 0!==o&&(i.per_page=o);let u=!1,d=null;const[p,,m]=await e.requestPromise(`/organizations/${t}/projects/`,{includeAllArgs:!0,query:i}),h=m?.getResponseHeader("Link");if(h){const e=(0,c.Z)(h);u=e?.next?.results||e?.previous?.results,d=e?.next?.cursor}return{results:p,hasMore:u,nextCursor:d}}const p=function(){let{limit:e,slugs:t,orgId:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=(0,u.Z)(),{organization:c}=(0,l.X)(a.Z),p=(0,l.X)(i.Z),m=s??c?.slug,h=new Set(p.projects.map((e=>e.slug))),g=t?.filter((e=>!h.has(e)))??[],x=g.length>0,[f,y]=(0,r.useState)({initiallyLoaded:!p.loading&&!x,fetching:x,hasMore:null,lastSearch:null,nextCursor:null,fetchError:null}),Z=(0,r.useRef)(null);async function v(){if(void 0!==m){y({...f,fetching:!0});try{const{results:t,hasMore:s,nextCursor:r}=await d(o,m,{slugs:g,limit:e}),a=n()([...p.projects,...t],(e=>{let{slug:t}=e;return t}));i.Z.loadInitialData(a),y({...f,hasMore:s,fetching:!1,initiallyLoaded:!0,nextCursor:r})}catch(e){console.error(e),y({...f,fetching:!1,initiallyLoaded:!p.loading,fetchError:e})}}else console.error("Cannot use useProjects({slugs}) without an organization in context")}async function j(t){const{lastSearch:s}=f,r=f.nextCursor;if(""!==t)if(void 0!==m){y({...f,fetching:!0});try{o.clear();const{results:a,hasMore:l,nextCursor:c}=await d(o,m,{search:t,limit:e,lastSearch:s,cursor:r}),u=n()([...p.projects,...a],(e=>{let{slug:t}=e;return t}));u.length>p.projects.length&&i.Z.loadInitialData(u),y({...f,hasMore:l,fetching:!1,lastSearch:t,nextCursor:c})}catch(e){console.error(e),y({...f,fetching:!1,fetchError:e})}}else console.error("Cannot use useProjects.onSearch without an organization in context")}void 0!==t&&(null===Z.current&&(Z.current=new Set(t)),(t.length!==Z.current.size||t.some((e=>!Z.current?.has(e))))&&(Z.current=new Set(t))),(0,r.useEffect)((()=>{x&&v()}),[Z.current]),(0,r.useEffect)((()=>{const e=!p.loading;f.initiallyLoaded!==e&&(x||y({...f,initiallyLoaded:e}))}),[p.loading]);const{initiallyLoaded:w,fetching:S,fetchError:b,hasMore:_}=f,C=t?p.projects.filter((e=>t.includes(e.slug))):p.projects,z=g.map((e=>({slug:e}))),I={projects:C,placeholders:z,fetching:S||p.loading,initiallyLoaded:w,fetchError:b,hasMore:_,onSearch:j};return I}},"./app/utils/useTeams.tsx":(e,t,s)=>{s.d(t,{Z:()=>h}),s("../node_modules/core-js/modules/es.array.includes.js");var r=s("../node_modules/react/index.js"),o=s("../node_modules/lodash/uniqBy.js"),n=s.n(o),a=s("./app/actionCreators/teams.tsx"),i=s("./app/stores/organizationStore.tsx"),l=s("./app/stores/teamStore.tsx"),c=s("./app/stores/useLegacyStore.tsx"),u=s("./app/utils/isActiveSuperuser.tsx"),d=s("./app/utils/parseLinkHeader.tsx"),p=s("./app/utils/useApi.tsx");async function m(e,t){let{slugs:s,ids:r,search:o,limit:n,lastSearch:a,cursor:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l={};void 0!==s&&s.length>0&&(l.query=s.map((e=>`slug:${e}`)).join(" ")),void 0!==r&&r.length>0&&(l.query=r.map((e=>`id:${e}`)).join(" ")),o&&(l.query=`${l.query??""} ${o}`.trim());const c=a===o||!a&&!o;c&&i&&(l.cursor=i),void 0!==n&&(l.per_page=n);let u=!1,p=null;const[m,,h]=await e.requestPromise(`/organizations/${t}/teams/`,{includeAllArgs:!0,query:l}),g=h?.getResponseHeader("Link");if(g){const e=(0,d.Z)(g);u=e?.next?.results,p=e?.next?.cursor}return{results:m,hasMore:u,nextCursor:p}}const h=function(){let{limit:e,slugs:t,ids:s,provideUserTeams:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const d=(0,p.Z)(),{organization:h}=(0,c.X)(i.Z),g=(0,c.X)(l.Z),x=h?.slug,f=new Set(g.teams.map((e=>e.slug))),y=t?.filter((e=>!f.has(e)))??[],Z=new Set(g.teams.map((e=>e.id))),v=s?.filter((e=>!Z.has(e)))??[],j=y.length>0,w=v.length>0,S=o&&!g.loadedUserTeams,b=!j&&!S&&!w,[_,C]=(0,r.useState)({initiallyLoaded:b,fetching:!1,hasMore:g.hasMore,lastSearch:null,nextCursor:g.cursor,fetchError:null}),z=(0,r.useRef)(null);if(void 0!==t||void 0!==s){const e=(t||s)??[];null===z.current&&(z.current=new Set(e)),(e.length!==z.current.size||e.some((e=>!z.current?.has(e))))&&(z.current=new Set(e))}async function I(){if(void 0!==x){C({..._,fetching:!0});try{await(0,a.PX)(d,{orgId:x}),C({..._,fetching:!1,initiallyLoaded:!0})}catch(e){console.error(e),C({..._,fetching:!1,initiallyLoaded:!0,fetchError:e})}}}async function k(){if(void 0!==x){C({..._,fetching:!0});try{const{results:t,hasMore:s,nextCursor:r}=await m(d,x,{slugs:y,ids:v,limit:e}),o=n()([...t,...g.teams],(e=>{let{id:t}=e;return t}));l.Z.loadInitialData(o),C({..._,hasMore:s,fetching:!1,initiallyLoaded:!0,nextCursor:r})}catch(e){console.error(e),C({..._,fetching:!1,initiallyLoaded:!0,fetchError:e})}}}function M(e){return""!==e?L(e):(_.hasMore===g.hasMore&&_.nextCursor===g.cursor||C({..._,lastSearch:e,hasMore:g.hasMore,nextCursor:g.cursor}),Promise.resolve())}async function L(t){const{lastSearch:s}=_,r=t?_.nextCursor:g.cursor;if(void 0!==x){C({..._,fetching:!0});try{d.clear();const{results:o,hasMore:a,nextCursor:i}=await m(d,x,{search:t,limit:e,lastSearch:s,cursor:r}),c=n()([...g.teams,...o],(e=>{let{slug:t}=e;return t}));t?c.length>g.teams.length&&l.Z.loadInitialData(c):l.Z.loadInitialData(c,a,i),C({..._,hasMore:a&&g.hasMore,fetching:!1,lastSearch:t??null,nextCursor:i})}catch(e){console.error(e),C({..._,fetching:!1,fetchError:e})}}else console.error("Cannot fetch teams without an organization in context")}(0,r.useEffect)((()=>{j||w?k():S&&I()}),[z.current,o]);const E=(0,u.M)(),$=(0,r.useMemo)((()=>t?g.teams.filter((e=>t.includes(e.slug))):s?g.teams.filter((e=>s.includes(e.id))):o&&!E?g.teams.filter((e=>e.isMember)):g.teams),[g.teams,s,t,o,E]),D={teams:$,fetching:_.fetching||g.loading,initiallyLoaded:_.initiallyLoaded,fetchError:_.fetchError,hasMore:_.hasMore??g.hasMore,onSearch:M,loadMore:L};return D}},"./app/utils/withApi.tsx":(e,t,s)=>{s.d(t,{Z:()=>a});var r=s("./app/utils/getDisplayName.tsx"),o=s("./app/utils/useApi.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=s=>{let{api:r,...a}=s;const i=(0,o.Z)({api:r,...t});return(0,n.tZ)(e,{...a,api:i})};return s.displayName=`withApi(${(0,r.Z)(e)})`,s}},"./app/utils/withProjects.tsx":(e,t,s)=>{s.d(t,{Z:()=>a});var r=s("./app/utils/getDisplayName.tsx"),o=s("./app/utils/useProjects.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=function(e){const t=t=>{const{projects:s,initiallyLoaded:r}=(0,o.Z)(),a=!r;return(0,n.tZ)(e,{...t,projects:s,loadingProjects:a})};return t.displayName=`withProjects(${(0,r.Z)(e)})`,t}}}]);
//# sourceMappingURL=../sourcemaps/app_components_avatar_actorAvatar_tsx-app_components_tag_tsx-app_components_textOverflow_tsx--ac8851.637e8676ab9e11f9f256e8a1fae27b50.js.map