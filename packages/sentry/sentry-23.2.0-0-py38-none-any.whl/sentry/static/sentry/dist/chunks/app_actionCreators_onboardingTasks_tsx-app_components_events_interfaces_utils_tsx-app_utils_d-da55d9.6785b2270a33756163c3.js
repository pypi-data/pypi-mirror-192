"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_actionCreators_onboardingTasks_tsx-app_components_events_interfaces_utils_tsx-app_utils_d-da55d9"],{"./app/actionCreators/discoverSavedQueries.tsx":(e,t,n)=>{n.d(t,{EQ:()=>c,GH:()=>i,M6:()=>u,Yi:()=>o,qF:()=>l});var r=n("./app/actionCreators/indicator.tsx"),s=n("./app/api.tsx"),a=n("./app/locale.tsx");function o(e,t,n){const s=e.requestPromise(`/organizations/${t}/discover/saved/${n}/`,{method:"GET"});return s.catch((()=>{(0,r.Iw)((0,a.t)("Unable to load saved query"))})),s}function i(e,t,n){const s=e.requestPromise(`/organizations/${t}/discover/saved/`,{method:"POST",data:n});return s.catch((()=>{(0,r.Iw)((0,a.t)("Unable to create your saved query"))})),s}function u(e,t,n){const s=e.requestPromise(`/organizations/${t}/discover/saved/${n.id}/`,{method:"PUT",data:n});return s.catch((()=>{(0,r.Iw)((0,a.t)("Unable to update your saved query"))})),s}function c(e,t){return(new s.KU).requestPromise(`/organizations/${e}/discover/saved/${t}/visit/`,{method:"POST"})}function l(e,t,n){const s=e.requestPromise(`/organizations/${t}/discover/saved/${n}/`,{method:"DELETE"});return s.catch((()=>{(0,r.Iw)((0,a.t)("Unable to delete the saved query"))})),s}},"./app/actionCreators/onboardingTasks.tsx":(e,t,n)=>{n.d(t,{T:()=>a});var r=n("./app/stores/configStore.tsx"),s=n("./app/stores/organizationStore.tsx");function a(e,t,n){null!==e&&e.requestPromise(`/organizations/${t.slug}/onboarding-tasks/`,{method:"POST",data:n});const a=t.onboardingTasks.find((e=>e.task===n.task)),o=r.Z.get("user"),i=a?t.onboardingTasks.map((e=>e.task===n.task?{...e,...n}:e)):[...t.onboardingTasks,{...n,user:o}];s.Z.onUpdate({onboardingTasks:i})}},"./app/components/events/interfaces/utils.tsx":(e,t,n)=>{if(n.d(t,{Cy:()=>E,HW:()=>_,L2:()=>b,Pd:()=>R,Tg:()=>h,Y3:()=>P,ll:()=>g,mn:()=>y,yD:()=>S}),n("../node_modules/core-js/modules/es.error.cause.js"),n("../node_modules/core-js/modules/es.array.push.js"),"app"==n.j)var r=n("../node_modules/@sentry/core/esm/exports.js");var s=n("../node_modules/lodash/compact.js"),a=n.n(s),o=n("../node_modules/lodash/isString.js"),i=n.n(o),u=n("../node_modules/lodash/uniq.js"),c=n.n(u),l=n("../node_modules/query-string/index.js"),d=n("./app/constants/index.tsx"),p=n("./app/stores/configStore.tsx"),f=n("./app/utils.tsx"),m=n("./app/utils/fileExtension.tsx");function v(e){return e.replace(/(["$`\\])/g,"\\$1")}function g(e){let t="curl";(0,f.ri)(e.method)&&"GET"!==e.method&&(t+=" \\\n -X "+e.method);const n=e.headers?.find((e=>"Accept-Encoding"===e[0]&&-1!==e[1].indexOf("gzip")));n&&(t+=" \\\n --compressed");const s=e.headers?.sort((function(e,t){return e[0]===t[0]?0:e[0]<t[0]?-1:1}))??[];for(const e of s)t+=' \\\n -H "'+e[0]+": "+v(e[1]+"")+'"';if((0,f.ri)(e.data))switch(e.inferredContentType){case"application/json":t+=' \\\n --data "'+v(JSON.stringify(e.data))+'"';break;case"application/x-www-form-urlencoded":t+=' \\\n --data "'+v(l.stringify(e.data))+'"';break;default:i()(e.data)?t+=' \\\n --data "'+v(e.data)+'"':0===Object.keys(e.data).length||r.$e((t=>{t.setExtra("data",e),r.Tb(new Error("Unknown event data"))}))}return t+=' \\\n "'+y(e)+'"',t}function y(e){let t=e?.url;return t?(e?.query?.length&&(t+="?"+function(e){if(i()(e))return e;const t={};for(const n of e)if(null!==n&&2===n.length){const[e,r]=n;null!==r&&(Array.isArray(t[e])?t[e].push(r):t[e]=[r])}return l.stringify(t)}(e.query)),e.fragment&&(t+="#"+e.fragment),v(t)):t}function _(e){const t={};for(const n of Object.getOwnPropertyNames(e))e[n]!==d.Gj&&(t[n]=e[n]);return t}function h(e,t){return`0x${e.toString(16).padStart(t??0,"0")}`}function E(e){if(!e)return 0;try{return parseInt(e,16)||0}catch(e){return 0}}function R(e){const t=E(e?.image_addr);return[t,t+(e?.image_size||0)]}function S(e){let t,n,r,s;const a=e?e.split(","):[];return 4===a.length&&(t=a[0],n=a[1].split("Version=")[1],r=a[2].split("Culture=")[1],s=a[3].split("PublicKeyToken=")[1]),{name:t,version:n,culture:r,publicKeyToken:s}}function P(e,t){const n=c()(a()(t.map((e=>(0,m.m)(e.filename??"")))));return 1===n.length?(0,m._)(n[0])??e:e}function b(){const e=p.Z.get("user");if(!e)return!0;switch(e.options.stacktraceOrder){case 2:default:return!0;case 1:return!1}}},"./app/utils/demoMode.tsx":(e,t,n)=>{n.d(t,{_8:()=>c,ax:()=>u,g3:()=>i,gp:()=>o,vM:()=>a});var r=n("./app/stores/configStore.tsx"),s=n("./app/types/index.tsx");function a(){const e=window.SandboxData?.extraQueryString||"";return new URLSearchParams(e)}function o(){const e=a(),t=localStorage.getItem("email");return t&&e.append("email",t),e}function i(e,t){const n=t.toString();return n?e+"?"+n:e}function u(){return r.Z.get("demoMode")}function c(e){switch(e){case"sidebar_v2":return{tour:"tabs",task:s.ve.SIDEBAR_GUIDE};case"issues_v3":return{tour:"issues",task:s.ve.ISSUE_GUIDE};case"release-details_v2":return{tour:"releases",task:s.ve.RELEASE_GUIDE};case"transaction_details_v2":return{tour:"performance",task:s.ve.PERFORMANCE_GUIDE};default:return}}},"./app/utils/discover/types.tsx":(e,t,n)=>{n.d(t,{CU:()=>c,DC:()=>a,GY:()=>u,Rx:()=>d,as:()=>o,hY:()=>s,lJ:()=>l,px:()=>p,v2:()=>i});var r=n("./app/locale.tsx");const s=5;let a,o;!function(e){e.DEFAULT="default",e.PREVIOUS="previous",e.TOP5="top5",e.DAILY="daily",e.DAILYTOP5="dailytop5",e.WORLDMAP="worldmap",e.BAR="bar"}(a||(a={})),function(e){e.DISCOVER="discover",e.METRICS="metrics",e.METRICS_ENHANCED="metricsEnhanced",e.ISSUE_PLATFORM="issuePlatform"}(o||(o={}));const i=[a.TOP5,a.DAILYTOP5],u=[a.DEFAULT,a.PREVIOUS,a.TOP5,a.BAR],c=[{value:a.DEFAULT,label:(0,r.t)("Total Period")},{value:a.PREVIOUS,label:(0,r.t)("Previous Period")},{value:a.TOP5,label:(0,r.t)("Top 5 Period")},{value:a.DAILY,label:(0,r.t)("Total Daily")},{value:a.DAILYTOP5,label:(0,r.t)("Top 5 Daily")},{value:a.WORLDMAP,label:(0,r.t)("World Map")},{value:a.BAR,label:(0,r.t)("Bar Chart")}],l={[a.DEFAULT]:a.DEFAULT,[a.PREVIOUS]:a.DEFAULT,[a.TOP5]:a.DEFAULT,[a.DAILY]:a.DEFAULT,[a.DAILYTOP5]:a.DAILY,[a.WORLDMAP]:a.DEFAULT,[a.BAR]:a.DEFAULT},d=[{label:"count()",value:"count()"},{label:"count_unique(user)",value:"count_unique(user)"}],p=[a.DEFAULT,a.DAILY,a.PREVIOUS,a.BAR]},"./app/utils/events.tsx":(e,t,n)=>{n.d(t,{FC:()=>l,K2:()=>p,OL:()=>_,Sq:()=>T,T7:()=>b,XQ:()=>v,YQ:()=>m,k$:()=>d}),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("../node_modules/lodash/uniq.js"),s=n.n(r),a=n("./app/types/index.tsx"),o=n("./app/types/event.tsx"),i=n("./app/utils/getDaysSinceDate.tsx"),u=n("./app/utils/platform.tsx");function c(e){return!e.hasOwnProperty("type")}function l(e){if(c(e))return e.culprit||"";const{metadata:t,type:n,culprit:r}=e;switch(n){case a.eP.ERROR:case a.eP.TRANSACTION:return t.value;case a.eP.CSP:return t.message;case a.eP.EXPECTCT:case a.eP.EXPECTSTAPLE:case a.eP.HPKP:return"";default:return r||""}}function d(e){if(!c(e))return e.type===a.eP.ERROR&&(0,u.gx)(e.platform)&&e.metadata.filename||void 0}function p(e){if("string"==typeof e)return e;const t=e?.function||e?.package||e?.filebase||e?.type,n=e?.classbase;return n?t?`${n}.${t}`:n:t||"<unknown>"}function f(e){const{type:t,current_tree_label:n,finest_tree_label:r}=e,s=n||r,a=s?s.map((e=>p(e))).join(" | "):void 0;return t?a?{title:`${t} | ${a}`,treeLabel:[{type:t},...s??[]]}:{title:t,treeLabel:void 0}:{title:a||e.function||"<unknown>",treeLabel:s}}function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{metadata:r,type:s,culprit:o,title:i}=e,c=t.includes("custom-event-title")&&r?.title?r.title:void 0;switch(s){case a.eP.ERROR:return c?{title:c,subtitle:o,treeLabel:void 0}:t.includes("grouping-title-ui")&&(n||(0,u.gx)(e.platform)||(0,u.an)(e.platform))?{subtitle:o,...f(r)}:{subtitle:o,title:r.type||r.function||"<unknown>",treeLabel:void 0};case a.eP.CSP:return{title:c??r.directive??"",subtitle:r.uri??"",treeLabel:void 0};case a.eP.EXPECTCT:case a.eP.EXPECTSTAPLE:case a.eP.HPKP:return{title:c??(r.message||i),subtitle:r.origin??"",treeLabel:void 0};case a.eP.DEFAULT:return{title:c??r.title??"",subtitle:"",treeLabel:void 0};case a.eP.TRANSACTION:const s=e.issueCategory===a.qE.PERFORMANCE;return{title:s?r.title:c??i,subtitle:s?o:"",treeLabel:void 0};default:return{title:c??i,subtitle:"",treeLabel:void 0}}}function v(e){return e.substring(0,8)}function g(e){return s()(e.errors?.map((e=>e.type))).join(",")||""}function y(e){return"error"===e.type&&!!e.contexts?.trace}function _(e){return e.entries?.some((e=>e.type===o.UZ.EXCEPTION&&e.data.values?.some((e=>!!e.rawStacktrace&&!!e.stacktrace))))}function h(e){return e.entries?.filter((e=>"exception"===e.type))}function E(e){const t=h(e)?.map((e=>(e.data.values||[]).reduce(((e,t)=>{const n=t.stacktrace?.frames?.length||0;return Math.max(e,n)}),0)))||[];return t.length?Math.max(...t):0}function R(e){const t=h(e)?.map((e=>(e.data.values||[]).reduce(((e,t)=>{const n=t.stacktrace?.frames?.filter((e=>e.inApp))||[];return Math.max(e,n.length)}),0)))||[];return t.length?Math.max(...t):0}function S(e){const t=(e.entries?.filter((e=>"threads"===e.type))||[]).map((e=>e.data?.values?.filter((e=>!!e.name)).length||0))||[];return t.length?Math.max(...t):0}function P(e){return e.activity&&e.activity.filter((e=>e.type===a.fc.ASSIGNED)).find((e=>!!e.data.integration))?.data.integration||""}function b(e){return{event_id:e?.eventID||"-1",num_commits:e?.release?.commitCount||0,num_stack_frames:e?E(e):0,num_in_app_stack_frames:e?R(e):0,num_threads_with_names:e?S(e):0,event_platform:e?.platform,event_type:e?.type,has_release:!!e?.release,has_source_maps:!!e&&_(e),has_trace:!!e&&y(e),has_commit:!!e?.release?.lastCommit,event_errors:e?g(e):"",sdk_name:e?.sdk?.name,sdk_version:e?.sdk?.version,release_user_agent:e?.release?.userAgent,error_has_replay:Boolean(e?.tags?.find((e=>{let{key:t}=e;return"replayId"===t}))),has_otel:void 0!==e?.contexts?.otel}}function T(e){const t=e?parseInt(e.id,10):-1;return{group_id:t,issue_id:t,issue_category:e?.issueCategory??a.qE.ERROR,issue_type:e?.issueType??a.EM.ERROR,issue_status:e?.status,issue_age:e?.firstSeen?(0,i.Z)(e.firstSeen):-1,issue_level:e?.level,is_assigned:!!e?.assignedTo,error_count:Number(e?.count||-1),group_has_replay:Boolean(e?.tags?.find((e=>{let{key:t}=e;return"replayId"===t}))),num_comments:e?e.numComments:-1,has_external_issue:!!e?.annotations&&e?.annotations.length>0,has_owner:!!e?.owners&&e?.owners.length>0,integration_assignment_source:e?P(e):""}}},"./app/utils/performance/quickTrace/utils.tsx":(e,t,n)=>{n.d(t,{$J:()=>h,Ci:()=>P,R8:()=>v,S2:()=>E,_Z:()=>_,eF:()=>y,eW:()=>f,hp:()=>d,q2:()=>p,xB:()=>R,y3:()=>S}),n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/core-js/modules/es.error.cause.js");var r=n("../node_modules/lodash/omit.js"),s=n.n(r),a=n("../node_modules/moment-timezone/index.js"),o=n.n(a),i=n("./app/components/events/interfaces/spans/utils.tsx"),u=n("./app/constants/pageFilters.tsx"),c=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),l=n("./app/utils/discover/eventView.tsx");function d(e){return"transaction"===e.type}function p(e,t){return d(t)?e.event_id===t.id:void 0!==e.errors&&e.errors.some((e=>e.event_id===t.id))}function f(e,t){const n=[],r=[],s=[{event:t,path:[]}];for(;s.length;){const t=s.shift();if(p(t.event,e)){for(const e of t.path)n.push(e);r.push(t.event)}else{const e=[...t.path,m(t.event)];for(const n of t.event.children)s.push({event:n,path:e})}}if(!r.length)throw new Error("No relevant path exists!");for(;r.length;){const e=r.shift();for(const t of e.children)r.push(t);n.push(m(e))}return n}function m(e){return s()(e,["children"])}function v(e,t,n){const{type:r,trace:s}=e;if("empty"===r||null===s)throw new Error("Current event not in trace navigator!");const a="full"===r,o=s.find((e=>p(e,t)))??null;if(null===o)throw new Error("Current event not in trace navigator!");const i=o.parent_event_id?s.find((e=>e.event_id===o.parent_event_id))??null:null,u=s.find((e=>e.event_id!==o.event_id&&e.event_id!==i?.event_id&&0===e.generation))??null,l=a?[]:null,d=[],f=a?[]:null,m=new Set;return s.forEach((e=>{m.add(e.project_id),(e=>e.parent_event_id===o.event_id)(e)?d.push(e):a&&((e=>null!==o.generation&&null!==e.generation&&e.generation>0&&o.generation-1>e.generation)(e)?l?.push(e):(e=>null!==o.generation&&null!==e.generation&&o.generation+1<e.generation)(e)&&f?.push(e))})),a&&m.size>1&&function(e,t){(0,c.Z)("quick_trace.connected_services",{organization:e.id,projects:t})}(n,m.size),{root:u,ancestors:null===l?null:g(l),parent:i,current:o,children:g(d),descendants:null===f?null:g(f)}}function g(e){return e.sort(((e,t)=>t["transaction.duration"]-e["transaction.duration"]))}function y(e){let{eventView:t,location:n}=e;return s()(t.getEventsAPIPayload(n),["field","sort","per_page"])}function _(e){let{start:t,end:n,statsPeriod:r}=e;return l.ZP.fromSavedQuery({id:void 0,version:2,name:"",fields:["transaction.duration"],projects:[u.mP],query:"",environment:[],start:t,end:n,range:r??void 0})}function h(e){const t=d(e)?e.startTimestamp:o()(e.dateReceived?e.dateReceived:e.dateCreated).valueOf()/1e3,n=d(e)?e.endTimestamp:t;return(0,i.TC)({start:t,end:n})}function E(e,t,n){let r=n;const s=[e];for(;s.length;){const e=s.pop();for(const t of e.children)s.push(t);r=t(r,e)}return r}function R(e,t){return E(e,((e,n)=>(t(n)&&e.push(n),e)),[])}function S(e){return Boolean(e.event_id)}function P(e){return Boolean(e.event_id)}},"./app/utils/platform.tsx":(e,t,n)=>{n.d(t,{an:()=>o,fR:()=>s,gx:()=>a}),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("./app/data/platformCategories.tsx");function s(e){return e?[...r.tQ].includes(e)?r.Wn.FRONTEND:[...r.y3].includes(e)?r.Wn.BACKEND:[...r.Wp].includes(e)?r.Wn.SERVERLESS:[...r.ai].includes(e)?r.Wn.MOBILE:[...r.gv].includes(e)?r.Wn.DESKTOP:r.Wn.OTHER:r.Wn.OTHER}function a(e){switch(e){case"cocoa":case"objc":case"native":case"swift":case"c":return!0;default:return!1}}function o(e){return!!e&&[...r.ai].includes(e)}},"./app/utils/useRouter.tsx":(e,t,n)=>{n.d(t,{Z:()=>s});var r=n("./app/utils/useRouteContext.tsx");const s=function(){return(0,r.s)().router}},"./app/views/dashboards/types.tsx":(e,t,n)=>{n.d(t,{$V:()=>s,EN:()=>c,FO:()=>a,ZU:()=>r,l9:()=>o,n3:()=>u,qA:()=>i});const r=30,s=5;let a,o,i,u,c;!function(e){e.AREA="area",e.BAR="bar",e.LINE="line",e.TABLE="table",e.WORLD_MAP="world_map",e.BIG_NUMBER="big_number",e.TOP_N="top_n"}(a||(a={})),function(e){e.DISCOVER="discover",e.ISSUE="issue",e.RELEASE="metrics"}(o||(o={})),function(e){e.RELEASE="release"}(i||(i={})),function(e){e.VIEW="view",e.EDIT="edit",e.CREATE="create",e.PENDING_DELETE="pending_delete",e.PREVIEW="preview"}(u||(u={})),function(e){e.DISCOVERV2="discoverv2",e.DASHBOARDS="dashboards",e.LIBRARY="library",e.ISSUE_DETAILS="issueDetail"}(c||(c={}))},"./app/views/discover/data.tsx":(e,t,n)=>{n.d(t,{He:()=>o,Qu:()=>a,eP:()=>s,gh:()=>i});var r=n("./app/locale.tsx");const s={id:void 0,name:(0,r.t)("All Events"),query:"",projects:[],fields:["title","event.type","project","user.display","timestamp"],orderby:"-timestamp",version:2,range:"24h"},a=[{id:void 0,name:(0,r.t)("Transactions by Volume"),fields:["transaction","project","count()","avg(transaction.duration)","p75()","p95()"],orderby:"-count",query:"event.type:transaction",projects:[],version:2,range:"24h"}],o=[{id:void 0,name:(0,r.t)("Web Vitals"),fields:["transaction","epm()","p75(measurements.fp)","p75(measurements.fcp)","p75(measurements.lcp)","p75(measurements.fid)","p75(measurements.cls)"],orderby:"-epm",query:"event.type:transaction transaction.op:pageload",projects:[],version:2,range:"24h",yAxis:["epm()"]}],i=[s,{id:void 0,name:(0,r.t)("Errors by Title"),fields:["title","count()","count_unique(user)","project"],orderby:"-count",query:"event.type:error",projects:[],version:2,range:"24h",display:"top5"},{id:void 0,name:(0,r.t)("Errors by URL"),fields:["url","count()","count_unique(issue)"],orderby:"-count",query:"event.type:error has:url",projects:[],version:2,range:"24h",display:"top5"}]},"./app/views/discover/savedQuery/utils.tsx":(e,t,n)=>{if(n.d(t,{MF:()=>g,O$:()=>p,RF:()=>v,Uc:()=>m,b2:()=>d,pb:()=>f,zz:()=>h}),"app"==n.j)var r=n("./app/actionCreators/discoverHomepageQueries.tsx");var s=n("./app/actionCreators/discoverSavedQueries.tsx"),a=n("./app/actionCreators/indicator.tsx"),o=n("./app/locale.tsx"),i=n("./app/utils/analytics.tsx"),u=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),c=n("./app/utils/discover/types.tsx"),l=n("./app/views/dashboards/types.tsx");function d(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const c=n.toNewQuery();c.yAxis=r,(0,u.Z)(y(i,"request"),{organization:t,..._(c)});const l=(0,s.GH)(e,t.slug,c);return l.then((e=>((0,a.S9)((0,o.t)("Query saved")),(0,u.Z)(y(i,"success"),{organization:t,..._(c)}),e))).catch((e=>{(0,a.Iw)((0,o.t)("Query not saved")),(0,u.Z)(y(i,"failed"),{organization:t,..._(c),error:e&&e.message||`Could not save a ${i?"new":"existing"} query`})})),l}function p(e,t,n,r){const i=n.toNewQuery();if(i.yAxis=r,!n.name)return(0,a.Iw)((0,o.t)("Please name your query")),Promise.reject();(0,u.Z)("discover_v2.update_query_request",{organization:t,..._(i)});const c=(0,s.M6)(e,t.slug,i);return c.then((e=>((0,a.S9)((0,o.t)("Query updated")),(0,u.Z)("discover_v2.update_query_success",{organization:t,..._(i)}),e))).catch((e=>{(0,a.Iw)((0,o.t)("Query not updated")),(0,u.Z)("discover_v2.update_query_failed",{organization:t,..._(i),error:e&&e.message||"Failed to update a query"})})),c}function f(e,t,n){const r=n.toNewQuery();(0,i.ec)({eventKey:"discover_v2.update_query_name_request",eventName:"Discoverv2: Request to update a saved query's name",organization_id:parseInt(t.id,10),..._(r)});const u=(0,s.M6)(e,t.slug,r);return u.then((e=>{(0,a.S9)((0,o.t)("Query name saved")),(0,i.ec)({eventKey:"discover_v2.update_query_name_success",eventName:"Discoverv2: Successfully updated a saved query's name",organization_id:parseInt(t.id,10),..._(r)})})).catch((e=>{(0,a.Iw)((0,o.t)("Query name not saved")),(0,i.ec)({eventKey:"discover_v2.update_query_failed",eventName:"Discoverv2: Failed to update a saved query's name",organization_id:parseInt(t.id,10),..._(r),error:e&&e.message||"Failed to update a query name"})})),u}function m(e,t,n){(0,i.ec)({eventKey:"discover_v2.delete_query_request",eventName:"Discoverv2: Request to delete a saved query",organization_id:parseInt(t.id,10),..._(n.toNewQuery())});const r=(0,s.qF)(e,t.slug,n.id);return r.then((()=>{(0,a.S9)((0,o.t)("Query deleted")),(0,i.ec)({eventKey:"discover_v2.delete_query_success",eventName:"Discoverv2: Successfully deleted a saved query",organization_id:parseInt(t.id,10),..._(n.toNewQuery())})})).catch((e=>{(0,a.Iw)((0,o.t)("Query not deleted")),(0,i.ec)({eventKey:"discover_v2.delete_query_failed",eventName:"Discoverv2: Failed to delete a saved query",organization_id:parseInt(t.id,10),..._(n.toNewQuery()),error:e&&e.message||"Failed to delete query"})})),r}function v(e,t,n){return(0,r.YC)(e,t.slug,n).then((e=>((0,a.S9)((0,o.t)("Saved as Discover default")),e))).catch((()=>{(0,a.Iw)((0,o.t)("Unable to set query as Discover default"))}))}function g(e,t){return(0,r.uk)(e,t.slug).then((()=>{(0,a.S9)((0,o.t)("Successfully removed Discover default"))})).catch((()=>{(0,a.Iw)((0,o.t)("Unable to remove Discover default"))}))}function y(e,t){return e?"discover_v2.save_new_query_"+t:"discover_v2.save_existing_query_"+t}function _(e){const{projects:t,fields:n,query:r}=e;return{projects:t,fields:n,query:r}}function h(e){switch(e){case c.DC.BAR:return l.FO.BAR;case c.DC.WORLDMAP:return l.FO.WORLD_MAP;case c.DC.TOP5:return l.FO.TOP_N;default:return l.FO.LINE}}},"./app/views/performance/trends/types.tsx":(e,t,n)=>{let r,s,a;n.d(t,{A2:()=>a,ER:()=>r,Z2:()=>s}),function(e){e.IMPROVED="improved",e.REGRESSION="regression"}(r||(r={})),function(e){e.P50="p50",e.P75="p75",e.P95="p95",e.P99="p99",e.AVG="avg"}(s||(s={})),function(e){e.DURATION="transaction.duration",e.LCP="measurements.lcp",e.FCP="measurements.fcp",e.FID="measurements.fid",e.CLS="measurements.cls",e.SPANS_DB="spans.db",e.SPANS_HTTP="spans.http",e.SPANS_BROWSER="spans.browser",e.SPANS_RESOURCE="spans.resource"}(a||(a={}))},"./app/views/performance/trends/utils.tsx":(e,t,n)=>{n.d(t,{CE:()=>P,HF:()=>j,IO:()=>b,Kt:()=>x,P4:()=>q,RP:()=>N,T1:()=>g,Ws:()=>S,_1:()=>m,_H:()=>A,bg:()=>v,cs:()=>y,ed:()=>T,es:()=>_,iF:()=>O,j_:()=>I,kM:()=>D,vq:()=>L,vt:()=>R,wx:()=>w}),n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/core-js/modules/es.array.push.js");var r=n("../node_modules/downsample/methods/ASAP.js"),s=n("../node_modules/moment/moment.js"),a=n.n(s),o=n("./app/components/charts/utils.tsx"),i=n("./app/locale.tsx"),u=n("./app/utils/discover/fields.tsx"),c=n("./app/utils/queryString.tsx"),l=n("./app/utils/theme.tsx"),d=n("./app/utils/tokenizeSearch.tsx"),p=n("./app/views/performance/utils.tsx"),f=n("./app/views/performance/trends/types.tsx");const m="14d",v="15min",g=[{label:"p50",field:f.Z2.P50,alias:"percentile_range",legendLabel:"p50"},{label:"p75",field:f.Z2.P75,alias:"percentile_range",legendLabel:"p75"},{label:"p95",field:f.Z2.P95,alias:"percentile_range",legendLabel:"p95"},{label:"p99",field:f.Z2.P99,alias:"percentile_range",legendLabel:"p99"},{label:"average",field:f.Z2.AVG,alias:"avg_range",legendLabel:"average"}],y=[{label:"Duration",column:f.A2.DURATION},{label:"LCP",column:f.A2.LCP},{label:"FCP",column:f.A2.FCP},{label:"FID",column:f.A2.FID},{label:"CLS",column:f.A2.CLS},{label:"Spans (http)",column:f.A2.SPANS_HTTP},{label:"Spans (db)",column:f.A2.SPANS_DB},{label:"Spans (browser)",column:f.A2.SPANS_BROWSER},{label:"Spans (resource)",column:f.A2.SPANS_RESOURCE}],_={[f.ER.IMPROVED]:{lighter:l.ZP.green200,default:l.ZP.green300},[f.ER.REGRESSION]:{lighter:l.ZP.red200,default:l.ZP.red300}},h={[f.ER.IMPROVED]:"improvedSelected",[f.ER.REGRESSION]:"regressionSelected"},E={[f.ER.IMPROVED]:"improvedUnselectedSeries",[f.ER.REGRESSION]:"regressionUnselectedSeries"},R={[f.ER.IMPROVED]:"improvedCursor",[f.ER.REGRESSION]:"regressionCursor"};function S(){const e={};return Object.values(R).forEach((t=>e[t]=void 0)),e}function P(e,t){const n=t??(0,c.ro)(e?.query?.trendFunction);return g.find((e=>{let{field:t}=e;return t===n}))||g[0]}function b(e,t,n){const r=(0,c.ro)(e?.query?.trendParameter),s=y.find((e=>{let{label:t}=e;return t===r}));return s||function(e,t){return function(e){switch(e){case p.iy.FRONTEND:return{label:"LCP",column:f.A2.LCP};case p.iy.ANY:case p.iy.BACKEND:case p.iy.FRONTEND_OTHER:default:return{label:"Duration",column:f.A2.DURATION}}}((0,p.Bh)(e,t))}(t,n)}function T(e,t){return(0,u.sN)({kind:"function",function:[e,t,void 0,void 0]})}function x(e,t){return{fromSeconds:e/1e3,toSeconds:t/1e3,showDigits:e>1e3||t>1e3||e<10||t<10}}function A(e,t){if(e.project&&t)return t.find((t=>t.slug===e.project))?.id}function D(e,t,n,r,s){const a=P(t),i=b(t,r,e.project),u=[...s?[]:["transaction"],"project"].map((e=>({field:e}))),l={field:"trend_percentage()",kind:"asc"};e.trendType=n,n===f.ER.REGRESSION&&(l.kind="desc"),a&&i&&(e.trendFunction=T(a.field,i.column)),e.query=function(e){const t=new d.MY(e);return t.hasFilter("count_percentage()")||t.addFilterValues("count_percentage()",[">0.25","<4"]),t.hasFilter("trend_percentage()")||t.addFilterValues("trend_percentage()",[">0%"]),t.hasFilter("confidence()")||t.addFilterValues("confidence()",[">6"]),t.formatString()}(e.query),e.interval=function(e,t){const n=(0,c.ro)(e?.query?.interval),{start:r,end:s,statsPeriod:a}=t,i={start:r||null,end:s||null,period:a},u=(0,o.ZS)(i,"high");return n||u}(t,e),e.sorts=[l],e.fields=u}function O(e,t){const{query:n}=t,r=n.start&&n.end;return n.statsPeriod||r||(e.statsPeriod=m),e}function w(e,t){const n=Math.abs(e);return{seconds:n/1e3,fixedDigits:n>1e3||n<10?1:0,changeLabel:t===f.ER.REGRESSION?(0,i.t)("slower"):(0,i.t)("faster")}}function N(e){const t=a()();return e.map((e=>({...e,received_at:t,transaction:e.transaction})))}function I(e){return h[e]}function q(e){return E[e]}const C=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return(0,r.Cl)(e,t)},j=e=>["p50","p75"].find((t=>e.includes(t)));function L(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;if(!e)return{maxValue:r,minValue:n,smoothedResults:void 0};const s=[];for(const a of e){const e=a.data,o=[],i=C(e.map((e=>{let{name:t,value:n}=e;return[Number(t),n]})));for(let e=0;e<i.length;e++){const t=i[e],s=t.y;if(o.push({name:t.x,value:s}),!isNaN(s)){const e=Math.round(s);n=Math.min(e,n),r=Math.max(e,r)}}s.push({seriesName:t||a.seriesName||"Current",data:o,lineStyle:a.lineStyle,color:a.color})}return{minValue:n,maxValue:r,smoothedResults:s}}},"./app/views/performance/utils.tsx":(e,t,n)=>{n.d(t,{Bh:()=>x,C$:()=>A,Ik:()=>D,JY:()=>F,Ov:()=>I,Pv:()=>E,R8:()=>q,U7:()=>_,Ws:()=>N,YL:()=>k,al:()=>C,bY:()=>M,cY:()=>z,de:()=>w,iL:()=>O,iy:()=>R,m_:()=>j,n4:()=>L,og:()=>h,p9:()=>V,rL:()=>U,uq:()=>S}),n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/core-js/modules/es.array.push.js");var r=n("../node_modules/react-router/es/index.js"),s=n("./app/constants/pageFilters.tsx"),a=n("./app/data/platformCategories.tsx"),o=n("./app/locale.tsx"),i=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),u=n("./app/utils/dates.tsx"),c=n("./app/utils/discover/eventView.tsx"),l=n("./app/utils/discover/fields.tsx"),d=n("./app/utils/formatters.tsx");if("app"==n.j)var p=n("./app/utils/getCurrentSentryReactTransaction.tsx");var f=n("./app/utils/queryString.tsx");if("app"==n.j)var m=n("./app/utils/toArray.tsx");var v=n("./app/utils/tokenizeSearch.tsx"),g=n("./app/utils/withDomainRequired.tsx"),y=n("./app/views/performance/trends/utils.tsx");const _="app"==n.j?["environment","project","query","start","end","statsPeriod"]:null,h="<< unparameterized >>";let E,R;function S(e){const t=e.source===E.DISCOVER?["transaction","project","transaction.source","epm()"]:["transaction","project","transaction.source","epm()","p50()","p95()"],n={id:void 0,name:e.source===E.DISCOVER?(0,o.t)("Unparameterized Transactions"):(0,o.t)("Performance - Unparameterized Transactions"),query:'event.type:transaction transaction.source:"url"',projects:[],fields:t,version:2},r=c.ZP.fromNewQueryWithLocation(n,e.location).withSorts([{field:"epm",kind:"desc"}]).getResultsViewUrlTarget(e.organization.slug);return r.query.showUnparameterizedBanner="true",r}!function(e){e.PERFORMANCE="performance",e.DISCOVER="discover"}(E||(E={})),function(e){e.ANY="any",e.FRONTEND="frontend",e.BACKEND="backend",e.FRONTEND_OTHER="frontend_other",e.MOBILE="mobile"}(R||(R={}));const P=[...a.tQ],b=a.y3.filter((e=>"native"!==e)),T=[...a.ai];function x(e,t){if(0===t.length||t[0]===s.mP)return R.ANY;const n=e.filter((e=>t.includes(parseInt(`${e.id}`,10))));return 0===n.length||n.some((e=>!e.platform))?R.ANY:n.every((e=>P.includes(e.platform)))?R.FRONTEND:n.every((e=>b.includes(e.platform)))?R.BACKEND:n.every((e=>T.includes(e.platform)))?R.MOBILE:R.ANY}function A(e,t){const n=x(e,t.project);return n===R.FRONTEND&&new v.MY(t.query).getFilterValues("!transaction.op").some((e=>"pageload"===e))?R.FRONTEND_OTHER:n}function D(e,t){return A(t,e)===R.FRONTEND}function O(e,t){return A(t,e)===R.FRONTEND||A(t,e)===R.FRONTEND_OTHER}function w(e){return`/organizations/${e.slug}/performance/`}function N(e){return`/organizations/${e.slug}/performance/trends/`}function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,f.ro)(e.query.query,t).trim()}function q(e){let{location:t,organization:n,projectPlatforms:s}=e;(0,i.Z)("performance_views.change_view",{organization:n,view_name:"TRENDS",project_platforms:s});const a=C({location:t,organization:n});r.browserHistory.push((0,g.D)(a))}function C(e){let{location:t,organization:n,initialConditions:r,additionalQuery:s}=e;const a={...t.query,...s},o=(0,f.ro)(t.query.query,""),i=new v.MY(o),u=r??new v.MY([]);return i.hasFilter("tpm()")?u.setFilterValues("tpm()",i.getFilterValues("tpm()")):u.setFilterValues("tpm()",[">0.01"]),i.hasFilter("transaction.duration")?u.setFilterValues("transaction.duration",i.getFilterValues("transaction.duration")):u.setFilterValues("transaction.duration",[">0",`<${y.bg}`]),a.query=u.formatString(),{pathname:N(n),query:{...a}}}function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeTagKeys:new Set(["event.type","project"])};return e.getFilterKeys().forEach((n=>{const r=n.startsWith("!")?n.substr(1):n;(r.match(/\w+\(.*\)/)||l.J8.includes(r)||t.excludeTagKeys.has(r))&&e.removeFilter(n)})),e}function L(e){const t=(0,p.Z)(),n=(0,u.Ri)(e.datetime.period,e.datetime.start,e.datetime.end),r=Math.floor(86400*n);t?.setTag("query.period",r.toString());let s=">30d";r<=86400?s="<=1d":r<=604800?s="<=7d":r<=1209600?s="<=14d":r<=2592e3&&(s="<=30d"),t?.setTag("query.period.grouped",s)}function F(e){const{transaction:t}=e.query;return(0,f.ro)(t)}function k(e){return(0,d.g9)(e/1e3,e>1e3?2:0,!0)}function U(e){return!e.project.length||1===e.project.length&&e.project[0]===s.mP}function M(e,t){const n=e.query.project,r=new Set((0,m.Z)(n));return t.reduce(((e,t)=>(r.has(t.id)&&e.push(t.platform??"undefined"),e)),[])}function V(e,t){return M(e,t).join(", ")}function z(e,t){const n=e?.project||void 0;if(void 0!==typeof n)return t.find((e=>e.slug===n))?.id}}}]);
//# sourceMappingURL=../sourcemaps/app_actionCreators_onboardingTasks_tsx-app_components_events_interfaces_utils_tsx-app_utils_d-da55d9.535bbee87ca80194045fd968f5562faf.js.map