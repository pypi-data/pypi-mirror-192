"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_alerts_list_rules_index_tsx"],{"./app/components/alertBadge.tsx":(e,t,s)=>{s.d(t,{Z:()=>p});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=s("./app/icons/index.tsx"),i=s("./app/locale.tsx"),n=s("./app/styles/space.tsx"),o=s("./app/views/alerts/types.tsx"),l=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{status:t,hideText:s=!1,isIssue:r}=e,n=(0,i.t)("Resolved"),d=a.DL,p="successText";return r?(n=(0,i.t)("Issue"),d=a.XI,p="subText"):t===o.vt.CRITICAL?(n=(0,i.t)("Critical"),d=a.zC,p="errorText"):t===o.vt.WARNING&&(n=(0,i.t)("Warning"),d=a.qV,p="warningText"),(0,l.BX)(c,{"data-test-id":"alert-badge",children:[(0,l.BX)(u,{role:"img","aria-label":s?n:void 0,color:p,icon:d,children:[(0,l.tZ)(m,{color:p}),(0,l.tZ)(d,{color:"white"})]}),!s&&(0,l.tZ)(h,{color:p,children:n})]})}d.displayName="AlertBadge";const p=d,c=(0,r.Z)("div",{target:"eyo3n0p3"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),u=(0,r.Z)("div",{target:"eyo3n0p2"})("width:36px;height:36px;position:relative;svg:last-child{width:",(e=>e.icon===a.XI?"13px":"16px"),";z-index:2;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;}"),m=(0,r.Z)(a.Sq,{target:"eyo3n0p1"})({name:"bgbjt4",styles:"width:36px;height:36px"}),h=(0,r.Z)("div",{target:"eyo3n0p0"})("margin-left:",(0,n.D)(1),";")},"./app/components/createAlertButton.tsx":(e,t,s)=>{s.d(t,{K:()=>g,Z:()=>Z});var r=s("./app/actionCreators/indicator.tsx"),a=s("./app/actionCreators/navigation.tsx"),i=s("./app/components/acl/access.tsx"),n=s("./app/components/assistant/guideAnchor.tsx"),o=s("./app/components/button.tsx"),l=s("./app/components/links/link.tsx"),d=s("./app/icons/index.tsx"),p=s("./app/locale.tsx"),c=s("./app/utils/useApi.tsx"),u=s("./app/utils/useRouter.tsx"),m=s("./app/views/alerts/wizard/options.tsx"),h=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function g(e){let{projects:t,eventView:s,organization:r,referrer:a,onClick:i,alertType:n,disableMetricDataset:o,...l}=e;const d=t.find((e=>e.id===`${s.project[0]}`)),c=s.generateQueryStringObject();c.query?.includes(`project:${d?.slug}`)&&(c.query=c.query.replace(`project:${d?.slug}`,""));const u=n?m.FZ[n]:m.F4,g={pathname:`/organizations/${r.slug}/alerts/new/metric/`,query:{...c,createFromDiscover:!0,disableMetricDataset:o,referrer:a,...u,project:d?.slug,aggregate:c.yAxis??u.aggregate}};return(0,h.tZ)(x,{organization:r,onClick:()=>{i?.()},to:g,"aria-label":(0,p.t)("Create Alert"),...l})}g.displayName="CreateAlertFromViewButton";const x=e=>{let{organization:t,projectSlug:s,iconProps:m,referrer:g,hideIcon:x,showPermissionGuide:Z,alertOption:y,onEnter:v,...w}=e;const b=(0,u.Z)(),f=(0,c.Z)(),j=e=>{const s=new URLSearchParams;return g&&s.append("referrer",g),":projectId"!==e&&s.append("project",e),y&&s.append("alert_option",y),`/organizations/${t.slug}/alerts/wizard/?${s.toString()}`};function C(e){e.preventDefault(),v?.(),(0,a.T)(j(":projectId"),b)}async function A(){const e=`/organizations/${t.slug}/`;(0,r.E3)();try{await f.requestPromise(e,{method:"PUT",data:{alertsMemberWrite:!0}}),(0,r.S9)((0,p.t)("Successfully updated organization settings"))}catch(e){(0,r.Iw)((0,p.t)("Unable to update organization settings"))}}const z=(0,p._N)("Ask your organization owner or manager to [settingsLink:enable alerts access] for you.",{settingsLink:(0,h.tZ)(l.Z,{to:`/settings/${t.slug}`})}),I=e=>(0,h.tZ)(o.zx,{disabled:!e,title:e?void 0:z,icon:!x&&(0,h.tZ)(d.vr,{...m}),to:s?j(s):void 0,tooltipProps:{isHoverable:!0,position:"top",overlayStyle:{maxWidth:"270px"}},onClick:s?v:C,...w,children:w.children??(0,p.t)("Create Alert")}),T=!t.alertsMemberWrite&&!!Z;return(0,h.tZ)(i.Z,{organization:t,access:["alerts:write"],children:e=>{let{hasAccess:s}=e;return T?(0,h.tZ)(i.Z,{organization:t,access:["org:write"],children:e=>{let{hasAccess:t}=e;return(0,h.tZ)(n.Z,{target:t?"alerts_write_owner":"alerts_write_member",onFinish:t?A:void 0,children:I(s)})}}):I(s)}})};x.displayName="CreateAlertButton";const Z=x},"./app/views/alerts/filterBar.tsx":(e,t,s)=>{s.d(t,{Z:()=>h});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=s("./app/components/buttonBar.tsx"),i=s("./app/components/compactSelect/index.tsx"),n=s("./app/components/projectPageFilter.tsx"),o=s("./app/components/searchBar.tsx"),l=s("./app/locale.tsx"),d=s("./app/styles/space.tsx"),p=s("./app/views/alerts/list/rules/teamFilter.tsx"),c=s("./app/views/alerts/utils/index.tsx"),u=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function m(e){let{location:t,onChangeSearch:s,onChangeFilter:r,onChangeStatus:a,hasStatusFilters:d}=e;const m=(0,c.LI)(t.query.team),h=(0,c.g2)(t.query.status);return(0,u.BX)(g,{children:[(0,u.BX)(x,{gap:1.5,children:[(0,u.tZ)(p.Z,{selectedTeams:m,handleChangeFilter:r}),(0,u.tZ)(n.Z,{}),d&&a&&(0,u.tZ)(i.Z,{triggerProps:{prefix:(0,l.t)("Status")},options:[{value:"all",label:(0,l.t)("All")},{value:"open",label:(0,l.t)("Active")},{value:"closed",label:(0,l.t)("Inactive")}],value:h,onChange:e=>{let{value:t}=e;return a(t)}})]}),(0,u.tZ)(o.Z,{placeholder:(0,l.t)("Search by name"),query:t.query?.name,onSearch:s})]})}m.displayName="FilterBar";const h=m,g=(0,r.Z)("div",{target:"etxqkk21"})("display:grid;gap:",(0,d.D)(1.5),";margin-bottom:",(0,d.D)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:min-content 1fr;}"),x=(0,r.Z)(a.ZP,{target:"etxqkk20"})("@media (max-width: ",(e=>e.theme.breakpoints.small),"){display:flex;align-items:flex-start;gap:",(0,d.D)(1.5),";}@media (min-width: ",(e=>e.theme.breakpoints.small),"){display:grid;grid-auto-columns:minmax(auto, 300px);}")},"./app/views/alerts/list/header.tsx":(e,t,s)=>{s.d(t,{Z:()=>Z});var r=s("./app/actionCreators/navigation.tsx"),a=s("./app/components/button.tsx"),i=s("./app/components/buttonBar.tsx"),n=s("./app/components/createAlertButton.tsx"),o=s("./app/components/globalSelectionLink.tsx"),l=s("./app/components/layouts/thirds.tsx"),d=s("./app/components/pageHeadingQuestionTooltip.tsx"),p=s("./app/icons/index.tsx"),c=s("./app/locale.tsx"),u=s("./app/stores/projectsStore.tsx"),m=s("./app/utils/useOrganization.tsx"),h=s("./app/utils/usePageFilters.tsx"),g=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const x=e=>{let{router:t,activeTab:s}=e;const x=(0,m.Z)(),{selection:Z}=(0,h.Z)(),y=(0,g.tZ)("li",{className:"rules"===s?"active":"",children:(0,g.tZ)(o.Z,{to:`/organizations/${x.slug}/alerts/rules/`,children:(0,c.t)("Alert Rules")})});return(0,g.BX)(l.h4,{children:[(0,g.tZ)(l.oB,{children:(0,g.BX)(l.Dx,{children:[(0,c.t)("Alerts"),(0,g.tZ)(d.u,{docsUrl:"https://docs.sentry.io/product/alerts/",title:(0,c.t)("Real-time visibility into problems with your code and the impact on your users, along with a view of your existing alert rules, their status, project, team, and creation date.")})]})}),(0,g.tZ)(l.kP,{children:(0,g.BX)(i.ZP,{gap:1,children:[(0,g.tZ)(n.Z,{organization:x,iconProps:{size:"sm"},size:"sm",priority:"primary",referrer:"alert_stream",showPermissionGuide:!0,projectSlug:1===Z.projects.length?u.Z.getById(`${Z.projects[0]}`)?.slug:void 0,children:(0,c.t)("Create Alert")}),(0,g.tZ)(a.zx,{size:"sm",onClick:e=>{e.preventDefault(),(0,r.T)(`/settings/${x.slug}/projects/:projectId/alerts/`,t)},href:"#",icon:(0,g.tZ)(p.iC,{size:"sm"}),"aria-label":(0,c.t)("Settings")})]})}),(0,g.BX)(l.mL,{underlined:!0,children:[y,(0,g.tZ)("li",{className:"stream"===s?"active":"",children:(0,g.tZ)(o.Z,{to:`/organizations/${x.slug}/alerts/`,children:(0,c.t)("History")})})]})]})};x.displayName="AlertHeader";const Z=x},"./app/views/alerts/list/rules/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>me});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(s("../node_modules/core-js/modules/es.array.push.js"),s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),n=s("./app/actionCreators/indicator.tsx"),o=s("./app/components/asyncComponent.tsx"),l=s("./app/components/layouts/thirds.tsx"),d=s("./app/components/links/link.tsx"),p=s("./app/components/organizations/pageFilters/container.tsx"),c=s("./app/components/pagination.tsx"),u=s("./app/components/panels/index.tsx"),m=s("./app/components/sentryDocumentTitle.tsx"),h=s("./app/icons/index.tsx"),g=s("./app/locale.tsx"),x=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),Z=s("./app/utils/projects.tsx"),y=s("./app/utils/teams.tsx"),v=s("./app/utils/withPageFilters.tsx"),w=s("./app/views/alerts/filterBar.tsx"),b=s("./app/views/alerts/types.tsx"),f=s("./app/views/alerts/utils/index.tsx"),j=s("./app/views/alerts/list/header.tsx"),C=s("../node_modules/lodash/memoize.js"),A=s.n(C),z=s("./app/components/acl/access.tsx"),I=s("./app/components/alertBadge.tsx"),T=s("./app/components/avatar/actorAvatar.tsx"),B=s("./app/components/avatar/teamAvatar.tsx"),k=s("./app/components/confirm.tsx"),S=s("./app/components/dropdownAutoComplete/index.tsx"),$=s("./app/components/dropdownBubble.tsx"),_=s("./app/components/dropdownMenu/index.tsx"),q=s("./app/components/errorBoundary.tsx"),L=s("./app/components/highlight.tsx"),D=s("./app/components/idBadge/index.tsx"),R=s("./app/components/loadingIndicator.tsx"),N=s("./app/components/textOverflow.tsx"),X=s("./app/components/timeSince.tsx"),E=s("./app/components/tooltip.tsx"),P=s("./app/styles/space.tsx"),F=s("./app/views/alerts/rules/metric/constants.tsx"),O=s("./app/views/alerts/rules/metric/types.tsx"),G=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const U=A()(((e,t)=>t.find((t=>t.slug===e))));function M(e){let{rule:t,projectsLoaded:s,projects:r,orgId:a,onDelete:n,onOwnerChange:o,userTeams:l,hasEditAccess:p}=e;const[c,u]=(0,i.useState)(""),m=void 0!==t.latestIncident?.status&&[b.vt.CRITICAL,b.vt.WARNING].includes(t.latestIncident.status),x=t.projects[0],Z=`/organizations/${a}/alerts/${(0,f.Gm)(t)?"rules":"metric-rules"}/${x}/${t.id}/`,y={pathname:`/organizations/${a}/alerts/new/${t.type===b.XO.METRIC?"metric":"issue"}/`,query:{project:x,duplicateRuleId:t.id,createFromDuplicate:!0,referrer:"alert_stream"}},v=t.owner?.split(":")[1],w=v?{type:"team",id:v,name:""}:null,j=!v||l.has(v),C={[b.vt.CRITICAL]:(0,g.t)("Critical"),[b.vt.WARNING]:(0,g.t)("Warning"),[b.vt.CLOSED]:(0,g.t)("Resolved"),[b.vt.OPENED]:(0,g.t)("Resolved")},A=[{key:"edit",label:(0,g.t)("Edit"),to:Z},{key:"duplicate",label:(0,g.t)("Duplicate"),to:y},{key:"delete",label:(0,g.t)("Delete"),priority:"danger",onAction:()=>{(0,k._)({onConfirm:()=>n(x,t),header:(0,g.t)("Delete Alert Rule?"),message:(0,g._N)("Are you sure you want to delete [name]? You won't be able to view the history of this alert once it's deleted.",{name:t.name}),confirmText:(0,g.t)("Delete Rule"),priority:"danger"})}}],$={value:"",label:()=>(0,G.BX)(le,{children:[(0,G.tZ)(ne,{size:"md"}),(0,g.t)("Unassigned")]}),searchKey:"unassigned",actor:"",disabled:!1},D=r.filter((e=>e.slug===x))[0].teams?.filter((e=>l.has(e.id))),N=D?.map(((e,t)=>({value:e.id,searchKey:e.slug,label:s=>{let{inputValue:r}=s;return(0,G.BX)(le,{"data-test-id":"assignee-option",children:[(0,G.tZ)(oe,{children:(0,G.tZ)(B.Z,{team:e,size:24})}),(0,G.tZ)(de,{children:(0,G.tZ)(L.Z,{text:r,children:`#${e.slug}`})})]},t)}}))).concat($),P=c?.split(":")[1],M=D?.find((e=>e.id===P)),pe=c&&{type:"team",id:P,name:""},ce=pe?(0,G.tZ)(T.Z,{actor:pe,className:"avatar",size:24,tooltip:(0,G.tZ)(ie,{children:(0,g._N)("Assigned to [name]",{name:M&&`#${M.name}`})})}):(0,G.tZ)(E.u,{isHoverable:!0,skipWrapper:!0,title:(0,g.t)("Unassigned"),children:(0,G.tZ)(ne,{size:"md",color:"gray400"})});return(0,G.BX)(q.Z,{children:[(0,G.BX)(H,{isIssueAlert:(0,f.Gm)(t),children:[(0,G.tZ)(W,{children:(0,G.tZ)(E.u,{title:(0,f.Gm)(t)?(0,g.t)("Issue Alert"):(0,g._N)("Metric Alert Status: [status]",{status:C[t?.latestIncident?.status??b.vt.CLOSED]}),children:(0,G.tZ)(I.Z,{status:t?.latestIncident?.status,isIssue:(0,f.Gm)(t),hideText:!0})})}),(0,G.BX)(V,{children:[(0,G.tZ)(K,{children:(0,G.tZ)(d.Z,{to:(0,f.Gm)(t)?`/organizations/${a}/alerts/rules/${t.projects[0]}/${t.id}/details/`:`/organizations/${a}/alerts/rules/details/${t.id}/`,children:t.name})}),(0,G.tZ)(Q,{children:(0,f.Gm)(t)?t.lastTriggered?(0,G.BX)("div",{children:[(0,g.t)("Triggered "),(0,G.tZ)(X.Z,{date:t.lastTriggered})]}):(0,g.t)("Alert not triggered yet"):t.latestIncident?m?(0,G.BX)("div",{children:[(0,g.t)("Triggered "),(0,G.tZ)(X.Z,{date:t.latestIncident.dateCreated})]}):(0,G.BX)("div",{children:[(0,g.t)("Resolved "),(0,G.tZ)(X.Z,{date:t.latestIncident.dateClosed})]}):(0,g.t)("Alert not triggered yet")})]})]}),(0,G.tZ)(W,{children:function(){if((0,f.Gm)(t))return null;const e=t.triggers.find((e=>{let{label:t}=e;return t===O.F4.CRITICAL})),s=t.triggers.find((e=>{let{label:t}=e;return t===O.F4.WARNING})),r=t.resolveThreshold,a=m&&t.latestIncident?.status===b.vt.CRITICAL?e:s??e;let i,n="successText",o=m&&t.thresholdType===O.lT.ABOVE?(0,g.t)("Above"):(0,g.t)("Below");return m?(n=a?.label===O.F4.CRITICAL?"errorText":a?.label===O.F4.WARNING?"warningText":"successText",i=t.thresholdType===O.lT.ABOVE?"up":"down"):(i=t.thresholdType===O.lT.ABOVE?"down":"up",o=t.thresholdType===O.lT.ABOVE?(0,g.t)("Below"):(0,g.t)("Above")),(0,G.BX)(W,{children:[(0,G.tZ)(h.CC,{color:n,direction:i}),(0,G.BX)(ee,{children:[`${o} ${t.latestIncident||!t.latestIncident&&!r?a?.alertThreshold?.toLocaleString():r?.toLocaleString()}`,(0,F.Hq)(t.aggregate,t.comparisonDelta?O.t6.CHANGE:O.t6.COUNT)]})]})}()}),(0,G.tZ)(W,{children:(0,G.tZ)(Y,{children:(0,G.tZ)(J,{avatarSize:18,project:s?U(x,r):{slug:x}})})}),(0,G.tZ)(W,{children:w?(0,G.tZ)(T.Z,{actor:w,size:24}):(0,G.BX)(se,{children:[!s&&(0,G.tZ)(R.Z,{mini:!0,style:{height:"24px",margin:0,marginRight:11}}),s&&(0,G.tZ)(S.Z,{"data-test-id":"alert-row-assignee",maxHeight:400,onOpen:e=>{e?.stopPropagation()},items:N,alignMenu:"right",onSelect:function(e){let{value:s}=e;const r=s&&`team:${s}`;u(r),o(x,t,r)},itemSize:"small",searchPlaceholder:(0,g.t)("Filter teams"),disableLabelPadding:!0,emptyHidesInput:!0,disabled:!p,children:e=>{let{getActorProps:t,isOpen:s}=e;return(0,G.BX)(re,{...t({}),children:[ce,p&&(0,G.tZ)(ae,{direction:s?"up":"down",size:"xs"})]})}})]})}),(0,G.tZ)(te,{children:(0,G.tZ)(z.Z,{access:["alerts:write"],children:e=>{let{hasAccess:t}=e;return(0,G.tZ)(_.h,{items:A,position:"bottom-end",triggerProps:{"aria-label":(0,g.t)("Show more"),size:"xs",icon:(0,G.tZ)(h.YR,{size:"xs"}),showChevron:!1},disabledKeys:t&&j?[]:["delete"]})}})})]})}M.displayName="RuleListRow";const W=(0,a.Z)("div",{target:"e14i7nou16"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),H=(0,a.Z)(W,{target:"e14i7nou15"})("position:relative;",(e=>e.isIssueAlert&&`padding: ${(0,P.D)(3)} ${(0,P.D)(2)}; line-height: 2.4;`),";"),V=(0,a.Z)("div",{target:"e14i7nou14"})((e=>e.theme.overflowEllipsis)," margin-left:",(0,P.D)(2),";line-height:1.35;"),K=(0,a.Z)("div",{target:"e14i7nou13"})((e=>e.theme.overflowEllipsis)," font-size:",(e=>e.theme.fontSizeLarge),";@media (max-width: ",(e=>e.theme.breakpoints.xlarge),"){max-width:300px;}@media (max-width: ",(e=>e.theme.breakpoints.large),"){max-width:165px;}@media (max-width: ",(e=>e.theme.breakpoints.medium),"){max-width:100px;}"),Q=(0,a.Z)("div",{target:"e14i7nou12"})("color:",(e=>e.theme.gray300),";"),Y=(0,a.Z)("div",{target:"e14i7nou11"})({name:"1d3w5wq",styles:"width:100%"}),J=(0,a.Z)(D.Z,{target:"e14i7nou10"})({name:"ozd7xs",styles:"flex-shrink:0"}),ee=(0,a.Z)("div",{target:"e14i7nou9"})("margin-left:",(0,P.D)(1),";white-space:nowrap;font-variant-numeric:tabular-nums;"),te=(0,a.Z)(W,{target:"e14i7nou8"})("justify-content:center;padding:",(0,P.D)(1),";"),se=(0,a.Z)("div",{target:"e14i7nou7"})("display:flex;justify-content:flex-end;",$.Z,"{right:-14px;}"),re=(0,a.Z)("div",{target:"e14i7nou6"})({name:"1nfrdh1",styles:"display:flex;align-items:center;font-size:20px"}),ae=(0,a.Z)(h.g6,{target:"e14i7nou5"})("margin-left:",(0,P.D)(1),";"),ie=(0,a.Z)("div",{target:"e14i7nou4"})({name:"1flj9lk",styles:"text-align:left"}),ne=(0,a.Z)(h.qO,{target:"e14i7nou3"})({name:"2bhlo8",styles:"margin-right:2px"}),oe=(0,a.Z)("div",{target:"e14i7nou2"})({name:"ksp8pg",styles:"display:flex;align-items:center;justify-content:center;width:24px;height:24px;flex-shrink:0"}),le=(0,a.Z)("div",{target:"e14i7nou1"})({name:"na9qgn",styles:"display:flex;align-items:center;font-size:13px"}),de=(0,a.Z)(N.Z,{target:"e14i7nou0"})({name:"18jsklt",styles:"margin-left:6px"}),pe=M;class ce extends o.Z{constructor(){super(...arguments),(0,r.Z)(this,"handleChangeFilter",(e=>{const{router:t,location:s}=this.props,{cursor:r,page:a,...i}=s.query;t.push({pathname:s.pathname,query:{...i,team:e.length>0?e:""}})})),(0,r.Z)(this,"handleChangeSearch",(e=>{const{router:t,location:s}=this.props,{cursor:r,page:a,...i}=s.query;t.push({pathname:s.pathname,query:{...i,name:e}})})),(0,r.Z)(this,"handleOwnerChange",((e,t,s)=>{const{organization:r}=this.props,a="alert_rule"===t.type?"alert-rules":"rules",i=`/projects/${r.slug}/${e}/${a}/${t.id}/`,o={...t,owner:s};this.api.request(i,{method:"PUT",data:o,success:()=>{(0,n.Hz)((0,g.t)("Updated alert rule"),"success")},error:()=>{(0,n.Hz)((0,g.t)("Unable to save change"),"error")}})})),(0,r.Z)(this,"handleDeleteRule",(async(e,t)=>{const{organization:s}=this.props,r=(0,f.Gm)(t)?"rules":"alert-rules";try{await this.api.requestPromise(`/projects/${s.slug}/${e}/${r}/${t.id}/`,{method:"DELETE"}),this.reloadData()}catch(e){(0,n.Iw)((0,g.t)("Error deleting rule"))}}))}getEndpoints(){const{organization:e,location:t}=this.props,{query:s}=t;return s.expand=["latestIncident","lastTriggered"],s.team=(0,f.LI)(s.team),s.sort||(s.sort=["incident_status","date_triggered"]),[["ruleList",`/organizations/${e.slug}/combined-rules/`,{query:s}]]}get projectsFromResults(){const e=this.state.ruleList??[];return[...new Set(e.map((e=>{let{projects:t}=e;return t})).flat())]}renderLoading(){return this.renderBody()}renderList(){const{location:e,organization:t,router:s}=this.props,{loading:r,ruleList:a=[],ruleListPageLinks:i}=this.state,{query:n}=e,o=t.access.includes("alerts:write"),d={asc:"1"===n.asc,field:n.sort||"date_added"},{cursor:p,page:u,...m}=n,x=d.field.includes("incident_status")||d.field.includes("date_triggered"),v=(0,G.tZ)(h.CC,{color:"gray300",size:"xs",direction:d.asc?"up":"down"});return(0,G.tZ)(l.uT,{children:(0,G.BX)(l.or,{fullWidth:!0,children:[(0,G.tZ)(w.Z,{location:e,onChangeFilter:this.handleChangeFilter,onChangeSearch:this.handleChangeSearch}),(0,G.tZ)(y.Z,{provideUserTeams:!0,children:s=>{let{initiallyLoaded:i,teams:n}=s;return(0,G.tZ)(ge,{headers:[(0,G.BX)(he,{role:"columnheader","aria-sort":"name"!==d.field?"none":d.asc?"ascending":"descending",to:{pathname:e.pathname,query:{...m,asc:"name"===d.field&&d.asc?void 0:"1",sort:"name"}},children:[(0,g.t)("Alert Rule")," ","name"===d.field&&v]},"name"),(0,G.BX)(he,{role:"columnheader","aria-sort":x?d.asc?"ascending":"descending":"none",to:{pathname:e.pathname,query:{...m,asc:x&&!d.asc?"1":void 0,sort:["incident_status","date_triggered"]}},children:[(0,g.t)("Status")," ",x&&v]},"status"),(0,g.t)("Project"),(0,g.t)("Team"),(0,g.t)("Actions")],isLoading:r||!i,isEmpty:0===a?.length,emptyMessage:(0,g.t)("No alert rules found for the current query."),children:(0,G.tZ)(Z.Z,{orgId:t.slug,slugs:this.projectsFromResults,children:e=>{let{initiallyLoaded:s,projects:r}=e;return a?.map((e=>(0,G.tZ)(pe,{projectsLoaded:s,projects:r,rule:e,orgId:t.slug,onOwnerChange:this.handleOwnerChange,onDelete:this.handleDeleteRule,userTeams:new Set(n.map((e=>e.id))),hasEditAccess:o},`${(0,f.Gm)(e)?b.ok.METRIC:b.ok.ISSUE}-${e.id}`)))}})})}}),(0,G.tZ)(c.Z,{pageLinks:i,onCursor:(e,t,r)=>{let a=m.team;a&&0!==a.length||(a=""),s.push({pathname:t,query:{...m,team:a,cursor:e}})}})]})})}renderBody(){const{organization:e,router:t}=this.props;return(0,G.tZ)(m.Z,{title:(0,g.t)("Alerts"),orgSlug:e.slug,children:(0,G.BX)(p.Z,{children:[(0,G.tZ)(j.Z,{router:t,activeTab:"rules"}),this.renderList()]})})}}class ue extends i.Component{componentDidMount(){this.trackView()}componentDidUpdate(e){const{location:t}=this.props;e.location.query?.sort!==t.query?.sort&&this.trackView()}trackView(){const{organization:e,location:t}=this.props;(0,x.Z)("alert_rules.viewed",{organization:e,sort:Array.isArray(t.query.sort)?t.query.sort.join(","):t.query.sort})}render(){return(0,G.tZ)(ce,{...this.props})}}ue.displayName="AlertRulesListContainer";const me=(0,v.Z)(ue),he=(0,a.Z)(d.Z,{target:"eqnk7sr1"})({name:"1sbdiq8",styles:"color:inherit;:hover{color:inherit;}"}),ge=(0,a.Z)(u.KB,{target:"eqnk7sr0"})("position:static;overflow:auto;@media (min-width: ",(e=>e.theme.breakpoints.small),"){overflow:initial;}grid-template-columns:4fr auto 140px 60px auto;white-space:nowrap;font-size:",(e=>e.theme.fontSizeMedium),";")}}]);
//# sourceMappingURL=../sourcemaps/app_views_alerts_list_rules_index_tsx.b024f49103e3d3ed38c44c030cacdd44.js.map