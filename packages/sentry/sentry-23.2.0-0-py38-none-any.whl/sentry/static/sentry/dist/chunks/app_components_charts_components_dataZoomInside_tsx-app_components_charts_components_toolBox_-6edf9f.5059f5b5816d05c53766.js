"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_charts_components_dataZoomInside_tsx-app_components_charts_components_toolBox_-6edf9f"],{"./app/components/charts/components/dataZoomInside.tsx":(e,t,n)=>{n.d(t,{Z:()=>o}),n("../node_modules/echarts/lib/component/dataZoomInside.js");const i={type:"inside",zoomOnMouseWheel:!1,zoomLock:!0,throttle:50};function o(e){return e&&Array.isArray(e)?e:[{...i,...e}]}},"./app/components/charts/components/toolBox.tsx":(e,t,n)=>{function i(){let{dataZoom:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e?{dataZoom:{yAxisIndex:"none",title:{zoom:"zoom",back:"undo"},...e}}:{},...t}}function o(e,t){return{right:0,top:0,itemSize:16,z:-1,feature:i(t),...e}}n.d(t,{Z:()=>o})},"./app/components/profiling/flex.tsx":(e,t,n)=>{n.d(t,{k:()=>a});var i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");const o=e=>"string"==typeof e?e:"number"==typeof e?e+"px":void 0,s=(0,i.Z)("div",{target:"e12bnk0l1"})("display:flex;height:",(e=>o(e.h)),";width:",(e=>o(e.w)),";min-height:",(e=>o(e.minH)),";max-height:",(e=>o(e.maxH)),";padding:",(e=>o(e.p)),";padding-left:",(e=>o(e.pl||e.px)),";padding-right:",(e=>o(e.pr||e.px)),";padding-top:",(e=>o(e.pt||e.py)),";padding-bottom:",(e=>o(e.pb||e.py)),";margin:",(e=>o(e.m)),";margin-left:",(e=>o(e.ml||e.mx)),";margin-right:",(e=>o(e.mr||e.mx)),";margin-top:",(e=>o(e.mt||e.my)),";margin-bottom:",(e=>o(e.mb||e.my)),";flex-direction:",(e=>e.column?"column":"row"),";justify-content:",(e=>e.justify),";align-items:",(e=>e.align),";gap:",(e=>o(e.gap)),";flex-wrap:",(e=>e.wrap),";"),r=(0,i.Z)("div",{target:"e12bnk0l0"})("flex-grow:",(e=>e.grow),";flex-shrink:",(e=>e.shrink),";flex-basis:",(e=>e.basis),";overflow:hidden;"),a=Object.assign(s,{...s,Container:s,Item:r})},"./app/components/profiling/functionsMiniGrid.tsx":(e,t,n)=>{n.d(t,{EA:()=>g,nL:()=>m,q8:()=>f});var i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=n("../node_modules/react/index.js"),s=n("./app/components/links/link.tsx"),r=n("./app/components/loadingIndicator.tsx"),a=n("./app/components/performanceDuration.tsx"),l=n("./app/components/profiling/flex.tsx"),c=n("./app/locale.tsx"),d=n("./app/styles/space.tsx"),p=n("./app/utils/profiling/routes.tsx"),u=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function m(e){const{organization:t,project:n,functions:i,onLinkClick:r}=e;return(0,u.BX)(h,{children:[(0,u.tZ)(x,{children:(0,c.t)("Slowest app functions")}),(0,u.tZ)(x,{align:"right",children:(0,c.t)("P95")}),(0,u.tZ)(x,{align:"right",children:(0,c.t)("Count")}),i&&i.map(((e,i)=>{const l=e.worst.replaceAll("-","");return(0,u.BX)(o.Fragment,{children:[(0,u.tZ)(y,{title:e.name,children:(0,u.tZ)(Z,{children:(0,u.tZ)(s.Z,{to:(c=l,d=e.name,m=e.package,(0,p.u$)({orgSlug:t.slug,projectSlug:n.slug,profileId:c,frameName:d,framePackage:m})),onClick:r,children:e.name})})}),(0,u.tZ)(y,{align:"right",children:(0,u.tZ)(a.Z,{nanoseconds:e.p95,abbreviation:!0})}),(0,u.tZ)(y,{align:"right",children:(0,u.tZ)(v,{children:e.count})})]},i);var c,d,m}))]})}function f(){return(0,u.tZ)(l.k,{align:"stretch",justify:"center",column:!0,h:"100%",children:(0,u.tZ)(l.k,{align:"center",justify:"center",children:(0,u.tZ)(r.Z,{mini:!0})})})}function g(){return(0,u.tZ)(l.k,{align:"stretch",justify:"center",column:!0,h:"100%",children:(0,u.tZ)(l.k,{align:"center",justify:"center",children:(0,c.t)("No functions data")})})}m.displayName="FunctionsMiniGrid",f.displayName="FunctionsMiniGridLoading",g.displayName="FunctionsMiniGridEmptyState";const h=(0,i.Z)("div",{target:"e1f47tm54"})({name:"z3l44r",styles:"display:grid;grid-template-columns:60% 20% 20%"}),x=(0,i.Z)("span",{target:"e1f47tm53"})("text-transform:uppercase;font-size:",(e=>e.theme.fontSizeExtraSmall),";font-weight:600;color:",(e=>e.theme.subText),";text-align:",(e=>e.align),";"),y=(0,i.Z)("div",{target:"e1f47tm52"})("font-size:",(e=>e.theme.fontSizeSmall),";text-align:",(e=>e.align),";padding:",(0,d.D)(.5)," 0px;"),v=(0,i.Z)("div",{target:"e1f47tm51"})({name:"2qga7i",styles:"text-align:right"}),Z=(0,i.Z)("div",{target:"e1f47tm50"})({name:"btttr4",styles:"min-width:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis"})},"./app/components/profiling/profileEventsTable.tsx":(e,t,n)=>{n.d(t,{Q:()=>M});var i=n("../node_modules/react/index.js"),o=n("./app/components/count.tsx"),s=n("./app/components/dateTime.tsx"),r=n("./app/components/gridEditable/index.tsx"),a=n("./app/components/idBadge/projectBadge.tsx"),l=n("./app/components/links/link.tsx"),c=n("./app/components/performanceDuration.tsx"),d=n("./app/components/version.tsx"),p=n("./app/locale.tsx"),u=n("./app/utils.tsx"),m=n("./app/utils/discover/fieldRenderers.tsx"),f=n("./app/utils/discover/styles.tsx"),g=n("./app/utils/events.tsx"),h=n("./app/utils/profiling/routes.tsx"),x=n("./app/utils/profiling/tableRenderer.tsx"),y=n("./app/utils/useLocation.tsx"),v=n("./app/utils/useOrganization.tsx"),Z=n("./app/utils/useProjects.tsx"),w=n("./app/views/discover/table/quickContext/quickContextWrapper.tsx"),b=n("./app/views/discover/table/quickContext/utils.tsx"),j=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),k=(n("../node_modules/core-js/modules/es.array.includes.js"),n("./app/components/hovercard.tsx")),_=n("./app/components/profiling/flex.tsx"),z=n("./app/components/profiling/functionsMiniGrid.tsx"),P=n("./app/components/profiling/textTruncateOverflow.tsx"),q=n("./app/styles/space.tsx"),S=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),C=n("./app/utils/profiling/hooks/useProfilingTransactionQuickSummary.tsx"),L=n("./app/components/button.tsx"),T=n("./app/components/loadingIndicator.tsx"),A=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function I(e){const{project:t,transaction:n,organization:i}=e,{query:o}=(0,y.T)(),s=(0,h.R0)({query:o,orgSlug:i.slug,projectSlug:t.slug,transaction:n}),r=(0,A.tZ)(l.Z,{to:s,onClick:()=>(0,S.Z)("profiling_views.go_to_transaction",{organization:i,source:"transaction_hovercard.trigger"}),children:n});return i.features.includes("profiling-dashboard-redesign")?(0,A.tZ)(O,{delay:250,header:(0,A.BX)(_.k,{justify:"space-between",align:"center",children:[(0,A.tZ)(P.W,{children:n}),(0,A.tZ)(L.zx,{to:s,size:"xs",children:(0,p.t)("View Profiles")})]}),body:(0,A.tZ)(E,{transaction:n,project:t,organization:i}),showUnderline:!0,children:r}):r}function E(e){let{transaction:t,project:n,organization:o}=e;const{slowestProfile:s,slowestProfileQuery:r,slowestProfileDurationMultiplier:a,latestProfileQuery:d,latestProfile:u,functionsQuery:m,functions:f}=(0,C.d)({transaction:t,project:n,referrer:"api.profiling.profiling-transaction-hovercard"}),x=(e,t)=>(0,h.TH)({orgSlug:o.slug,projectSlug:n.slug,profileId:e,query:t});return(0,i.useEffect)((()=>{(0,S.Z)("profiling_ui_events.transaction_hovercard_view",{organization:o})}),[o]),(0,A.BX)(_.k,{gap:(0,q.D)(3),column:!0,children:[(0,A.BX)(_.k,{justify:"space-between",children:[(0,A.tZ)(F,{title:(0,p.t)("Latest profile"),isLoading:d.isLoading,children:u?(0,A.tZ)(l.Z,{to:x(String(u.id)),onClick:()=>(0,S.Z)("profiling_views.go_to_flamegraph",{organization:o,source:"transaction_hovercard.latest_profile"}),children:(0,g.XQ)(String(u.id))}):"-"}),(0,A.tZ)(F,{title:(0,p.t)("Slowest profile"),isLoading:r.isLoading,children:s?(0,A.BX)(_.k,{gap:(0,q.D)(1),children:[(0,A.tZ)(c.Z,{milliseconds:a*s["profile.duration"],abbreviation:!0}),(0,A.BX)(l.Z,{to:x(String(s.id)),onClick:()=>(0,S.Z)("profiling_views.go_to_flamegraph",{organization:o,source:"transaction_hovercard.slowest_profile"}),children:["(",(0,g.XQ)(String(s?.id)),")"]})]}):"-"})]}),(0,A.tZ)(_.k,{column:!0,h:125,children:(0,A.tZ)(D,{isLoading:m.isLoading,functions:f??[],organization:o,project:n,onLinkClick:()=>(0,S.Z)("profiling_views.go_to_flamegraph",{organization:o,source:"transaction_hovercard.suspect_function"})})})]})}function D(e){return e.isLoading?(0,A.tZ)(z.q8,{}):e.functions&&0!==e.functions?.length?(0,A.tZ)(z.nL,{...e}):(0,A.tZ)(z.EA,{})}function F(e){const{title:t,children:n,isLoading:o}=e;return(0,A.BX)(_.k,{column:!0,gap:(0,q.D)(1),children:[t&&(0,A.tZ)(B,{children:t}),(0,A.tZ)(i.Fragment,{children:o?(0,A.tZ)(_.k,{align:"center",justify:"center",h:"1em",children:(0,A.tZ)(T.Z,{mini:!0})}):n})]})}I.displayName="ProfilingTransactionHovercard",E.displayName="ProfilingTransactionHovercardBody",D.displayName="ProfilingTransactionHovercardFunctions",F.displayName="ContextDetail";const B=(0,j.Z)("span",{target:"e1gnxyp31"})("text-transform:uppercase;font-size:",(e=>e.theme.fontSizeExtraSmall),";font-weight:600;color:",(e=>e.theme.subText),";"),O=(0,j.Z)(k.uI,{target:"e1gnxyp30"})({name:"3s4yqf",styles:"width:400px"});function M(e){const t=(0,y.T)(),n=(0,v.Z)(),{projects:o}=(0,Z.Z)(),s=(0,i.useCallback)((n=>()=>{let i="desc";return n===e.sort.key&&e.sort.order===i&&(i="asc"),{...t,query:{...t.query,sort:"asc"===i?n:`-${n}`}}}),[t,e.sort]);return(0,A.tZ)(r.ZP,{isLoading:e.isLoading,error:e.error,data:e.data?.data??[],columnOrder:e.columns.map((e=>function(e){return R[e]?R[e]:{key:e,name:e,width:r.z7}}(e))),columnSortBy:[e.sort],grid:{renderHeadCell:(0,x.w)({currentSort:e.sort,generateSortLink:s,rightAlignedColumns:(c=e.columns,new Set(c.filter((e=>Q.has(e))))),sortableColumns:e.sortableColumns}),renderBodyCell:(a=e.data?.meta??{fields:{},units:{}},l={location:t,organization:n,projects:o},function(e,t,n,i){return(0,A.tZ)(N,{meta:a,baggage:l,column:e,dataRow:t,rowIndex:n,columnIndex:i})})},location:t});var a,l,c}function N(e){const t=e.column.key,n=e.dataRow[t],i=e.meta.fields[t],r=e.meta.units[t];if("id"===t){const t=X(e.baggage,e.dataRow);if(!(0,u.ri)(t))return(0,A.tZ)(f.W2,{children:(0,g.XQ)(n)});const i=(0,h.O$)({orgSlug:e.baggage.organization.slug,projectSlug:t.slug,profileId:n});return(0,A.tZ)(f.W2,{children:(0,A.tZ)(l.Z,{to:i,children:(0,g.XQ)(n)})})}if("project.id"===t||"project"===t||"project.name"===t){const t=X(e.baggage,e.dataRow);return(0,u.ri)(t)?(0,A.tZ)(f.W2,{children:(0,A.tZ)(a.Z,{project:t,avatarSize:16})}):(0,A.tZ)(f.W2,{children:(0,p.t)("n/a")})}if("transaction"===t){const t=X(e.baggage,e.dataRow);if((0,u.ri)(t))return(0,A.tZ)(f.W2,{children:(0,A.tZ)(I,{transaction:n,project:t,organization:e.baggage.organization})})}if("release"===t&&n)return(0,A.tZ)(w.V,{dataRow:e.dataRow,contextType:b.z.RELEASE,organization:e.baggage.organization,children:(0,A.tZ)(d.Z,{version:n,truncate:!0})});switch(i){case"integer":case"number":return(0,A.tZ)(f.Hw,{children:(0,A.tZ)(o.Z,{value:n})});case"duration":const e=r?m.a_[r]??1:1;return(0,A.tZ)(f.Hw,{children:(0,A.tZ)(c.Z,{milliseconds:n*e,abbreviation:!0})});case"date":return(0,A.tZ)(f.W2,{children:(0,A.tZ)(s.Z,{date:n,year:!0,seconds:!0,timeZone:!0})});default:return(0,A.tZ)(f.W2,{children:n})}}function X(e,t){let n;if((0,u.ri)(t["project.id"])){const i=t["project.id"].toString();n=e.projects.find((e=>e.id===i))}else if((0,u.ri)(t.project)){const i=t.project;n=e.projects.find((e=>e.slug===i))}else if((0,u.ri)(t["project.name"])){const i=t["project.name"];n=e.projects.find((e=>e.slug===i))}return n??null}M.displayName="ProfileEventsTable";const Q=new Set(["profile.duration","p75()","p95()","p99()","count()"]),R={id:{key:"id",name:(0,p.t)("Profile ID"),width:r.z7},trace:{key:"trace",name:(0,p.t)("Trace ID"),width:r.z7},"trace.transaction":{key:"trace.transaction",name:(0,p.t)("Transaction ID"),width:r.z7},transaction:{key:"transaction",name:(0,p.t)("Transaction"),width:r.z7},"profile.duration":{key:"profile.duration",name:(0,p.t)("Duration"),width:r.z7},project:{key:"project",name:(0,p.t)("Project"),width:r.z7},"project.id":{key:"project.id",name:(0,p.t)("Project"),width:r.z7},"project.name":{key:"project.name",name:(0,p.t)("Project"),width:r.z7},environment:{key:"environment",name:(0,p.t)("Environment"),width:r.z7},timestamp:{key:"timestamp",name:(0,p.t)("Timestamp"),width:r.z7},release:{key:"release",name:(0,p.t)("Release"),width:r.z7},"platform.name":{key:"platform.name",name:(0,p.t)("Platform"),width:r.z7},"device.arch":{key:"device.arch",name:(0,p.t)("Device Architecture"),width:r.z7},"device.classification":{key:"device.classification",name:(0,p.t)("Device Classification"),width:r.z7},"device.locale":{key:"device.locale",name:(0,p.t)("Device Locale"),width:r.z7},"device.manufacturer":{key:"device.manufacturer",name:(0,p.t)("Device Manufacturer"),width:r.z7},"device.model":{key:"device.model",name:(0,p.t)("Device Model"),width:r.z7},"os.build":{key:"os.build",name:(0,p.t)("OS Build"),width:r.z7},"os.name":{key:"os.name",name:(0,p.t)("OS Name"),width:r.z7},"os.version":{key:"os.version",name:(0,p.t)("OS Version"),width:r.z7},"last_seen()":{key:"last_seen()",name:(0,p.t)("Last Seen"),width:r.z7},"p75()":{key:"p75()",name:(0,p.t)("P75"),width:r.z7},"p95()":{key:"p95()",name:(0,p.t)("P95()"),width:r.z7},"p99()":{key:"p99()",name:(0,p.t)("P99()"),width:r.z7},"count()":{key:"count()",name:(0,p.t)("Count()"),width:r.z7}}},"./app/components/profiling/textTruncateOverflow.tsx":(e,t,n)=>{n.d(t,{W:()=>a});var i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=n("./app/styles/space.tsx"),s=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e){const{children:t,as:n="div",...i}=e;return(0,s.tZ)(n,{...i,title:t,children:t})}r.displayName="TextOverflow";const a=(0,i.Z)(r,{target:"eihcg730"})("min-width:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-right:",(0,o.D)(1),";")},"./app/utils/profiling/hooks/useProfileEvents.tsx":(e,t,n)=>{n.d(t,{GP:()=>d,Z:()=>p,kq:()=>u}),n("../node_modules/core-js/modules/es.array.includes.js");var i=n("../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),o=n("./app/components/organizations/pageFilters/parse.tsx"),s=n("./app/locale.tsx"),r=n("./app/utils.tsx"),a=n("./app/utils/useApi.tsx"),l=n("./app/utils/useOrganization.tsx"),c=n("./app/utils/usePageFilters.tsx");function d(e){let{fields:t,limit:n,referrer:s,query:r,sort:d,cursor:p,enabled:u=!0,refetchOnMount:m=!0,datetime:f,projects:g}=e;const h=(0,a.Z)(),x=(0,l.Z)(),{selection:y}=(0,c.Z)(),v=`/organizations/${x.slug}/events/`,Z={query:{dataset:"profiles",referrer:s,project:g||y.projects,environment:y.environments,...(0,o.fK)(f??y.datetime),field:t,per_page:n,query:r,sort:"asc"===d.order?d.key:`-${d.key}`,cursor:p}},w=[v,Z];return(0,i.a)({queryKey:w,queryFn:()=>h.requestPromise(v,{method:"GET",includeAllArgs:!0,query:Z.query}),refetchOnWindowFocus:!1,refetchOnMount:m,retry:!1,enabled:u})}function p(e){if(!(0,r.ri)(e))return null;const t=e.responseJSON?.detail;if("string"==typeof t)return t;const n=t?.message;return"string"==typeof n?n:(0,s.t)("An unknown error occurred.")}function u(e,t,n){const i="-"===(e=e||"")[0]?"desc":"asc",o="asc"===i?e:e.substring(1);return t.includes(o)?{key:o,order:i}:n}},"./app/utils/profiling/hooks/useProfileFilters.tsx":(e,t,n)=>{n.d(t,{J:()=>a});var i=n("../node_modules/react/index.js"),o=n("./app/components/organizations/pageFilters/parse.tsx"),s=n("./app/utils/useApi.tsx"),r=n("./app/utils/useOrganization.tsx");function a(e){let{query:t,selection:n}=e;const a=(0,s.Z)(),c=(0,r.Z)(),[d,p]=(0,i.useState)({});return(0,i.useEffect)((()=>{if(n)return function(e,t,n,i){return e.requestPromise(`/organizations/${t.slug}/profiling/filters/`,{method:"GET",query:{query:n,project:i.projects,environment:i.environments,...(0,o.fK)(i.datetime)}})}(a,c,t,n).then((e=>{const t=e.reduce(((e,t)=>(l[t.key]&&(t.key=l[t.key],e[t.key]={...t,predefined:!0}),e)),{});p(t)})),()=>a.clear()}),[a,c,t,n]),d}const l={version:"release",device_locale:"device.locale",platform:"platform.name",transaction_name:"transaction",device_os_build_number:"os.build",device_os_name:"os.name",device_os_version:"os.version",device_model:"device.model",device_manufacturer:"device.manufacturer",device_classification:"device.classification"}},"./app/utils/profiling/hooks/useProfilingTransactionQuickSummary.tsx":(e,t,n)=>{n.d(t,{d:()=>l});var i=n("./app/utils/discover/fieldRenderers.tsx"),o=n("./app/utils/profiling/hooks/useFunctions.tsx"),s=n("./app/utils/profiling/hooks/useProfileEvents.tsx"),r=n("./app/utils/usePageFilters.tsx"),a=n("./app/views/profiling/profileSummary/content.tsx");function l(e){const{transaction:t,project:n,referrer:l,skipFunctions:c=!1,skipLatestProfile:d=!1,skipSlowestProfile:p=!1}=e,{selection:u}=(0,r.Z)(),m={query:`transaction:"${t}"`,fields:(0,a.H)(n.platform),enabled:Boolean(t),limit:1,referrer:l,refetchOnMount:!1,projects:[n.id]},f=(0,s.GP)({...m,sort:{key:"profile.duration",order:"desc"},enabled:!p}),g=(0,s.GP)({...m,sort:{key:"timestamp",order:"desc"},enabled:!d}),h=(0,o.d)({project:n,query:"",selection:u,transaction:t,sort:"-p95",functionType:"application",enabled:!c}),x=f?.data?.[0].data[0]??null,y=f.data?.[0].meta.units["profile.duration"],v=y?i.a_[y]??1:1,Z=g?.data?.[0].data[0]??null,w=h?.data?.[0]?.functions;return{slowestProfileQuery:f,slowestProfile:x,slowestProfileDurationMultiplier:v,latestProfileQuery:g,latestProfile:Z,functionsQuery:h,functions:w,isLoading:f.isLoading||g.isLoading||h.isLoading}}},"./app/views/profiling/landing/profileCharts.tsx":(e,t,n)=>{n.d(t,{A:()=>j});var i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/core-js/modules/es.error.cause.js"),n("../node_modules/react/index.js")),s=n("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),r=n("./app/components/charts/areaChart.tsx"),a=n("./app/components/charts/chartZoom.tsx"),l=n("./app/components/charts/styles.tsx"),c=n("./app/components/panels/index.tsx"),d=n("./app/locale.tsx"),p=n("./app/styles/space.tsx"),u=n("./app/utils/discover/charts.tsx"),m=n("./app/utils/discover/fields.tsx"),f=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/@tanstack/react-query/build/lib/useQuery.mjs")),g=n("./app/components/organizations/pageFilters/parse.tsx"),h=n("./app/utils/useApi.tsx"),x=n("./app/utils/useOrganization.tsx"),y=n("./app/utils/usePageFilters.tsx");function v(e,t){const n={axis:e,values:[]},i={dataset:"profiles",end:t.end,start:t.start},o=[];for(let e=0;e<t.data.length;e++){const[i,s]=t.data[e];n.values.push(s[0].count),o.push(i)}return{series:n,meta:i,timestamps:o}}var Z=n("./app/utils/useRouter.tsx"),w=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const b=["count()","p99()","p95()","p75()"];function j(e){let{query:t,selection:n,hideCount:i}=e;const l=(0,Z.Z)(),c=(0,s.u)(),p=(0,o.useMemo)((()=>i?b.filter((e=>"count()"!==e)):b),[i]),j=function(e){let{yAxes:t,interval:n,query:i,referrer:o}=e;const s=(0,h.Z)(),r=(0,x.Z)(),{selection:a}=(0,y.Z)(),l=`/organizations/${r.slug}/events-stats/`,c={query:{dataset:"profiles",referrer:o,project:a.projects,environment:a.environments,...(0,g.fK)(a.datetime),yAxis:t,interval:n,query:i}},d=[l,c];return(0,f.a)({queryKey:d,queryFn:()=>s.requestPromise(l,{method:"GET",includeAllArgs:!0,query:c.query}).then((e=>function(e,t){if(0===e.length)return[{data:[],meta:{dataset:"profiles",end:0,start:0},timestamps:[]},t[1],t[2]];if(1===e.length){const{series:n,meta:i,timestamps:o}=v(e[0],t[0]);return[{data:[n],meta:i,timestamps:o},t[1],t[2]]}const n=[];let i={dataset:"profiles",end:-1,start:-1},o=[],s=!0;for(const r of e){const e=v(r,t[0][r]);if(s)i=e.meta,o=e.timestamps;else{if(i.start!==e.meta.start||i.end!==e.meta.end)throw new Error("Mismatching start/end times");if(o.length!==e.timestamps.length||o.some(((t,n)=>t!==e.timestamps[n])))throw new Error("Mismatching timestamps")}n.push(e.series),s=!1}return[{data:n,meta:i,timestamps:o},t[1],t[2]]}(t,e))),refetchOnWindowFocus:!1,retry:!1})}({query:t,referrer:"api.profiling.landing-chart",yAxes:p}),P=(0,o.useMemo)((()=>{if("success"!==j.status)return[];const e=j.data[0].timestamps.map((e=>1e3*e)),t=j.data[0].data.filter((e=>p.includes(e.axis))).map((t=>{if(e.length!==t.values.length)throw new Error("Invalid stats response");return"count()"===t.axis?{data:t.values.map(((t,n)=>({name:e[n],value:t??0}))),seriesName:t.axis,xAxisIndex:0,yAxisIndex:0}:{data:t.values.map(((t,n)=>({name:e[n],value:(t??0)/1e6}))),seriesName:t.axis,xAxisIndex:1,yAxisIndex:1}}));return t.sort(((e,t)=>p.indexOf(e.seriesName)-p.indexOf(t.seriesName))),t}),[j,p]);return(0,w.tZ)(a.Z,{router:l,...n?.datetime,children:e=>(0,w.BX)(k,{children:[(0,w.BX)(_,{children:[!i&&(0,w.tZ)(z,{children:(0,d.t)("Profiles by Count")}),(0,w.tZ)(z,{children:(0,d.t)("Profiles by Percentiles")})]}),(0,w.tZ)(r.T,{height:300,series:P,grid:[{top:"32px",left:"24px",right:"52%",bottom:"16px"},{top:"32px",left:i?"24px":"52%",right:"24px",bottom:"16px"}],legend:{right:16,top:12,data:p.slice()},axisPointer:{link:[{xAxisIndex:[0,1]}]},xAxes:[{show:!i,gridIndex:0,type:"time"},{gridIndex:1,type:"time"}],yAxes:[{gridIndex:0,scale:!0,axisLabel:{color:c.chartLabel,formatter:e=>(0,u.gu)(e,"integer")}},{gridIndex:1,scale:!0,axisLabel:{color:c.chartLabel,formatter:e=>(0,u.gu)(e,"duration")}}],tooltip:{valueFormatter:(e,t)=>(0,u.CX)(e,(0,m.Px)(t))},isGroupedByDate:!0,showTimeInTooltip:!0,...e})]})})}j.displayName="ProfileCharts";const k=(0,i.Z)(c.s_,{target:"e1xfi5vp2"})("padding-top:",(0,p.D)(2),";"),_=(0,i.Z)("div",{target:"e1xfi5vp1"})({name:"ai16bo",styles:"width:100%;display:flex;flex-direction:row"}),z=(0,i.Z)(l.Gh,{target:"e1xfi5vp0"})("flex-grow:1;margin-left:",(0,p.D)(2),";")},"./app/views/profiling/profileSummary/content.tsx":(e,t,n)=>{n.d(t,{H:()=>v,J:()=>y});var i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/react/index.js")),s=n("../node_modules/react-router/es/index.js"),r=n("./app/components/compactSelect/index.tsx"),a=n("./app/components/layouts/thirds.tsx"),l=n("./app/components/pagination.tsx"),c=n("./app/components/profiling/profileEventsTable.tsx"),d=n("./app/components/profiling/suspectFunctions/suspectFunctionsTable.tsx"),p=n("./app/data/platformCategories.tsx"),u=n("./app/locale.tsx"),m=n("./app/styles/space.tsx"),f=n("./app/utils/profiling/hooks/useProfileEvents.tsx"),g=n("./app/utils/queryString.tsx"),h=n("./app/views/profiling/landing/profileCharts.tsx"),x=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function y(e){const t=(0,o.useMemo)((()=>v(e.project.platform)),[e.project]),n=(0,o.useMemo)((()=>(0,g.ro)(e.location.query.cursor)),[e.location.query.cursor]),i=(0,f.kq)((0,g.ro)(e.location.query.sort),t,{key:"timestamp",order:"desc"}),l=(0,f.GP)({cursor:n,fields:t,query:e.query,sort:i,limit:5,referrer:"api.profiling.profile-summary-table"}),p=(0,o.useCallback)((t=>{s.browserHistory.push({...e.location,query:{...e.location.query,cursor:void 0,sort:t}})}),[e.location]);return(0,x.BX)(a.or,{fullWidth:!0,children:[(0,x.tZ)(h.A,{query:e.query,hideCount:!0}),(0,x.BX)(j,{children:[(0,x.tZ)(r.Z,{triggerProps:{prefix:(0,u.t)("Filter"),size:"xs"},value:"asc"===i.order?i.key:`-${i.key}`,options:b,onChange:e=>p(e.value)}),(0,x.tZ)(k,{pageLinks:"success"===l.status?l.data?.[2]?.getResponseHeader("Link")??null:null,size:"xs"})]}),(0,x.tZ)(c.Q,{columns:t,data:"success"===l.status?l.data[0]:null,error:"error"===l.status?(0,u.t)("Unable to load profiles"):null,isLoading:"loading"===l.status,sort:i}),(0,x.tZ)(d.f,{project:e.project,transaction:e.transaction,analyticsPageSource:"profiling_transaction"})]})}function v(e){return p.ai.includes(e)?Z:w}y.displayName="ProfileSummaryContent";const Z=["id","timestamp","release","device.model","device.classification","device.arch","profile.duration"],w=["id","timestamp","release","device.arch","profile.duration"],b=[{label:(0,u.t)("Recent Profiles"),value:"-timestamp"},{label:(0,u.t)("Slowest Profiles"),value:"-profile.duration"},{label:(0,u.t)("Fastest Profiles"),value:"profile.duration"}],j=(0,i.Z)("div",{target:"etsf1iv1"})("display:flex;justify-content:space-between;margin-bottom:",(0,m.D)(1),";"),k=(0,i.Z)(l.Z,{target:"etsf1iv0"})("margin:0 0 0 ",(0,m.D)(1),";")}}]);
//# sourceMappingURL=../sourcemaps/app_components_charts_components_dataZoomInside_tsx-app_components_charts_components_toolBox_-6edf9f.2149787089e4915e6a10cd3e238c463c.js.map