"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_trends_changedTransactions_tsx"],{"./app/components/charts/chartZoom.tsx":(e,t,r)=>{r.d(t,{Z:()=>y});var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(r("../node_modules/core-js/modules/es.array.push.js"),r("../node_modules/react/index.js")),s=r("../node_modules/moment/moment.js"),a=r.n(s),i=r("../node_modules/query-string/index.js"),d=r("./app/actionCreators/pageFilters.tsx"),l=r("./app/components/charts/components/dataZoomInside.tsx");r("../node_modules/echarts/lib/component/dataZoomSlider.js");const c={realtime:!1,showDetail:!1,left:0,right:6,bottom:8};function p(e){return e&&Array.isArray(e)?e:[{...c,...e}]}var u=r("./app/components/charts/components/toolBox.tsx"),m=r("./app/utils/callIfFunction.tsx"),g=r("./app/utils/dates.tsx");const h=e=>e?a().utc(e).format(a().HTML5_FMT.DATETIME_LOCAL_SECONDS):null;class f extends o.Component{constructor(e){var t;super(e),t=this,(0,n.Z)(this,"history",void 0),(0,n.Z)(this,"currentPeriod",void 0),(0,n.Z)(this,"zooming",null),(0,n.Z)(this,"saveCurrentPeriod",(e=>{this.currentPeriod={period:e.period,start:h(e.start),end:h(e.end)}})),(0,n.Z)(this,"setPeriod",(function(e){let{period:r,start:n,end:o}=e,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{router:a,onZoom:l,usePageDate:c}=t.props,p=h(n),u=h(o);s&&t.history.push(t.currentPeriod),l?.({period:r,start:p,end:u}),t.zooming=()=>{if(c&&a){const e={...a.location.query,pageStart:n?(0,g.v5)(n):void 0,pageEnd:o?(0,g.v5)(o):void 0,pageStatsPeriod:r??void 0};i.stringify(e)!==i.stringify(a.location.query)&&a.push({pathname:a.location.pathname,query:e})}else(0,d.dR)({period:r,start:p?(0,g.hC)(p):p,end:u?(0,g.hC)(u):u},a);t.saveCurrentPeriod({period:r,start:n,end:o})}})),(0,n.Z)(this,"handleChartReady",(e=>{this.props.onChartReady?.(e)})),(0,n.Z)(this,"handleZoomRestore",((e,t)=>{this.history.length&&(this.setPeriod(this.history[0]),this.history=[],this.props.onRestore?.(e,t))})),(0,n.Z)(this,"handleDataZoom",((e,t)=>{const r=t.getModel(),{startValue:n,endValue:o}=r._payload.batch[0];if(null===n&&null===o){const e=this.history.pop();if(!e)return;this.setPeriod(e)}else{const e=a().utc(n),t=a().utc(o);this.setPeriod({period:null,start:e,end:t},!0)}this.props.onDataZoom?.(e,t)})),(0,n.Z)(this,"handleChartFinished",((e,t)=>{"function"==typeof this.zooming&&(this.zooming(),this.zooming=null);const r=t._componentsViews?.find((e=>e._features&&e._features.dataZoom));r&&!r._features.dataZoom._isZoomActive&&t.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}),(0,m.g)(this.props.onFinished)})),this.history=[],this.saveCurrentPeriod(e)}componentDidUpdate(){this.props.disabled||this.saveCurrentPeriod(this.props)}render(){const{utc:e,start:t,end:r,disabled:n,children:o,xAxisIndex:s,router:a,onZoom:i,onRestore:d,onChartReady:c,onDataZoom:m,onFinished:h,showSlider:f,chartZoomOptions:y,...x}=this.props,Z=e??void 0,v=t?(0,g.hC)(t):void 0,S=r?(0,g.hC)(r):void 0;return o(n?{utc:Z,start:v,end:S,...x}:{isGroupedByDate:!0,onChartReady:this.handleChartReady,utc:Z,start:v,end:S,dataZoom:f?[...p({xAxisIndex:s,...y}),...(0,l.Z)({xAxisIndex:s,...y})]:(0,l.Z)({xAxisIndex:s,...y}),showTimeInTooltip:!0,toolBox:(0,u.Z)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom,onFinished:this.handleChartFinished,onRestore:this.handleZoomRestore,...x})}}f.displayName="ChartZoom";const y=f},"./app/components/charts/lineChart.tsx":(e,t,r)=>{r.d(t,{w:()=>a});var n=r("./app/components/charts/series/lineSeries.tsx"),o=r("./app/components/charts/baseChart.tsx"),s=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{series:t,seriesOptions:r,...a}=e;return(0,s.tZ)(o.Z,{...a,series:t.map((e=>{let{seriesName:t,data:o,dataArray:s,...a}=e;return(0,n.Z)({...r,...a,name:t,data:s||o?.map((e=>{let{value:t,name:r}=e;return[r,t]})),animation:!1,animationThreshold:1,animationDuration:0})}))})}a.displayName="LineChart"},"./app/components/charts/transitionChart.tsx":(e,t,r)=>{r.d(t,{Z:()=>d});var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=r("../node_modules/react/index.js"),s=r("./app/components/charts/loadingPanel.tsx"),a=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends o.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{prevReloading:this.props.reloading,prevLoading:this.props.loading,key:1})}static getDerivedStateFromProps(e,t){const r=t.prevReloading,n=e.reloading,o=t.prevLoading,s=e.loading;return o!==s?{prevReloading:n,prevLoading:s,key:t.key+1}:s?{prevReloading:n,prevLoading:s,key:t.key}:r&&!n?{prevReloading:n,prevLoading:s,key:t.key+1}:{prevReloading:n,prevLoading:s,key:t.key}}render(){const{height:e,loading:t,reloading:r}=this.props;return t&&!r?(0,a.tZ)(s.Z,{height:e,"data-test-id":"events-request-loading"}):(0,a.tZ)(o.Fragment,{children:this.props.children},String(this.state.key))}}i.displayName="TransitionChart",(0,n.Z)(i,"defaultProps",{height:"200px"});const d=i},"./app/utils/performance/trends/trendsDiscoverQuery.tsx":(e,t,r)=>{r.d(t,{ZP:()=>p,iC:()=>c});var n=r("./app/utils/discover/genericDiscoverQuery.tsx"),o=r("./app/utils/withProjects.tsx"),s=r("./app/views/performance/trends/utils.tsx"),a=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){const{eventView:t,projects:r}=e,n=t?.getEventsAPIPayload(e.location),o=(0,s.CE)(e.location,e.trendFunctionField),a=(0,s.IO)(e.location,r,t.project);return n.trendFunction=(0,s.ed)(o.field,a.column),n.trendType=t?.trendType||e.trendChangeType,n.interval=t?.interval,n.middle=t?.middle,n}function d(e){return(0,a.tZ)(n.ZP,{...e,route:"events-trends-stats",getRequestPayload:i,children:t=>{let{tableData:r,...n}=t;return e.children({trendsData:r,...n})}})}function l(e){return(0,a.tZ)(n.ZP,{...e,route:"events-trends",getRequestPayload:i,children:t=>{let{tableData:r,...n}=t;return e.children({trendsData:r,...n})}})}d.displayName="TrendsDiscoverQuery",l.displayName="EventsDiscoverQuery";const c=(0,o.Z)(l),p=(0,o.Z)(d)},"./app/utils/profiling/routes.tsx":(e,t,r)=>{function n(e){let{orgSlug:t,projectSlug:r,profileId:n}=e;return`/organizations/${t}/profiling/profile/${r}/${n}/flamechart/`}function o(e){let{orgSlug:t,query:r}=e;const n=function(e){let{orgSlug:t}=e;return`/organizations/${t}/profiling/`}({orgSlug:t});return{pathname:n,query:{...r}}}function s(e){let{orgSlug:t,projectSlug:r,transaction:n,query:o}=e;const s=function(e){let{orgSlug:t,projectSlug:r}=e;return`/organizations/${t}/profiling/summary/${r}/`}({orgSlug:t,projectSlug:r});return{pathname:s,query:{...o,transaction:n}}}function a(e){let{orgSlug:t,projectSlug:r,profileId:o,query:s}=e;return{pathname:n({orgSlug:t,projectSlug:r,profileId:o}),query:{...s}}}function i(e){let{orgSlug:t,projectSlug:r,profileId:n,frameName:o,framePackage:s,query:i}=e;return a({orgSlug:t,projectSlug:r,profileId:n,query:{...i,frameName:o,framePackage:s}})}function d(e){let{orgSlug:t,projectSlug:r,profileId:n,query:o}=e;const s=function(e){let{orgSlug:t,projectSlug:r,profileId:n}=e;return`/organizations/${t}/profiling/profile/${r}/${n}/details/`}({orgSlug:t,projectSlug:r,profileId:n});return{pathname:s,query:{...o}}}r.d(t,{O$:()=>n,Qy:()=>d,R0:()=>s,TH:()=>a,XR:()=>o,u$:()=>i})},"./app/views/performance/transactionSummary/utils.tsx":(e,t,r)=>{r.d(t,{DC:()=>p,K0:()=>u,MF:()=>Z,PU:()=>g,Z6:()=>f,e1:()=>h,nx:()=>x,uI:()=>v,vd:()=>y,xf:()=>m});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=r("./app/styles/space.tsx"),s=r("./app/utils/discover/urls.tsx"),a=r("./app/utils/getRouteStringFromRoutes.tsx"),i=r("./app/utils/performance/urls.ts"),d=r("./app/utils/profiling/routes.tsx"),l=r("./app/utils/tokenizeSearch.tsx"),c=r("./app/views/performance/traceDetails/utils.tsx");let p,u;function m(e){const t=g(e);return t.removeFilter("transaction"),t}function g(e){const t=new l.MY(e);return t.removeFilter("event.type"),t}function h(e){let{orgSlug:t,transaction:r,projectID:n,query:o,unselectedSeries:s="p100()",display:a,trendFunction:i,trendColumn:d,showTransactions:l,additionalQuery:c,subPath:p}=e;const u=function(e){let{orgSlug:t,subPath:r}=e;return`/organizations/${t}/performance/summary/${r?`${r}/`:""}`}({orgSlug:t,subPath:p});let g;return g="string"==typeof o.query?m(o.query).formatString():o.query,{pathname:u,query:{transaction:r,project:n,environment:o.environment,statsPeriod:o.statsPeriod,start:o.start,end:o.end,query:g,unselectedSeries:s,showTransactions:l,display:a,trendFunction:i,trendColumn:d,referrer:"performance-transaction-summary",...c}}}function f(e){return(t,r,n)=>{const o=`${r.trace}`;return o?(0,c.YA)(t,o,e,{}):{}}}function y(e){return(t,r,n,o)=>{const a=(0,s.JE)(r);return(0,i.D)(t.slug,a,e,n,o)}}function x(){return(e,t,r)=>{const n=t["profile.id"];return n?(0,d.O$)({orgSlug:e.slug,projectSlug:String(t["project.name"]),profileId:String(n)}):{}}}function Z(e){const t=(0,a.Z)(e);return(e,r,n)=>{const o=r.replayId;if(!o)return{};const s=`${r["project.name"]}:${o}`;if(!r.timestamp)return{pathname:`/organizations/${e.slug}/replays/${s}/`,query:{referrer:t}};const a=new Date(r.timestamp).getTime()-r["transaction.duration"];return{pathname:`/organizations/${e.slug}/replays/${s}/`,query:{event_t:a,referrer:t}}}}!function(e){e.DURATION_PERCENTILE="durationpercentile",e.DURATION="duration",e.LATENCY="latency",e.TREND="trend",e.VITALS="vitals",e.USER_MISERY="usermisery"}(p||(p={})),function(e){e.FASTEST="fastest",e.SLOW="slow",e.OUTLIER="outlier",e.RECENT="recent"}(u||(u={}));const v=(0,n.Z)("div",{target:"etoucxl0"})("margin-top:",(0,o.D)(3),";")},"./app/views/performance/trends/changedTransactions.tsx":(e,t,r)=>{r.d(t,{H:()=>X,Z:()=>ce});var n,o=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(r("../node_modules/core-js/modules/es.array.push.js"),r("../node_modules/core-js/modules/es.error.cause.js"),r("../node_modules/react/index.js")),a=r("../node_modules/react-router/es/index.js"),i=r("./app/components/button.tsx"),d=r("./app/components/charts/styles.tsx"),l=r("./app/components/count.tsx"),c=r("./app/components/dropdownLink.tsx"),p=r("./app/components/duration.tsx"),u=r("./app/components/emptyStateWarning.tsx"),m=r("./app/components/forms/controls/radioGroup.tsx"),g=r("./app/components/idBadge/index.tsx"),h=r("./app/components/links/link.tsx"),f=r("./app/components/loadingIndicator.tsx"),y=r("./app/components/menuItem.tsx"),x=r("./app/components/pagination.tsx"),Z=r("./app/components/panels/index.tsx"),v=r("./app/components/questionTooltip.tsx"),S=r("./app/components/radio.tsx"),_=r("./app/components/tooltip.tsx"),j=r("./app/icons/index.tsx"),w=r("./app/locale.tsx"),C=r("./app/styles/space.tsx"),b=r("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),E=r("./app/utils/formatters.tsx"),T=r("./app/utils/performance/trends/trendsDiscoverQuery.tsx"),R=r("./app/utils/queryString.tsx"),D=r("./app/utils/tokenizeSearch.tsx"),P=r("./app/utils/useApi.tsx"),q=r("./app/utils/withOrganization.tsx"),k=r("./app/utils/withProjects.tsx"),L=r("./app/views/performance/transactionSummary/utils.tsx"),I=r("./app/views/performance/trends/chart.tsx"),z=r("./app/views/performance/trends/types.tsx"),A=r("./app/views/performance/trends/utils.tsx"),N=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function F(e){switch(e){case z.ER.IMPROVED:return(0,w.t)("Most Improved Transactions");case z.ER.REGRESSION:return(0,w.t)("Most Regressed Transactions");default:throw new Error("No trend type passed")}}function $(e,t,r){const n=(0,A.j_)(t),o=(0,R.ro)(e.query[n]);if(!r)return;return r.find((e=>`${e.transaction}-${e.project}`===o))||(r.length>0?r[0]:void 0)}function M(e,t,r){return function(n){const o=(0,A.j_)(r),s={...e.query};n?s[o]=n?`${n.transaction}-${n.project}`:void 0:delete s[o],a.browserHistory.push({pathname:e.pathname,query:s}),(0,b.Z)("performance_views.trends.widget_interaction",{organization:t,widget_type:r})}}function O(e,t,r,o,s,i,d){const l=(0,A.IO)(e,i,d).column,c=(0,R.ro)(e.query.query),p=new D.MY(c??""),u=p.getFilterValues(l),m=o===n.GREATER_THAN_EQUALS?">":"<";u&&u.forEach((e=>{(e.startsWith(o)||e.startsWith(m))&&p.removeFilterValue(l,e)})),p.addFilterValues(l,[`${o}${r}`]);const g=p.formatString();a.browserHistory.push({pathname:e.pathname,query:{...e.query,query:String(g).trim()}}),(0,b.Z)("performance_views.trends.change_duration",{organization:t,widget_type:F(s),value:`${o}${r}`})}function B(e){const{location:t,trendChangeType:r,previousTrendFunction:n,previousTrendColumn:o,organization:i,projects:d,setError:l}=e,c=(0,P.Z)(),p=e.trendView.clone(),u=F(r);(0,A.kM)(p,t,r,d);const m=(e=>(t,r,n)=>{const o={};e===z.ER.IMPROVED?o.improvedCursor=t:e===z.ER.REGRESSION&&(o.regressionCursor=t),delete n[(0,A.j_)(e)],a.browserHistory.push({pathname:r,query:{...n,...o}})})(r),g=(0,R.ro)(t.query[A.vt[r]]),h=e=>{(0,b.Z)("performance_views.trends.widget_pagination",{organization:i,direction:e,widget_type:F(r)})};return(0,N.tZ)(T.ZP,{eventView:p,orgSlug:i.slug,location:t,trendChangeType:r,cursor:g,limit:5,setError:e=>l(e?.message),children:a=>{let{isLoading:l,trendsData:g,pageLinks:y}=a;const Z=(0,A.CE)(t),S=(0,A.IO)(t,d,p.project),_=(0,A.RP)(g&&g.events&&g.events.data||[]),j=$(t,r,_),C=g?.stats||{},b=_&&_.slice?_.slice(0,5):[],E=l&&n?n:Z.field,T=l&&o?o:S.column,R=(0,w.t)("This compares the baseline (%s) of the past with the present.",Z.legendLabel);return(0,N.BX)(G,{"data-test-id":"changed-transactions",children:[(0,N.BX)(U,{children:[(0,N.BX)(W,{children:[u,(0,N.tZ)(v.Z,{size:"sm",position:"top",title:R})]}),l?(0,N.tZ)(f.Z,{style:{margin:"237px auto"}}):(0,N.tZ)(s.Fragment,{children:b.length?(0,N.BX)(s.Fragment,{children:[(0,N.tZ)(Y,{children:(0,N.tZ)(I.Z,{statsData:C,query:p.query,project:p.project,environment:p.environment,start:p.start,end:p.end,statsPeriod:p.statsPeriod,transaction:j,isLoading:l,...e})}),b.map(((n,o)=>(0,N.tZ)(V,{api:c,currentTrendFunction:E,currentTrendColumn:T,trendView:e.trendView,organization:i,transaction:n,index:o,trendChangeType:r,transactions:b,location:t,projects:d,statsData:C,handleSelectTransaction:M(t,i,r)},n.transaction)))]}):(0,N.tZ)(ee,{small:!0,children:(0,w.t)("No results")})})]}),(0,N.tZ)(x.Z,{pageLinks:y,onCursor:m,paginationAnalyticsEvent:h})]})}})}function V(e){const{transaction:t,transactions:r,trendChangeType:o,currentTrendFunction:i,currentTrendColumn:d,index:p,location:u,organization:h,projects:f,handleSelectTransaction:x,trendView:Z}=e,v=A.es[o].default,C=$(u,o,r)===t,b=f.find((e=>{let{slug:r}=e;return r===t.project})),T=t.aggregate_range_2,P=t.aggregate_range_1,q=(0,E.rl)(Math.abs(t.trend_percentage-1),0),k=(0,E.g9)(P/1e3,P<1e3&&P>10?0:2),L=(0,E.g9)(T/1e3,T<1e3&&T>10?0:2),I=(0,w.t)("Over this period, the %s for %s has %s %s from %s to %s",i,d,o===z.ER.IMPROVED?(0,w.t)("decreased"):(0,w.t)("increased"),q,k,L),F=o===z.ER.IMPROVED?P:T,M=o===z.ER.IMPROVED?k:L;return(0,N.BX)(te,{"data-test-id":"trends-list-item-"+o,children:[(0,N.tZ)(re,{color:v,children:(0,N.tZ)(_.u,{title:(0,N.BX)(de,{children:[(0,N.tZ)("span",{children:(0,w.t)("Total Events")}),(0,N.BX)("span",{children:[(0,N.tZ)(l.Z,{value:t.count_range_1}),(0,N.tZ)(le,{direction:"right",size:"xs"}),(0,N.tZ)(l.Z,{value:t.count_range_2})]})]}),disableForVisualTest:!0,children:(0,N.tZ)(m.V,{index:p,role:"radio",children:(0,N.tZ)(S.Z,{checked:C,onChange:()=>x(t)})})})}),(0,N.tZ)(Q,{...e}),(0,N.tZ)(ae,{children:(0,N.tZ)(_.u,{title:I,children:(0,N.BX)(s.Fragment,{children:[o===z.ER.REGRESSION?"+":"",(0,E.rl)(t.trend_percentage-1,0)]})})}),(0,N.BX)(c.Z,{caret:!1,anchorRight:!0,title:(0,N.tZ)(K,{size:"xs",icon:(0,N.tZ)(j.YR,{"data-test-id":"trends-item-action",size:"xs"}),"aria-label":(0,w.t)("Actions")}),children:[(0,N.tZ)(y.Z,{onClick:()=>O(u,h,F,n.LESS_THAN_EQUALS,o,f,Z.project),children:(0,N.tZ)(J,{children:(0,w.t)("Show ≤ %s",M)})}),(0,N.tZ)(y.Z,{onClick:()=>O(u,h,F,n.GREATER_THAN_EQUALS,o,f,Z.project),children:(0,N.tZ)(J,{children:(0,w.t)("Show ≥ %s",M)})}),(0,N.tZ)(y.Z,{onClick:()=>function(e,t){const r=(0,R.ro)(e.query.query),n=new D.MY(r??"");n.addFilterValues("!transaction",[t]);const o=n.formatString();a.browserHistory.push({pathname:e.pathname,query:{...e.query,query:String(o).trim()}})}(u,t.transaction),children:(0,N.tZ)(J,{children:(0,w.t)("Hide from list")})})]}),(0,N.BX)(oe,{children:[b&&(0,N.tZ)(_.u,{title:t.project,children:(0,N.tZ)(g.Z,{avatarSize:16,project:b,hideName:!0})}),(0,N.tZ)(X,{...e})]}),(0,N.tZ)(ie,{color:v,children:(0,N.tZ)(H,{...e})})]})}!function(e){e.GREATER_THAN_EQUALS=">=",e.LESS_THAN_EQUALS="<="}(n||(n={})),B.displayName="ChangedTransactions",V.displayName="TrendsListItem";const X=e=>{let{transaction:t}=e;const{fromSeconds:r,toSeconds:n,showDigits:o}=(0,A.Kt)(t.aggregate_range_1,t.aggregate_range_2);return(0,N.BX)(se,{children:[(0,N.tZ)(p.Z,{seconds:r,fixedDigits:o?1:0,abbreviation:!0}),(0,N.tZ)(le,{direction:"right",size:"xs"}),(0,N.tZ)(p.Z,{seconds:n,fixedDigits:o?1:0,abbreviation:!0})]})};X.displayName="CompareDurations";const H=e=>{let{transaction:t,trendChangeType:r}=e;const{seconds:n,fixedDigits:o,changeLabel:s}=(0,A.wx)(t.trend_difference,r);return(0,N.BX)("span",{children:[(0,N.tZ)(p.Z,{seconds:n,fixedDigits:o,abbreviation:!0})," ",s]})};H.displayName="ValueDelta";const Q=e=>{const{organization:t,trendView:r,transaction:n,projects:o,currentTrendFunction:s,currentTrendColumn:a}=e,i=r.clone(),d=(0,A._H)(n,o),l=(0,L.e1)({orgSlug:t.slug,transaction:String(n.transaction),query:i.generateQueryStringObject(),projectID:d,display:L.DC.TREND,trendFunction:s,trendColumn:a});return(0,N.tZ)(ne,{to:l,"data-test-id":"item-transaction-name",children:n.transaction})};Q.displayName="TransactionSummaryLink";const G=(0,o.Z)("div",{target:"efd374915"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),U=(0,o.Z)(Z.s_,{target:"efd374914"})({name:"154zghl",styles:"margin:0;flex-grow:1"}),Y=(0,o.Z)("div",{target:"efd374913"})("padding:",(0,C.D)(3),";"),W=(0,o.Z)(d.ws,{target:"efd374912"})("border-radius:",(e=>e.theme.borderRadius),";margin:",(0,C.D)(2)," ",(0,C.D)(3),";"),K=(0,o.Z)(i.zx,{target:"efd374911"})({name:"1989ovb",styles:"vertical-align:middle"}),J=(0,o.Z)("div",{target:"efd374910"})("white-space:nowrap;color:",(e=>e.theme.textColor),";");J.defaultProps={"data-test-id":"menu-action"};const ee=(0,o.Z)(u.Z,{target:"efd37499"})({name:"1t1oqhu",styles:"min-height:300px;justify-content:center"}),te=(0,o.Z)("div",{target:"efd37498"})("display:grid;grid-template-columns:24px auto 100px 30px;grid-template-rows:repeat(2, auto);grid-column-gap:",(0,C.D)(1),";border-top:1px solid ",(e=>e.theme.border),";padding:",(0,C.D)(1)," ",(0,C.D)(2),";"),re=(0,o.Z)("div",{target:"efd37497"})("grid-row:1/3;input{cursor:pointer;}input:checked::after{background-color:",(e=>e.color),";}"),ne=(0,o.Z)(h.Z,{target:"efd37496"})("font-size:",(e=>e.theme.fontSizeMedium),";margin-right:",(0,C.D)(1),";",(e=>e.theme.overflowEllipsis),";"),oe=(0,o.Z)("div",{target:"efd37495"})("display:flex;align-items:center;font-size:",(e=>e.theme.fontSizeSmall),";"),se=(0,o.Z)("span",{target:"efd37494"})("color:",(e=>e.theme.gray300),";margin:0 ",(0,C.D)(1),";"),ae=(0,o.Z)("div",{target:"efd37493"})("text-align:right;font-size:",(e=>e.theme.fontSizeMedium),";"),ie=(0,o.Z)("div",{target:"efd37492"})("color:",(e=>e.color),";text-align:right;font-size:",(e=>e.theme.fontSizeSmall),";"),de=(0,o.Z)("div",{target:"efd37491"})({name:"zigog8",styles:"display:flex;flex-direction:column;align-items:center"}),le=(0,o.Z)(j.CC,{target:"efd37490"})("margin:0 ",(0,C.D)(1),";"),ce=(0,k.Z)((0,q.Z)(B))},"./app/views/performance/trends/chart.tsx":(e,t,r)=>{r.d(t,{Z:()=>_,k:()=>S}),r("../node_modules/core-js/modules/es.array.push.js");var n=r("../node_modules/react-router/es/index.js"),o=r("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),s=r("./app/components/charts/chartZoom.tsx"),a=r("./app/components/charts/lineChart.tsx"),i=r("./app/components/charts/transitionChart.tsx"),d=r("./app/components/charts/transparentLoadingMask.tsx"),l=r("./app/components/organizations/pageFilters/parse.tsx"),c=r("./app/locale.tsx"),p=r("./app/utils/dates.tsx"),u=r("./app/utils/discover/charts.tsx"),m=r("./app/utils/discover/fields.tsx"),g=r("./app/utils/getDynamicText.tsx"),h=r("./app/utils/queryString.tsx"),f=r("./app/utils/useLocation.tsx"),y=r("./app/utils/useRouter.tsx"),x=r("./app/views/performance/trends/utils.tsx"),Z=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function v(e){return{right:10,top:0,itemGap:12,align:"left",data:[{name:"Baseline",icon:"path://M180 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z, M810 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40zm, M1440 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z"},{name:"Releases"},{name:e}]}}function S(e){let{trendChangeType:t,statsPeriod:r,transaction:S,statsData:_,isLoading:j,start:w,end:C,trendFunctionField:b,disableXAxis:E,disableLegend:T,grid:R,height:D,projects:P,project:q}=e;const k=(0,f.T)(),L=(0,y.Z)(),I=(0,o.u)(),z=e=>{const{selected:r}=e,o=Object.keys(r).filter((e=>!r[e])),s={...k.query};s[(0,x.P4)(t)]=o;const a={...k,query:s};n.browserHistory.push(a)},A=x.es[t||""],N=(_&&S?.project&&S?.transaction?_[[S.project,S.transaction].join(",")]:void 0)?.data??[],F=(0,x.CE)(k,b),$=(0,x.IO)(k,P,q),M=(0,x.ed)(F.field,$.column),O=function(e,t){return[{seriesName:t||"Current",data:e.map((e=>{let[t,r]=e;return{name:1e3*t,value:r.reduce(((e,t)=>{let{count:r}=t;return e+r}),0)}}))}]}(N,M),{smoothedResults:B,minValue:V,maxValue:X}=(0,x.vq)(O,M),H=w?(0,p.hC)(w):null,Q=C?(0,p.hC)(C):null,{utc:G}=(0,l.fK)(k.query),U=(0,h.qP)(k.query[(0,x.P4)(t)]).reduce(((e,t)=>(e[t]=!1,e)),{}),Y=T?{show:!1}:{...v(M),selected:U},W=j,K=j,J=Math.max(X,S?.aggregate_range_2||0,S?.aggregate_range_1||0),ee=Math.min(V,S?.aggregate_range_1||Number.MAX_SAFE_INTEGER,S?.aggregate_range_2||Number.MAX_SAFE_INTEGER),te=B?B.map((e=>({...e,color:A.default,lineStyle:{opacity:1}}))):[],re=function(e,t,r,n){if(!(n&&t.length&&t[0].data&&t[0].data.length))return[];const o=parseInt(t[0].data[0].name,10),s=parseInt(t[0].data.slice(-1)[0].name,10);if(s<o)return[];const a={data:[],color:e.textColor,markLine:{data:[],label:{},lineStyle:{color:e.textColor,type:"dashed",width:1},symbol:["none","none"],tooltip:{show:!1}},seriesName:"Baseline"},i={fontSize:11,show:!0,color:e.textColor,silent:!0},d={...a,markLine:{...a.markLine},seriesName:"Baseline"},l={...a,markLine:{...a.markLine},seriesName:"Baseline"},p={...a,markLine:{...a.markLine},seriesName:"Period split"},m=.5*(s-o)+o;return d.markLine.data=[[{value:"Past",coord:[o,n.aggregate_range_1]},{coord:[m,n.aggregate_range_1]}]],d.markLine.tooltip={formatter:()=>['<div class="tooltip-series tooltip-series-solo">',"<div>",`<span class="tooltip-label"><strong>${(0,c.t)("Past Baseline")}</strong></span>`,(0,u.CX)(n.aggregate_range_1,"duration"),"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")},l.markLine.data=[[{value:"Present",coord:[m,n.aggregate_range_2]},{coord:[s,n.aggregate_range_2]}]],l.markLine.tooltip={formatter:()=>['<div class="tooltip-series tooltip-series-solo">',"<div>",`<span class="tooltip-label"><strong>${(0,c.t)("Present Baseline")}</strong></span>`,(0,u.CX)(n.aggregate_range_2,"duration"),"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")},p.markLine={data:[{xAxis:m}],label:{show:!1},lineStyle:{color:e.textColor,type:"solid",width:2},symbol:["none","none"],tooltip:{show:!1},silent:!0},d.markLine.label={...i,formatter:"Past",position:"insideStartBottom"},l.markLine.label={...i,formatter:"Present",position:"insideEndBottom"},[d,l,p]}(I,B||[],0,S),ne=.1*(J-ee),oe=[...te,...re],se=(0,u.Xp)(oe),ae={tooltip:{valueFormatter:(e,t)=>(0,u.CX)(e,(0,m.Px)(t))},yAxis:{min:Math.max(0,ee-ne),max:J+ne,minInterval:se,axisLabel:{color:I.chartLabel,formatter:e=>(0,u.gu)(e,"duration",void 0,se)}}};return(0,Z.tZ)(s.Z,{router:L,period:r,start:H,end:Q,utc:"true"===G,children:e=>(0,Z.BX)(i.Z,{loading:W,reloading:K,children:[(0,Z.tZ)(d.Z,{visible:K}),(0,g.Z)({value:(0,Z.tZ)(a.w,{height:D,...e,...ae,onLegendSelectChanged:z,series:oe,seriesOptions:{showSymbol:!1},legend:Y,toolBox:{show:!1},grid:R??{left:"10px",right:"10px",top:"40px",bottom:"0px"},xAxis:E?{show:!1}:void 0}),fixed:"Duration Chart"})]})})}S.displayName="Chart";const _=S}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_trends_changedTransactions_tsx.f23d9e83fbbd2285880a40412313f5bc.js.map