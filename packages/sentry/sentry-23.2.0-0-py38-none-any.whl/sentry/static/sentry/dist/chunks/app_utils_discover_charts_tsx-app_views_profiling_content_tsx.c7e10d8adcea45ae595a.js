"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_discover_charts_tsx-app_views_profiling_content_tsx"],{"./app/components/onboardingPanel.tsx":(e,t,n)=>{n.d(t,{Z:()=>d});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=n("./app/components/panels/index.tsx"),o=n("./app/styles/space.tsx"),s=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{image:t,children:n,...r}=e;return(0,s.tZ)(i.s_,{...r,children:(0,s.BX)(l,{children:[t?(0,s.tZ)(p,{children:t}):null,(0,s.tZ)(c,{centered:!t,children:n})]})})}a.displayName="OnboardingPanel";const l=(0,r.Z)("div",{target:"euclof22"})("padding:",(0,o.D)(3),";position:relative;@media (min-width: ",(e=>e.theme.breakpoints.small),"){display:flex;align-items:center;flex-direction:row;justify-content:center;flex-wrap:wrap;min-height:300px;max-width:1000px;margin:0 auto;}@media (min-width: ",(e=>e.theme.breakpoints.medium),"){min-height:350px;}"),c=(0,r.Z)("div",{target:"euclof21"})("z-index:1;",(e=>e.centered?"text-align: center;":"")," ",(e=>e.centered?"max-width: 600px;":""),"@media (min-width: ",(e=>e.theme.breakpoints.small),"){flex:2;}"),p=(0,r.Z)(c,{target:"euclof20"})("position:relative;min-height:100px;max-width:300px;margin:",(0,o.D)(2)," auto;@media (min-width: ",(e=>e.theme.breakpoints.small),"){flex:1;margin:",(0,o.D)(3),";max-width:auto;}"),d=a},"./app/utils/discover/charts.tsx":(e,t,n)=>{n.d(t,{CX:()=>s,Xp:()=>d,gu:()=>l,x1:()=>c});var r=n("./app/locale.tsx"),i=n("./app/utils.tsx"),o=n("./app/utils/formatters.tsx");function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number";return(0,i.ri)(e)?a(e,t):"—"}function a(e,t){if(!(0,i.ri)(e))return"—";switch(t){case"integer":case"number":return e.toLocaleString();case"percentage":return(0,o.rl)(e,2);case"duration":return(0,o.g9)(e/1e3,2,!0);case"size":return(0,i.F)(e);default:return e.toString()}}function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return c(e,t,n,r)}function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;switch(t){case"integer":case"number":return n?(0,o.Du)(e):e.toLocaleString();case"percentage":return(0,o.rl)(e,0);case"duration":return p(e,r);case"size":return(0,i.F)(e,0);default:return e.toString()}}function p(e,t){if(t??=u(e),0===e)return"0";switch(t){case o.ps:{const t=(e/o.ps).toFixed(0);return(0,r.t)("%swk",t)}case o.x4:{const t=(e/o.x4).toFixed(0);return(0,r.t)("%sd",t)}case o.kr:{const t=(e/o.kr).toFixed(0);return(0,r.t)("%shr",t)}case o.EB:{const t=(e/o.EB).toFixed(0);return(0,r.t)("%smin",t)}case o.sh:{const t=(e/o.sh).toFixed(0);return(0,r.t)("%ss",t)}default:const t=e.toFixed(0);return(0,r.t)("%sms",t)}}function d(e,t){let n=0;const r=function(e,t){let n;if(e[0]?.data){let r,i=e[0];e.forEach(((n,o)=>{let{seriesName:s,data:a}=n;!1!==t?.selected?.[s]&&a.length&&(i=e[o],r??=e[o])})),r?.data&&(n={max:Math.max(...r.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e))),min:Math.min(...i.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e)))})}return n}(e,t);if(r){const e=(r.max+r.min)/2;n=u((r.max-r.min)/5),(e/n).toFixed(0).length>6&&(n=u(e))}return n}function u(e){return e>=o.ps?o.ps:e>=o.x4?o.x4:e>=o.kr?o.kr:e>=o.EB?o.EB:e>=o.sh?o.sh:1}},"./app/utils/profiling/routes.tsx":(e,t,n)=>{function r(e){let{orgSlug:t,projectSlug:n,profileId:r}=e;return`/organizations/${t}/profiling/profile/${n}/${r}/flamechart/`}function i(e){let{orgSlug:t,query:n}=e;const r=function(e){let{orgSlug:t}=e;return`/organizations/${t}/profiling/`}({orgSlug:t});return{pathname:r,query:{...n}}}function o(e){let{orgSlug:t,projectSlug:n,transaction:r,query:i}=e;const o=function(e){let{orgSlug:t,projectSlug:n}=e;return`/organizations/${t}/profiling/summary/${n}/`}({orgSlug:t,projectSlug:n});return{pathname:o,query:{...i,transaction:r}}}function s(e){let{orgSlug:t,projectSlug:n,profileId:i,query:o}=e;return{pathname:r({orgSlug:t,projectSlug:n,profileId:i}),query:{...o}}}function a(e){let{orgSlug:t,projectSlug:n,profileId:r,frameName:i,framePackage:o,query:a}=e;return s({orgSlug:t,projectSlug:n,profileId:r,query:{...a,frameName:i,framePackage:o}})}function l(e){let{orgSlug:t,projectSlug:n,profileId:r,query:i}=e;const o=function(e){let{orgSlug:t,projectSlug:n,profileId:r}=e;return`/organizations/${t}/profiling/profile/${n}/${r}/details/`}({orgSlug:t,projectSlug:n,profileId:r});return{pathname:o,query:{...i}}}n.d(t,{O$:()=>r,Qy:()=>l,R0:()=>o,TH:()=>s,XR:()=>i,u$:()=>a})},"./app/views/profiling/content.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>me});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/react/index.js")),o=n("../node_modules/react-router/es/index.js"),s=n("./app/components/alert.tsx"),a=n("./app/components/button.tsx"),l=n("./app/components/buttonBar.tsx"),c=n("./app/components/datePageFilter.tsx"),p=n("./app/components/environmentPageFilter.tsx"),d=n("./app/components/featureBadge.tsx"),u=n("./app/components/layouts/thirds.tsx"),g=n("./app/components/organizations/pageFilterBar.tsx"),m=n("./app/components/organizations/pageFilters/container.tsx"),f=n("./app/components/pageHeadingQuestionTooltip.tsx"),h=n("./app/components/pagination.tsx"),x=n("./app/components/profiling/profileEventsTable.tsx"),Z=n("./app/components/projectPageFilter.tsx"),y=n("./app/components/sentryDocumentTitle.tsx"),w=n("./app/components/sidebar/types.tsx"),b=n("./app/components/smartSearchBar/index.tsx"),v=n("./app/constants/index.tsx"),S=n("./app/constants/pageFilters.tsx"),j=n("./app/locale.tsx"),k=n("./app/stores/sidebarPanelStore.tsx"),z=n("./app/styles/space.tsx"),_=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),P=n("./app/utils/profiling/hooks/useProfileEvents.tsx"),q=n("./app/utils/profiling/hooks/useProfileFilters.tsx"),B=n("./app/utils/queryString.tsx"),X=n("./app/utils/useOrganization.tsx"),F=n("./app/utils/usePageFilters.tsx"),D=n("./app/utils/useProjects.tsx"),T=n("./app/views/profiling/landing/profileCharts.tsx"),C=(n("../node_modules/core-js/modules/es.error.cause.js"),n("../node_modules/platformicons/build/index.js")),I=n("./app/components/emptyStateWarning.tsx"),E=n("./app/components/links/link.tsx"),L=n("./app/components/loadingIndicator.tsx"),$=n("./app/components/panels/index.tsx"),M=n("./app/components/performanceDuration.tsx"),N=n("./app/components/profiling/flex.tsx"),O=n("./app/components/profiling/functionsMiniGrid.tsx"),A=n("./app/components/profiling/textTruncateOverflow.tsx"),Q=n("./app/icons/index.tsx"),R=n("./app/utils/profiling/hooks/useProfilingTransactionQuickSummary.tsx"),H=n("./app/utils/profiling/routes.tsx"),G=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const U=["transaction","project.id","last_seen()","p95()","count()"];function W(){const e=(0,P.GP)({fields:U,sort:{key:"p95()",order:"desc"},limit:3,query:"count():>3",referrer:"api.profiling.landing-slowest-transaction-panel"}),[t,n]=(0,i.useState)(null),r=(0,i.useMemo)((()=>e.data?.[0].data??[]),[e.data]),o=(0,i.useMemo)((()=>r.map((e=>e.transaction))),[r]);if(o.length>0&&!o.includes(t)){const e=o[0];n(e)}const{isLoading:s}=e,a=!s&&r&&r.length>0;return(0,G.tZ)(V,{children:(0,G.BX)(N.k,{column:!0,h:"100%",children:[(0,G.BX)(N.k,{column:!0,p:(0,z.D)(1.5),children:[(0,G.tZ)(Y,{children:(0,j.t)("Slowest Transactions")}),(0,G.tZ)(ee,{children:(0,j.t)("Slowest transactions that could use some optimization.")})]}),(s||!a)&&(0,G.tZ)(N.k,{column:!0,align:"center",justify:"center",h:"100%",children:s?(0,G.tZ)(L.Z,{}):!a&&(0,G.tZ)(N.k.Item,{children:(0,G.BX)(I.Z,{children:[(0,G.tZ)("p",{children:(0,j.t)("No results found")}),(0,G.tZ)(ie,{children:(0,j.t)("Transactions may not be listed due to the filters above or a low number of profiles.")})]})})}),r?.map((e=>(0,G.tZ)(J,{transaction:e,open:e.transaction===t,onOpen:()=>n(e.transaction)},e.transaction)))]})})}function J(e){let{transaction:t,open:n,onOpen:r}=e;const o=(0,X.Z)(),s=(0,D.Z)(),l=(0,i.useMemo)((()=>s.projects.find((e=>e.id===String(t["project.id"])))),[s.projects,t]);if(!l)throw Error("Cannot find project for slowest transaction");return(0,G.BX)(te,{children:[(0,G.BX)(N.k,{justify:"space-between",gap:(0,z.D)(1),children:[(0,G.tZ)(C.v,{platform:l?.platform}),(0,G.tZ)(N.k.Item,{grow:1,children:(0,G.tZ)(E.Z,{to:(0,H.R0)({orgSlug:o.slug,projectSlug:l?.slug,transaction:t.transaction}),onClick:()=>{(0,_.Z)("profiling_views.go_to_transaction",{source:"slowest_transaction_panel",organization:o})},children:(0,G.tZ)(A.W,{children:t.transaction})})}),(0,G.tZ)(M.Z,{nanoseconds:t["p95()"],abbreviation:!0}),(0,G.tZ)(a.zx,{borderless:!0,size:"zero",onClick:r,children:(0,G.tZ)(Q.g6,{direction:n?"up":"down",size:"xs"})})]}),(0,G.tZ)(ne,{style:{height:n?160:0},children:n&&l&&(0,G.tZ)(K,{transaction:String(t.transaction),organization:o,project:l})})]},t.transaction)}function K(e){const{transaction:t,project:n,organization:r}=e,{functionsQuery:i,functions:o}=(0,R.d)({transaction:t,project:n,referrer:"api.profiling.landing-slowest-transaction-panel",skipLatestProfile:!0,skipSlowestProfile:!0});return i.isLoading?(0,G.tZ)(O.q8,{}):!o||o&&0===o.length?(0,G.tZ)(O.EA,{}):(0,G.tZ)(re,{children:(0,G.tZ)(O.nL,{functions:o,organization:r,project:n,onLinkClick:()=>(0,_.Z)("profiling_views.go_to_flamegraph",{organization:r,source:"slowest_transaction_panel"})})})}W.displayName="ProfilingSlowestTransactionsPanel",J.displayName="SlowestTransactionPanelItem",K.displayName="PanelItemFunctionsMiniGrid";const V=(0,r.Z)($.s_,{target:"e6nc0wg6"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),Y=(0,r.Z)("span",{target:"e6nc0wg5"})("font-size:",(e=>e.theme.text.cardTitle.fontSize),";font-weight:",(e=>e.theme.text.cardTitle.fontWeight),";line-height:",(e=>e.theme.text.cardTitle.lineHeight),";"),ee=(0,r.Z)("span",{target:"e6nc0wg4"})("color:",(e=>e.theme.subText),";"),te=(0,r.Z)("div",{target:"e6nc0wg3"})("padding:",(0,z.D)(1)," ",(0,z.D)(1.5),";border-top:1px solid ",(e=>e.theme.border),";"),ne=(0,r.Z)("div",{target:"e6nc0wg2"})({name:"1kt23o3",styles:"transition:height 0.1s ease;width:100%;overflow:hidden"}),re=(0,r.Z)("div",{target:"e6nc0wg1"})("padding-top:",(0,z.D)(1.5),";"),ie=(0,r.Z)("div",{target:"e6nc0wg0"})("font-size:",(e=>e.theme.fontSizeMedium),";");var oe=n("./images/spot/performance-empty-state.svg"),se=n("./app/components/onboardingPanel.tsx");function ae(e){return(0,G.BX)(se.Z,{image:(0,G.tZ)(le,{src:oe}),children:[(0,G.tZ)("h3",{children:(0,j.t)("Function level insights")}),(0,G.tZ)("p",{children:(0,j.t)("Discover slow-to-execute or resource intensive functions within your application")}),(0,G.tZ)(ce,{gap:1,children:e.children})]})}ae.displayName="ProfilingOnboardingPanel";const le=(0,r.Z)("img",{target:"eb17yy31"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){user-select:none;position:absolute;top:0;bottom:0;width:220px;margin-top:auto;margin-bottom:auto;transform:translateX(-50%);left:50%;}@media (min-width: ",(e=>e.theme.breakpoints.large),"){transform:translateX(-30%);width:380px;min-width:380px;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){transform:translateX(-30%);width:420px;min-width:420px;}"),ce=(0,r.Z)(l.ZP,{target:"eb17yy30"})({name:"vpj881",styles:"grid-template-columns:repeat(auto-fit, minmax(130px, max-content))"});function pe(e){let{location:t}=e;const n=(0,X.Z)(),{selection:r}=(0,F.Z)(),z=(0,B.ro)(t.query.cursor),C=(0,B.ro)(t.query.query,""),I=(0,P.kq)((0,B.ro)(t.query.sort),de,{key:"p99()",order:"desc"}),E=(0,q.J)({query:"",selection:r}),{projects:L}=(0,D.Z)(),$=(0,P.GP)({cursor:z,fields:de,query:C,sort:I,referrer:"api.profiling.landing-table"}),M="error"===$.status?(0,P.Z)($.error):null;(0,i.useEffect)((()=>{(0,_.Z)("profiling_views.landing",{organization:n})}),[n]);const N=(0,i.useCallback)((e=>{o.browserHistory.push({...t,query:{...t.query,cursor:void 0,query:e||void 0}})}),[t]),O=(0,i.useCallback)((()=>{(0,_.Z)("profiling_views.onboarding",{organization:n}),k.Z.activatePanel(w.z.ProfilingOnboarding)}),[n]),A=(0,i.useMemo)((()=>{if(0===r.projects.length||r.projects[0]===S.mP)return L.every((e=>!e.hasProfiles));const e=new Set(L.filter((e=>e.hasProfiles)).map((e=>e.id)));return r.projects.every((t=>!e.has(String(t))))}),[r.projects,L]),Q=n.features.includes("profiling-dashboard-redesign");return(0,G.tZ)(y.Z,{title:(0,j.t)("Profiling"),orgSlug:n.slug,children:(0,G.tZ)(m.Z,{children:(0,G.BX)(u.T3,{children:[(0,G.BX)(u.h4,{children:[(0,G.tZ)(u.oB,{children:(0,G.BX)(u.Dx,{children:[(0,j.t)("Profiling"),(0,G.tZ)(f.u,{docsUrl:"https://docs.sentry.io/product/profiling/",title:(0,j.t)("A view of how your application performs in a variety of environments, based off of the performance profiles collected from real user devices in production.")}),(0,G.tZ)(d.Z,{type:"beta"})]})}),(0,G.tZ)(u.kP,{children:(0,G.BX)(l.ZP,{gap:1,children:[(0,G.tZ)(a.zx,{size:"sm",onClick:O,children:(0,j.t)("Set Up Profiling")}),(0,G.tZ)(a.zx,{size:"sm",priority:"primary",href:"https://discord.gg/zrMjKA4Vnz",external:!0,onClick:()=>{(0,_.Z)("profiling_views.visit_discord_channel",{organization:n})},children:(0,j.t)("Join Discord")})]})})]}),(0,G.tZ)(u.uT,{children:(0,G.BX)(u.or,{fullWidth:!0,children:[M&&(0,G.tZ)(s.bZ,{type:"error",showIcon:!0,children:M}),(0,G.BX)(ue,{children:[(0,G.BX)(g.Z,{condensed:!0,children:[(0,G.tZ)(Z.Z,{}),(0,G.tZ)(p.Z,{}),(0,G.tZ)(c.Z,{alignDropdown:"left"})]}),(0,G.tZ)(b.Z,{organization:n,hasRecentSearches:!0,searchSource:"profile_landing",supportedTags:E,query:C,onSearch:N,maxQueryLength:v.dI})]}),A?(0,G.BX)(ae,{children:[(0,G.tZ)(a.zx,{onClick:O,priority:"primary",children:(0,j.t)("Set Up Profiling")}),(0,G.tZ)(a.zx,{href:"https://docs.sentry.io/product/profiling/",external:!0,children:(0,j.t)("Read Docs")})]}):(0,G.BX)(i.Fragment,{children:[Q?(0,G.BX)(ge,{children:[(0,G.tZ)(W,{}),(0,G.tZ)(T.A,{query:C,selection:r,hideCount:Q})]}):(0,G.tZ)(T.A,{query:C,selection:r,hideCount:Q}),(0,G.tZ)(x.Q,{columns:de.slice(),data:"success"===$.status?$.data[0]:null,error:"error"===$.status?(0,j.t)("Unable to load profiles"):null,isLoading:"loading"===$.status,sort:I,sortableColumns:new Set(de)}),(0,G.tZ)(h.Z,{pageLinks:"success"===$.status?$.data?.[2]?.getResponseHeader("Link")??null:null})]})]})})]})})})}pe.displayName="ProfilingContent";const de=["transaction","project.id","last_seen()","p75()","p95()","p99()","count()"],ue=(0,r.Z)("div",{target:"emzmz061"})("display:grid;gap:",(0,z.D)(2),";grid-template-columns:min-content auto;margin-bottom:",(0,z.D)(2),";"),ge=(0,r.Z)("div",{target:"emzmz060"})("display:grid;grid-template-columns:minmax(0, 1fr) 1fr;gap:",(0,z.D)(2),";@media (max-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:minmax(0, 1fr);}"),me=pe},"./images/spot/performance-empty-state.svg":(e,t,n)=>{e.exports=n.p+"assets/performance-empty-state.8da0e336a4e99ef87edb.svg"}}]);
//# sourceMappingURL=../sourcemaps/app_utils_discover_charts_tsx-app_views_profiling_content_tsx.301e6c1a4495bef6ed3a1128b5b9b48f.js.map