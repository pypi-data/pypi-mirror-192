"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_group_tagFacets_index_tsx-app_views_performance_transactionSummary_utils_tsx"],{"./app/components/group/tagFacets/index.tsx":(e,t,r)=>{r.d(t,{$c:()=>x,Ix:()=>S,Pf:()=>v,Rj:()=>Z,V6:()=>b,WN:()=>k,ZP:()=>j});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/react/index.js")),o=r("../node_modules/lodash/keyBy.js"),i=r.n(o),s=r("./app/components/placeholder.tsx"),l=r("./app/components/sidebarSection.tsx"),u=r("./app/locale.tsx"),p=r("./app/styles/space.tsx"),c=r("./app/utils/formatters.tsx"),g=r("./app/utils/queryString.tsx"),d=r("./app/utils/useApi.tsx"),m=r("./app/utils/useLocation.tsx"),h=r("./app/utils/useOrganization.tsx"),f=r("./app/components/group/tagFacets/tagFacetsDistributionMeter.tsx"),y=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const x=["device","os","release","environment","transaction"],Z=["browser","transaction","release","url","environment"],v=["transaction","url","user","release","organization.slug"],b=["transaction","environment","release"];function S(e){const t={};return Object.keys(e).forEach((r=>{t[r]="release"===r?{...e[r],topValues:e[r].topValues.map((e=>({...e,name:(0,c.ko)(e.name)})))}:"device"===r?{...e[r],topValues:e[r].topValues.map((e=>({...e,name:e.readable??e.name})))}:e[r]})),t}function j(e){let{tagKeys:t,environments:r,groupId:n,title:o,tagFormatter:p,project:c}=e;const[g,m]=(0,a.useState)({tagsData:{},loading:!0}),f=(0,h.Z)(),x=(0,d.Z)();(0,a.useEffect)((()=>{m({...g,loading:!0}),(async()=>{const e=await x.requestPromise(`/issues/${n}/tags/`,{query:{environment:r.map((e=>e.name)),readable:!0,limit:4}}),t=i()(e,"key");m({...g,tagsData:t,loading:!1})})().catch((()=>{m({...g,tagsData:{},loading:!1})}))}),[x,JSON.stringify(r),n,t]);const Z=p?.(g.tagsData)??g.tagsData,v=t.filter((e=>Object.keys(Z).includes(e))),b=Object.keys(Z).filter((e=>!t.includes(e))).sort();return(0,y.tZ)(l.Eq,{children:g.loading||!Z?(0,y.BX)(D,{children:[(0,y.tZ)(s.Z,{height:"40px"}),(0,y.tZ)(s.Z,{height:"40px"}),(0,y.tZ)(s.Z,{height:"40px"}),(0,y.tZ)(s.Z,{height:"40px"})]}):(0,y.BX)(a.Fragment,{children:[(0,y.tZ)(l.Dx,{children:o||(0,u.t)("All Tags")}),0===Object.keys(Z).length?(0,y.tZ)(z,{"data-test-id":"no-tags",children:r.length?(0,u.t)("No tags found in the selected environments"):(0,u.t)("No tags found")}):(0,y.BX)($,{children:[(0,y.tZ)("span",{"data-test-id":"top-distribution-wrapper",children:(0,y.tZ)(w,{groupId:n,organization:f,project:c,tagKeys:v,tagsData:Z,expandFirstTag:!0})}),(0,y.tZ)(w,{groupId:n,organization:f,project:c,tagKeys:b,tagsData:Z})]})]})})}function w(e){let{groupId:t,organization:r,project:n,tagKeys:a,tagsData:o,expandFirstTag:i}=e;const s=(0,m.T)(),l={...s.query};return(0,y.tZ)(k,{children:a.map(((e,a)=>{const u=o[e],p=u?u.topValues:[],c=u?u.totalValues:0,d=`/organizations/${r.slug}/issues/${t}/tags/${e}/?referrer=tag-distribution-meter`,m=`/organizations/${r.slug}/issues/${t}/events/`,h=p?p.map((t=>{const r={...s,query:{...l,query:(0,g.os)(null,e,t.value)},pathname:m};return{...t,url:r}})):[];return(0,y.tZ)("li",{"aria-label":e,children:(0,y.tZ)(f.Z,{title:e,totalValues:c,segments:h,onTagClick:()=>{},project:n,expandByDefault:i&&0===a,otherUrl:d})},e)}))})}j.displayName="TagFacets",w.displayName="TagFacetsDistributionMeterWrapper";const D=(0,n.Z)("div",{target:"e1dti8s93"})("display:grid;gap:",(0,p.D)(1),";grid-auto-flow:row;"),$=(0,n.Z)("div",{target:"e1dti8s92"})("margin-top:",(0,p.D)(2),";"),z=(0,n.Z)("p",{target:"e1dti8s91"})("margin-top:",(0,p.D)(.5),";"),k=(0,n.Z)("ol",{target:"e1dti8s90"})("list-style:none;padding:0;margin:0 0 ",(0,p.D)(2),";")},"./app/components/group/tagFacets/tagFacetsDistributionMeter.tsx":(e,t,r)=>{r.d(t,{Z:()=>D});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(r("../node_modules/core-js/modules/es.array.push.js"),r("../node_modules/react/index.js")),o=r("../node_modules/@emotion/is-prop-valid/dist/is-prop-valid.browser.esm.js"),i=r("../node_modules/framer-motion/dist/es/render/dom/motion.mjs"),s=r("../node_modules/lodash/debounce.js"),l=r.n(s),u=r("./app/components/button.tsx"),p=r("./app/components/links/link.tsx"),c=r("./app/components/tooltip.tsx"),g=r("./app/icons/iconChevron.tsx"),d=r("./app/locale.tsx"),m=r("./app/styles/space.tsx"),h=r("./app/utils.tsx"),f=r("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),y=r("./app/utils/platform.tsx"),x=r("./app/utils/queryString.tsx"),Z=r("./app/utils/useLocation.tsx"),v=r("./app/utils/useOrganization.tsx"),b=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const S=["#402A65","#694D99","#9A81C4","#BBA6DF","#EAE2F8"],j=l()((e=>{let{tag:t,value:r,platform:n,is_mobile:a,organization:o}=e;(0,f.Z)("issue_group_details.tags.bar.hovered",{tag:t,value:r,platform:n,is_mobile:a,organization:o})}),300);function w(e){let{colors:t=S,segments:r,title:n,totalValues:o,onTagClick:i,project:s,expandByDefault:l,otherUrl:u}=e;const m=(0,Z.T)(),w=(0,v.Z)(),[D,V]=(0,a.useState)(!!l),[L,X]=(0,a.useState)(null),U=r.slice(0,4),K=U.reduce(((e,t)=>e+t.count),0),W=K<o,Q=(0,x.u3)(m.query.query,n,U.map((e=>{let{value:t}=e;return t}))),Y={...m,query:{...m.query,query:Q}};return W&&U.push({isOther:!0,name:(0,d.t)("Other"),value:"other",count:o-K,url:u??Y??""}),(0,b.tZ)($,{children:(0,b.BX)("details",{open:!0,"aria-expanded":D,onClick:e=>e.preventDefault(),children:[(0,b.tZ)(B,{children:(0,b.BX)(z,{clickable:!0,onClick:()=>V(!D),children:[!Array.isArray(r)||r.length<=0?(0,b.tZ)(_,{children:(0,b.tZ)(q,{children:n})}):(0,b.BX)(_,{children:[(0,b.tZ)(q,{children:n}),(0,b.tZ)(c.ZP,{skipWrapper:!0,delay:800,title:U[0].name||(0,d.t)("n/a"),children:(0,b.tZ)(T,{children:U[0].name||(0,d.t)("n/a")})}),(0,b.tZ)(P,{borderless:!0,size:"zero",icon:(0,b.tZ)(g.g,{direction:D?"up":"down",size:"xs"}),"aria-label":(0,d.t)("%s %s tag distribution",D?"Collapse":"Expand",n)})]}),0===o?(0,b.tZ)(k,{children:(0,b.tZ)("p",{children:(0,d.t)("No recent data.")})}):(0,b.tZ)(k,{children:U.map(((e,r)=>{const a=(0,h.aQ)(e.count,o),l=Math.floor(a),u={index:r,onClick:()=>((0,f.Z)("issue_group_details.tags.bar.clicked",{tag:n,value:e.value,platform:s?.platform,is_mobile:(0,y.an)(s?.platform),organization:w}),i?.(n,e))};return(0,b.tZ)("div",{style:{width:a+"%"},onMouseOver:()=>{X(e),j({tag:n,value:e.value,platform:s?.platform,is_mobile:(0,y.an)(s?.platform),organization:w})},onMouseLeave:()=>X(null),children:e.isOther?(0,b.tZ)(F,{"aria-label":(0,d.t)("Other segment"),color:t[t.length-1]}):(0,b.tZ)(E,{"aria-label":`${e.value} ${(0,d.t)("segment")}`,color:t[r],...u,children:0===r&&l>6?`${l}%`:null})},e.isOther?"other":`segment-${e.value}`)}))})]})}),(0,b.tZ)(I,{expanded:D,animate:D?{height:"100%",opacity:1}:{height:"0",opacity:0},children:(0,b.tZ)(O,{children:U.map(((e,r)=>{const a=Math.floor((0,h.aQ)(e.count,o)),i=!!L&&L.value!==e.value,s=L?.value===e.value,l=e.isOther?(0,d.t)("Other %s tag values, %s of all events. View other tags.",n,`${a}%`):(0,d.t)("%s, %s, %s of all events. View events with this tag value.",n,e.value,`${a}%`);return(0,b.tZ)("li",{children:(0,b.tZ)(p.Z,{to:e.url,"aria-label":l,children:(0,b.BX)(C,{onMouseOver:()=>X(e),onMouseLeave:()=>X(null),children:[(0,b.tZ)(A,{color:t[e.isOther?t.length-1:r],focus:s}),(0,b.tZ)(c.ZP,{skipWrapper:!0,delay:800,title:e.name,children:(0,b.tZ)(M,{unfocus:i,children:e.name??(0,b.tZ)(R,{children:(0,d.t)("n/a")})})}),(0,b.tZ)(N,{children:`${a}%`})]})})},`segment-${e.name}-${r}`)}))})})]})})}w.displayName="TagFacetsDistributionMeter";const D=w,$=(0,n.Z)("div",{target:"e1g8texm16"})("margin-bottom:",(0,m.D)(2),";"),z=(0,n.Z)("span",{target:"e1g8texm15"})((e=>e.clickable?"cursor: pointer":null),";"),k=(0,n.Z)("div",{target:"e1g8texm14"})({name:"andpxo",styles:"display:flex;overflow:hidden"}),_=(0,n.Z)("div",{target:"e1g8texm13"})("display:flex;font-size:",(e=>e.theme.fontSizeMedium),";justify-content:space-between;margin-bottom:",(0,m.D)(.25),";line-height:1.1;"),q=(0,n.Z)("div",{target:"e1g8texm12"})("flex:none;color:",(e=>e.theme.textColor),";font-weight:bold;font-size:",(e=>e.theme.fontSizeMedium),";margin-right:",(0,m.D)(1),";align-self:center;"),T=(0,n.Z)("div",{target:"e1g8texm11"})((e=>e.theme.overflowEllipsis),";display:flex;color:",(e=>e.theme.gray300),";text-align:right;font-size:",(e=>e.theme.fontSizeMedium),";",(e=>e.theme.overflowEllipsis),";align-self:center;"),F=(0,n.Z)("span",{target:"e1g8texm10"})("display:block;width:100%;height:",(0,m.D)(2),";color:inherit;outline:none;background-color:",(e=>e.color),";"),E=(0,n.Z)("span",{shouldForwardProp:o.Z,target:"e1g8texm9"})("&:hover{color:",(e=>e.theme.white),";}display:block;width:100%;height:",(0,m.D)(2),";color:",(e=>e.theme.white),";outline:none;background-color:",(e=>e.color),";text-align:right;font-size:",(e=>e.theme.fontSizeExtraSmall),";padding:1px ",(0,m.D)(.5)," 0 0;"),I=(0,n.Z)(i.E.div,{shouldForwardProp:e=>"animate"===e||"expanded"!==e&&(0,o.Z)(e),target:"e1g8texm8"})("height:0;opacity:0;",(e=>e.expanded?"":"overflow: hidden;"),";"),O=(0,n.Z)("ol",{target:"e1g8texm7"})("list-style:none;padding:0;margin:",(0,m.D)(1)," 0;"),C=(0,n.Z)("div",{target:"e1g8texm6"})("display:flex;align-items:center;cursor:pointer;padding:",(0,m.D)(.5)," 0;"),A=(0,n.Z)("span",{target:"e1g8texm5"})("padding:0;position:relative;width:11px;height:11px;text-indent:-9999em;display:inline-block;border-radius:50%;flex-shrink:0;background-color:",(e=>e.color),";&:after{content:'';border-radius:50%;position:absolute;top:0;left:0;width:100%;height:100%;outline:",(e=>e.theme.gray100)," ",(0,m.D)(.5)," solid;opacity:",(e=>e.focus?"1":"0"),";transition:opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);}"),M=(0,n.Z)("span",{target:"e1g8texm4"})("font-size:",(e=>e.theme.fontSizeSmall),";margin-left:",(0,m.D)(1),";overflow:hidden;white-space:nowrap;text-overflow:ellipsis;transition:color 0.3s;color:",(e=>e.unfocus?e.theme.gray300:e.theme.gray400),";"),N=(0,n.Z)("span",{target:"e1g8texm3"})("font-size:",(e=>e.theme.fontSizeSmall),";margin-left:",(0,m.D)(1),";color:",(e=>e.theme.gray300),";text-align:right;flex-grow:1;"),P=(0,n.Z)(u.zx,{target:"e1g8texm2"})("color:",(e=>e.theme.gray300),";margin-left:",(0,m.D)(.5),";"),R=(0,n.Z)("span",{target:"e1g8texm1"})("color:",(e=>e.theme.gray300),";"),B=(0,n.Z)("summary",{target:"e1g8texm0"})({name:"l4bt0f",styles:"&::-webkit-details-marker{display:none;}"})},"./app/utils/profiling/routes.tsx":(e,t,r)=>{function n(e){let{orgSlug:t,projectSlug:r,profileId:n}=e;return`/organizations/${t}/profiling/profile/${r}/${n}/flamechart/`}function a(e){let{orgSlug:t,query:r}=e;const n=function(e){let{orgSlug:t}=e;return`/organizations/${t}/profiling/`}({orgSlug:t});return{pathname:n,query:{...r}}}function o(e){let{orgSlug:t,projectSlug:r,transaction:n,query:a}=e;const o=function(e){let{orgSlug:t,projectSlug:r}=e;return`/organizations/${t}/profiling/summary/${r}/`}({orgSlug:t,projectSlug:r});return{pathname:o,query:{...a,transaction:n}}}function i(e){let{orgSlug:t,projectSlug:r,profileId:a,query:o}=e;return{pathname:n({orgSlug:t,projectSlug:r,profileId:a}),query:{...o}}}function s(e){let{orgSlug:t,projectSlug:r,profileId:n,frameName:a,framePackage:o,query:s}=e;return i({orgSlug:t,projectSlug:r,profileId:n,query:{...s,frameName:a,framePackage:o}})}function l(e){let{orgSlug:t,projectSlug:r,profileId:n,query:a}=e;const o=function(e){let{orgSlug:t,projectSlug:r,profileId:n}=e;return`/organizations/${t}/profiling/profile/${r}/${n}/details/`}({orgSlug:t,projectSlug:r,profileId:n});return{pathname:o,query:{...a}}}r.d(t,{O$:()=>n,Qy:()=>l,R0:()=>o,TH:()=>i,XR:()=>a,u$:()=>s})},"./app/views/performance/transactionSummary/utils.tsx":(e,t,r)=>{r.d(t,{DC:()=>c,K0:()=>g,MF:()=>Z,PU:()=>m,Z6:()=>f,e1:()=>h,nx:()=>x,uI:()=>v,vd:()=>y,xf:()=>d});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=r("./app/styles/space.tsx"),o=r("./app/utils/discover/urls.tsx"),i=r("./app/utils/getRouteStringFromRoutes.tsx"),s=r("./app/utils/performance/urls.ts"),l=r("./app/utils/profiling/routes.tsx"),u=r("./app/utils/tokenizeSearch.tsx"),p=r("./app/views/performance/traceDetails/utils.tsx");let c,g;function d(e){const t=m(e);return t.removeFilter("transaction"),t}function m(e){const t=new u.MY(e);return t.removeFilter("event.type"),t}function h(e){let{orgSlug:t,transaction:r,projectID:n,query:a,unselectedSeries:o="p100()",display:i,trendFunction:s,trendColumn:l,showTransactions:u,additionalQuery:p,subPath:c}=e;const g=function(e){let{orgSlug:t,subPath:r}=e;return`/organizations/${t}/performance/summary/${r?`${r}/`:""}`}({orgSlug:t,subPath:c});let m;return m="string"==typeof a.query?d(a.query).formatString():a.query,{pathname:g,query:{transaction:r,project:n,environment:a.environment,statsPeriod:a.statsPeriod,start:a.start,end:a.end,query:m,unselectedSeries:o,showTransactions:u,display:i,trendFunction:s,trendColumn:l,referrer:"performance-transaction-summary",...p}}}function f(e){return(t,r,n)=>{const a=`${r.trace}`;return a?(0,p.YA)(t,a,e,{}):{}}}function y(e){return(t,r,n,a)=>{const i=(0,o.JE)(r);return(0,s.D)(t.slug,i,e,n,a)}}function x(){return(e,t,r)=>{const n=t["profile.id"];return n?(0,l.O$)({orgSlug:e.slug,projectSlug:String(t["project.name"]),profileId:String(n)}):{}}}function Z(e){const t=(0,i.Z)(e);return(e,r,n)=>{const a=r.replayId;if(!a)return{};const o=`${r["project.name"]}:${a}`;if(!r.timestamp)return{pathname:`/organizations/${e.slug}/replays/${o}/`,query:{referrer:t}};const i=new Date(r.timestamp).getTime()-r["transaction.duration"];return{pathname:`/organizations/${e.slug}/replays/${o}/`,query:{event_t:i,referrer:t}}}}!function(e){e.DURATION_PERCENTILE="durationpercentile",e.DURATION="duration",e.LATENCY="latency",e.TREND="trend",e.VITALS="vitals",e.USER_MISERY="usermisery"}(c||(c={})),function(e){e.FASTEST="fastest",e.SLOW="slow",e.OUTLIER="outlier",e.RECENT="recent"}(g||(g={}));const v=(0,n.Z)("div",{target:"etoucxl0"})("margin-top:",(0,a.D)(3),";")}}]);
//# sourceMappingURL=../sourcemaps/app_components_group_tagFacets_index_tsx-app_views_performance_transactionSummary_utils_tsx.023faf8109c243f01fa925b10e160852.js.map