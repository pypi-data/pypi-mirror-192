"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_monitors_details_tsx"],{"./app/components/issues/groupList.tsx":(e,t,s)=>{s.d(t,{Z:()=>R});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(s("../node_modules/core-js/modules/es.array.push.js"),s("../node_modules/react/index.js")),o=s("../node_modules/react-router/es/index.js"),i=s("../node_modules/lodash/isEqual.js"),a=s.n(i),d=s("../node_modules/lodash/omit.js"),l=s.n(d),p=s("../node_modules/query-string/index.js"),u=s("./app/actionCreators/members.tsx"),c=s("./app/components/emptyStateWarning.tsx"),m=s("./app/components/loadingError.tsx"),h=s("./app/components/loadingIndicator.tsx"),g=s("./app/components/pagination.tsx"),x=s("./app/components/panels/index.tsx"),Z=s("./app/components/replays/issuesReplayCountProvider.tsx"),y=s("./app/components/searchSyntax/parser.tsx"),b=s("./app/components/searchSyntax/utils.tsx"),w=s("./app/components/stream/group.tsx"),f=s("./app/locale.tsx"),v=s("./app/stores/groupStore.tsx"),k=s("./app/utils/withApi.tsx"),j=s("./app/utils/withSentryRouter.tsx"),S=s("./app/views/alerts/rules/metric/details/relatedIssuesNotAvailable.tsx"),C=s("./app/components/issues/groupListHeader.tsx"),P=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class q extends n.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{loading:!0,error:!1,errorData:null,groups:[],pageLinks:null}),(0,r.Z)(this,"listener",v.Z.listen((()=>this.onGroupChange()),void 0)),(0,r.Z)(this,"fetchData",(async()=>{v.Z.loadInitialData([]);const{api:e,orgId:t,queryParams:s}=this.props;e.clear(),this.setState({loading:!0,error:!1,errorData:null}),(0,u.MA)(e,t).then((e=>{this.setState({memberList:(0,u.M4)(e)})}));const r=this.getGroupListEndpoint(),n=(0,y.UG)((s??this.getQueryParams()).query);if(n&&(0,b.ly)({tree:n,noResultValue:!1,visitorTest:e=>{let{token:t,returnResult:s}=e;return t.type===y.WU.LogicBoolean?s(!0):null}}))this.setState({error:!0,errorData:{detail:S.H},loading:!1});else try{const[t,,s]=await e.requestPromise(r,{includeAllArgs:!0});v.Z.add(t),this.setState({error:!1,errorData:null,loading:!1,pageLinks:s?.getResponseHeader("Link")??null},(()=>{this.props.onFetchSuccess?.(this.state,this.handleCursorChange)}))}catch(e){this.setState({error:!0,errorData:e.responseJSON,loading:!1})}}))}componentDidMount(){this.fetchData()}shouldComponentUpdate(e,t){return!a()(this.state,t)||e.endpointPath!==this.props.endpointPath||e.query!==this.props.query||!a()(e.queryParams,this.props.queryParams)}componentDidUpdate(e){const t=["end"];e.orgId===this.props.orgId&&e.endpointPath===this.props.endpointPath&&e.query===this.props.query&&a()(l()(e.queryParams,t),l()(this.props.queryParams,t))||this.fetchData()}componentWillUnmount(){v.Z.reset(),this.listener?.()}getGroupListEndpoint(){const{orgId:e,endpointPath:t,queryParams:s}=this.props,r=t??`/organizations/${e}/issues/`,n=s??this.getQueryParams();return`${r}?${p.stringify(n)}`}getQueryParams(){const{location:e,query:t}=this.props,s=e.query;return s.limit=50,s.sort="new",s.query=t,s}handleCursorChange(e,t,s,r){const n=parseInt(s.page,10);let i=isNaN(n)?r:n+r;i<=0&&(e=void 0,i=void 0),o.browserHistory.push({pathname:t,query:{...s,cursor:e,page:i}})}onGroupChange(){const e=v.Z.getAllItems();a()(e,this.state.groups)||this.setState({groups:e})}render(){const{canSelectGroups:e,withChart:t,renderEmptyMessage:s,renderErrorMessage:r,withPagination:n,useFilteredStats:o,useTintRow:i,customStatsPeriod:a,queryParams:d,queryFilterDescription:l,narrowGroups:p,source:u}=this.props,{loading:y,error:b,errorData:v,groups:k,memberList:j,pageLinks:S}=this.state;if(y)return(0,P.tZ)(h.Z,{});if(b)return"function"==typeof r&&v?r(v,this.fetchData):(0,P.tZ)(m.Z,{onRetry:this.fetchData});if(0===k.length)return"function"==typeof s?s():(0,P.tZ)(x.s_,{children:(0,P.tZ)(x.N,{children:(0,P.tZ)(c.Z,{children:(0,P.tZ)("p",{children:(0,f.t)("There don't seem to be any events fitting the query.")})})})});const q="auto"===d?.groupStatsPeriod?d?.groupStatsPeriod:w.g;return(0,P.BX)(Z.Z,{groupIds:k.map((e=>{let{id:t}=e;return t})),children:[(0,P.BX)(x.s_,{children:[(0,P.tZ)(C.Z,{withChart:!!t,narrowGroups:p}),(0,P.tZ)(x.N,{children:k.map((s=>{let{id:r,project:n}=s;const d=j?.hasOwnProperty(n.slug)?j[n.slug]:void 0;return(0,P.tZ)(w.Z,{id:r,canSelect:e,withChart:t,memberList:d,useFilteredStats:o,useTintRow:i,customStatsPeriod:a,statsPeriod:q,queryFilterDescription:l,narrowGroups:p,source:u},r)}))})]}),n&&(0,P.tZ)(g.Z,{pageLinks:S,onCursor:this.handleCursorChange})]})}}q.displayName="GroupList",(0,r.Z)(q,"defaultProps",{canSelectGroups:!0,withChart:!0,withPagination:!0,useFilteredStats:!0,useTintRow:!0,narrowGroups:!1});const R=(0,k.Z)((0,j.Z)(q))},"./app/components/issues/groupListHeader.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=s("./app/components/panels/index.tsx"),o=s("./app/locale.tsx"),i=s("./app/styles/space.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const d=e=>{let{withChart:t=!0,narrowGroups:s=!1,showLastTriggered:r=!1}=e;return(0,a.BX)(n.V9,{disablePadding:!0,children:[(0,a.tZ)(u,{children:(0,o.t)("Issue")}),t&&(0,a.tZ)(m,{narrowGroups:s,children:(0,o.t)("Graph")}),(0,a.tZ)(c,{children:(0,o.t)("events")}),(0,a.tZ)(c,{children:(0,o.t)("users")}),(0,a.tZ)(h,{narrowGroups:s,children:(0,o.t)("Assignee")}),r&&(0,a.tZ)(c,{children:(0,o.t)("Last Triggered")})]})};d.displayName="GroupListHeader";const l=d,p=(0,r.Z)("div",{target:"ev0gesp4"})("display:flex;align-self:center;margin:0 ",(0,i.D)(2),";color:",(e=>e.theme.subText),";"),u=(0,r.Z)(p,{target:"ev0gesp3"})("flex:1;width:66.66%;@media (min-width: ",(e=>e.theme.breakpoints.medium),"){width:50%;}"),c=(0,r.Z)(p,{target:"ev0gesp2"})("justify-content:flex-end;width:60px;white-space:nowrap;@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){width:80px;}"),m=(0,r.Z)(p,{target:"ev0gesp1"})("justify-content:space-between;width:160px;@media (max-width: ",(e=>e.narrowGroups?e.theme.breakpoints.xlarge:e.theme.breakpoints.large),"){display:none;}"),h=(0,r.Z)(p,{target:"ev0gesp0"})("justify-content:flex-end;width:80px;@media (max-width: ",(e=>e.narrowGroups?e.theme.breakpoints.large:e.theme.breakpoints.medium),"){display:none;}")},"./app/components/onboardingPanel.tsx":(e,t,s)=>{s.d(t,{Z:()=>u});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=s("./app/components/panels/index.tsx"),o=s("./app/styles/space.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{image:t,children:s,...r}=e;return(0,i.tZ)(n.s_,{...r,children:(0,i.BX)(d,{children:[t?(0,i.tZ)(p,{children:t}):null,(0,i.tZ)(l,{centered:!t,children:s})]})})}a.displayName="OnboardingPanel";const d=(0,r.Z)("div",{target:"euclof22"})("padding:",(0,o.D)(3),";position:relative;@media (min-width: ",(e=>e.theme.breakpoints.small),"){display:flex;align-items:center;flex-direction:row;justify-content:center;flex-wrap:wrap;min-height:300px;max-width:1000px;margin:0 auto;}@media (min-width: ",(e=>e.theme.breakpoints.medium),"){min-height:350px;}"),l=(0,r.Z)("div",{target:"euclof21"})("z-index:1;",(e=>e.centered?"text-align: center;":"")," ",(e=>e.centered?"max-width: 600px;":""),"@media (min-width: ",(e=>e.theme.breakpoints.small),"){flex:2;}"),p=(0,r.Z)(l,{target:"euclof20"})("position:relative;min-height:100px;max-width:300px;margin:",(0,o.D)(2)," auto;@media (min-width: ",(e=>e.theme.breakpoints.small),"){flex:1;margin:",(0,o.D)(3),";max-width:auto;}"),u=a},"./app/utils/discover/charts.tsx":(e,t,s)=>{s.d(t,{CX:()=>i,Xp:()=>u,gu:()=>d,x1:()=>l});var r=s("./app/locale.tsx"),n=s("./app/utils.tsx"),o=s("./app/utils/formatters.tsx");function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number";return(0,n.ri)(e)?a(e,t):"—"}function a(e,t){if(!(0,n.ri)(e))return"—";switch(t){case"integer":case"number":return e.toLocaleString();case"percentage":return(0,o.rl)(e,2);case"duration":return(0,o.g9)(e/1e3,2,!0);case"size":return(0,n.F)(e);default:return e.toString()}}function d(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return l(e,t,s,r)}function l(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;switch(t){case"integer":case"number":return s?(0,o.Du)(e):e.toLocaleString();case"percentage":return(0,o.rl)(e,0);case"duration":return p(e,r);case"size":return(0,n.F)(e,0);default:return e.toString()}}function p(e,t){if(t??=c(e),0===e)return"0";switch(t){case o.ps:{const t=(e/o.ps).toFixed(0);return(0,r.t)("%swk",t)}case o.x4:{const t=(e/o.x4).toFixed(0);return(0,r.t)("%sd",t)}case o.kr:{const t=(e/o.kr).toFixed(0);return(0,r.t)("%shr",t)}case o.EB:{const t=(e/o.EB).toFixed(0);return(0,r.t)("%smin",t)}case o.sh:{const t=(e/o.sh).toFixed(0);return(0,r.t)("%ss",t)}default:const t=e.toFixed(0);return(0,r.t)("%sms",t)}}function u(e,t){let s=0;const r=function(e,t){let s;if(e[0]?.data){let r,n=e[0];e.forEach(((s,o)=>{let{seriesName:i,data:a}=s;!1!==t?.selected?.[i]&&a.length&&(n=e[o],r??=e[o])})),r?.data&&(s={max:Math.max(...r.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e))),min:Math.min(...n.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e)))})}return s}(e,t);if(r){const e=(r.max+r.min)/2;s=c((r.max-r.min)/5),(e/s).toFixed(0).length>6&&(s=c(e))}return s}function c(e){return e>=o.ps?o.ps:e>=o.x4?o.x4:e>=o.kr?o.kr:e>=o.EB?o.EB:e>=o.sh?o.sh:1}},"./app/utils/useApiRequests.tsx":(e,t,s)=>{s.d(t,{Z:()=>b}),s("../node_modules/core-js/modules/es.error.cause.js");var r=s("../node_modules/react/index.js"),n=s("../node_modules/@sentry/core/esm/exports.js"),o=s("./app/components/loadingError.tsx"),i=s("./app/components/loadingIndicator.tsx"),a=s("./app/locale.tsx"),d=s("./app/utils/analytics.tsx"),l=s("./app/utils/getRouteStringFromRoutes.tsx"),p=s("./app/utils/useApi.tsx"),u=s("./app/utils/useLocation.tsx"),c=s("./app/utils/useParams.tsx"),m=s("./app/utils/useRoutes.tsx"),h=s("./app/views/permissionDenied.tsx"),g=s("./app/views/routeError.tsx"),x=s("./app/utils/useEffectAfterFirstRender.ts"),Z=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function y(){return(0,Z.tZ)(i.Z,{})}y.displayName="renderLoading";const b=function(e){let{endpoints:t,reloadOnVisible:s=!1,shouldReload:i=!1,shouldRenderBadRequests:b=!1,disableErrorReport:w=!0,onLoadAllEndpointsSuccess:f=(()=>{}),onRequestSuccess:v=(e=>{}),onRequestError:k=((e,t)=>{})}=e;const j=(0,p.Z)(),S=(0,u.T)(),C=(0,c.U)(),P=(0,r.useMemo)((()=>({data:{},isLoading:!0,hasError:!1,isReloading:!1,errors:{},remainingRequests:t.length})),[t.length]),[q,R]=(0,r.useState)(P),E=function(){const e=(0,m.V)(),t=(0,r.useRef)({hasMeasured:!1,finished:!1,error:!1});return(0,r.useEffect)((()=>{t.current={hasMeasured:!1,finished:!1,error:!1},e&&e.length&&d.oF.mark({name:`async-component-${(0,l.Z)(e)}`})}),[e]),(0,r.useCallback)((s=>{let{finished:r,error:n}=s;if(e&&(r&&(t.current.finished=!0),n&&(t.current.error=!0),!t.current.hasMeasured&&t.current.finished)){const s=(0,l.Z)(e);d.oF.measure({name:"app.component.async-component",start:`async-component-${s}`,data:{route:s,error:t.current.error}}),t.current.hasMeasured=!0}}),[e])}(),D=(0,r.useCallback)(((e,t)=>{let{stateKey:s,data:r,resp:n}=e;R((e=>{const o={...e,data:{...e.data,[s]:r,[`${s}PageLinks`]:n?.getResponseHeader("Link")}};return t&&(o.remainingRequests=e.remainingRequests-1,o.isLoading=e.remainingRequests>1,o.isReloading=e.isReloading&&o.isLoading,E({finished:0===o.remainingRequests})),o})),v({stateKey:s,data:r,resp:n})}),[v,E]),I=(0,r.useCallback)(((e,t)=>{const[s]=t;e&&e.responseText&&n.n_({message:e.responseText,category:"xhr",level:"error"}),R((t=>{const r=t.remainingRequests>1,n={errors:{...t.errors,[s]:e},data:{...t.data,[s]:null},hasError:t.hasError||!!e,remainingRequests:t.remainingRequests-1,isLoading:r,isReloading:t.isReloading&&r};return E({finished:0===n.remainingRequests,error:!0}),n})),k(e,t)}),[E,k]),_=(0,r.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.length?(j.clear(),R((s=>({...s,isLoading:!0,hasError:!1,remainingRequests:t.length,...e}))),await Promise.all(t.map((async e=>{let[t,s,r,n]=e;n=n??{};const o=S&&S.query||{};let i=r&&r.query||{};!n.paginate&&!o.cursor||n.disableEntireQuery||(i={...o,...i});try{const e=await j.requestPromise(s,{method:"GET",...r,query:i,includeAllArgs:!0}),[n,o,a]=e;D({stateKey:t,data:n,resp:a},!0)}catch(e){I(e,[t,s,r,n])}})))):R((e=>({...e,data:{},isLoading:!1,hasError:!1})))}),[j,t,I,D,S]),z=(0,r.useCallback)((()=>_({isReloading:!0})),[_]),L=(0,r.useCallback)((async()=>{try{await _()}catch(e){throw R((e=>({...e,hasError:!0}))),e}}),[_]);(0,r.useEffect)((()=>{L()}),[]);const N=(0,r.useCallback)((()=>i?z():(R({...P}),_())),[P,z,_,i]);(0,x.K)((()=>{N()}),[S?.search,S?.state,C]);const B=(0,r.useCallback)((()=>!q.isLoading&&!document.hidden&&z()),[q.isLoading,z]);(0,r.useEffect)((()=>(s&&document.addEventListener("visibilitychange",B),()=>document.removeEventListener("visibilitychange",B))),[s,B]),(0,r.useEffect)((()=>{t.length&&0===q.remainingRequests&&!q.hasError&&f()}),[q.remainingRequests,q.hasError,t.length]);const T=(0,r.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=q.errors,r=Object.values(s).some((e=>401===e?.status)),n=Object.values(s).some((e=>403===e?.status)),i=!!Object.values(s).some((e=>0!==e?.status))||t;if(r)return(0,Z.tZ)(o.Z,{message:(0,a.t)("You are not authorized to access this resource.")});if(n)return(0,Z.tZ)(h.Z,{});if(b){const e=Object.values(s).filter((e=>400===e?.status&&e?.responseJSON?.detail)).map((e=>e.responseJSON.detail));if(e.length)return(0,Z.tZ)(o.Z,{message:[...new Set(e)].join("\n")})}return(0,Z.tZ)(g.Z,{error:e,disableLogSentry:!i,disableReport:w})}),[q.errors,w,b]),F=q.isLoading&&(!i||!q.isReloading),A=(0,r.useCallback)((e=>F?y():q.hasError?T(new Error("Unable to load all required endpoints")):e),[F,q.hasError,T]);return{...q,renderComponent:A}}},"./app/utils/useEffectAfterFirstRender.ts":(e,t,s)=>{s.d(t,{K:()=>n});var r=s("../node_modules/react/index.js");const n=(e,t)=>{const s=(0,r.useRef)(!0);(0,r.useEffect)((()=>{s.current?s.current=!1:e()}),t)}},"./app/views/alerts/rules/metric/details/relatedIssuesNotAvailable.tsx":(e,t,s)=>{s.d(t,{H:()=>l,z:()=>p});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=s("./app/components/acl/feature.tsx"),o=s("./app/components/alert.tsx"),i=s("./app/components/button.tsx"),a=s("./app/components/panels/index.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l='Error parsing search query: Boolean statements containing "OR" or "AND" are not supported in this search',p=e=>{let{buttonTo:t,buttonText:s}=e;return(0,d.tZ)(u,{type:"info",showIcon:!0,trailingItems:(0,d.tZ)(n.Z,{features:["discover-basic"],children:(0,d.tZ)(i.zx,{priority:"default",size:"xs",to:t,children:s})}),children:(0,d.tZ)("div",{"data-test-id":"loading-error-message",children:"Related Issues unavailable for this alert."})})};p.displayName="RelatedIssuesNotAvailable";const u=(0,r.Z)(o.bZ,{target:"e1qw7yyr0"})(a.s_," &{border-radius:0;border-width:1px 0;}")},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./app/components/asyncComponent.tsx"),n=s("./app/components/sentryDocumentTitle.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends r.Z{getTitle(){return""}render(){return(0,o.tZ)(n.Z,{title:this.getTitle(),children:this.renderComponent()})}}i.displayName="AsyncView"},"./app/views/monitors/cronsFeedbackButton.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./app/components/featureFeedback/index.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const o=()=>(0,n.tZ)(r.z,{featureName:"crons",buttonProps:{size:"sm"}});o.displayName="CronsFeedbackButton";const i=o},"./app/views/monitors/details.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>be});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/react/index.js"),i=s("./app/components/datePageFilter.tsx"),a=s("./app/components/layouts/thirds.tsx"),d=s("./app/components/organizations/pageFilterBar.tsx"),l=s("./app/components/panels/index.tsx"),p=s("./app/locale.tsx"),u=s("./app/styles/space.tsx"),c=s("./app/utils/routeAnalytics/withRouteAnalytics.tsx"),m=s("./app/utils/withOrganization.tsx"),h=s("./app/views/asyncView.tsx"),g=s("./app/components/duration.tsx"),x=s("./app/components/timeSince.tsx"),Z=s("./app/components/tooltip.tsx"),y=s("./app/utils.tsx"),b=s("./app/utils/useApiRequests.tsx");const w=(0,n.Z)("div",{target:"ezssel20"})("display:inline-block;position:relative;border-radius:50%;height:",(e=>e.size),"px;width:",(e=>e.size),"px;",(e=>e.color?`background: ${e.color};`:`background: ${"error"===e.status?e.theme.error:"ok"===e.status?e.theme.success:"missed"===e.status?e.theme.warning:e.theme.disabled};`),";");var f=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const v=e=>{let{monitor:t,orgId:s}=e;const{data:r,hasError:n,renderComponent:o}=(0,b.Z)({endpoints:[["checkInList",`/organizations/${s}/monitors/${t.id}/checkins/`,{query:{per_page:"10"}}]]}),i=o((0,f.tZ)(l.N,{children:r.checkInList?.map((e=>(0,f.BX)(l.Lv,{children:[(0,f.tZ)(j,{children:(0,f.tZ)(Z.u,{title:(0,p._N)("Check In Status: [status]",{status:e.status}),children:(0,f.tZ)(w,{status:e.status,size:16})})}),(0,f.tZ)(S,{children:(0,f.tZ)(x.Z,{date:e.dateCreated})}),(0,f.tZ)(C,{children:(0,y.ri)(e.duration)&&(0,f.tZ)(g.Z,{seconds:e.duration/1e3})})]},e.id)))}));return n?(0,f.tZ)(P,{children:i}):i},k=(0,n.Z)("div",{target:"e15yyb464"})("margin-right:",(0,u.D)(2),";"),j=(0,n.Z)(k,{target:"e15yyb463"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),S=(0,n.Z)(k,{target:"e15yyb462"})({name:"kow0uz",styles:"font-variant-numeric:tabular-nums"}),C=(0,n.Z)("div",{target:"e15yyb461"})({name:"kow0uz",styles:"font-variant-numeric:tabular-nums"}),P=(0,n.Z)("div",{target:"e15yyb460"})("margin:",(0,u.D)(3)," ",(0,u.D)(3)," 0;");var q=s("./app/components/breadcrumbs.tsx"),R=s("./app/components/charts/styles.tsx"),E=s("./app/components/clipboard.tsx"),D=s("./app/components/idBadge/index.tsx"),I=s("./app/icons/index.tsx"),_=(s("../node_modules/core-js/modules/es.array.push.js"),s("../node_modules/react-router/es/index.js")),z=s("./app/actionCreators/indicator.tsx"),L=s("./app/components/button.tsx"),N=s("./app/components/buttonBar.tsx"),B=s("./app/components/confirm.tsx"),T=s("../node_modules/@sentry/core/esm/exports.js"),F=s("./app/utils/useApi.tsx"),A=s("./app/utils/withDomainRequired.tsx"),M=s("./app/views/monitors/cronsFeedbackButton.tsx");const $=e=>{let{monitor:t,orgId:s,onUpdate:r}=e;const n=(0,F.Z)();return(0,f.BX)(N.ZP,{gap:1,children:[(0,f.tZ)(M.Z,{}),(0,f.tZ)(B.Z,{onConfirm:()=>{const e=`/organizations/${s}/crons/`;(0,z.E3)((0,p.t)("Deleting Monitor...")),n.requestPromise(`/organizations/${s}/monitors/${t.id}/`,{method:"DELETE"}).then((()=>{_.browserHistory.push((0,A.D)(e))})).catch((()=>{(0,z.Iw)((0,p.t)("Unable to remove monitor."))}))},message:(0,p.t)("Are you sure you want to permanently delete this cron monitor?"),children:(0,f.tZ)(L.zx,{size:"sm",icon:(0,f.tZ)(I.Fz,{size:"xs"}),children:(0,p.t)("Delete")})}),(0,f.tZ)(L.zx,{size:"sm",icon:"disabled"!==t.status?(0,f.tZ)(I.ky,{size:"xs"}):(0,f.tZ)(I.JF,{size:"xs"}),onClick:()=>{return e={status:"disabled"===t.status?"active":"disabled"},(0,z.E3)(),void n.requestPromise(`/organizations/${s}/monitors/${t.id}/`,{method:"PUT",data:e}).then((e=>{(0,z.B8)(),r?.(e)})).catch((e=>{var t;t=e,T.$e((e=>{T.Tb(t)})),window.console&&console.error&&console.error(t),(0,z.Iw)((0,p.t)("Unable to update monitor."))}));var e},children:"disabled"!==t.status?(0,p.t)("Pause"):(0,p.t)("Resume")}),(0,f.tZ)(L.zx,{priority:"primary",size:"sm",icon:(0,f.tZ)(I.yl,{size:"xs"}),to:`/organizations/${s}/crons/${t.id}/edit/`,children:(0,p.t)("Edit")})]})};$.displayName="MonitorHeaderActions";const G=$;var X=s("./app/views/monitors/monitorIcon.tsx");const U={ok:(0,p.t)("Ok"),error:(0,p.t)("Failed"),disabled:(0,p.t)("Disabled"),active:(0,p.t)("Active"),missed_checkin:(0,p.t)("Missed")},O=e=>{let{monitor:t,orgId:s,onUpdate:r}=e;const n=[{label:(0,p.t)("Crons"),to:`/organizations/${s}/crons/`},{label:(0,p.t)("Cron Monitor Details")}];return(0,f.BX)(a.h4,{children:[(0,f.BX)(a.oB,{children:[(0,f.tZ)(q.Z,{crumbs:n}),(0,f.BX)(a.Dx,{children:[(0,f.tZ)(D.Z,{project:t.project,avatarSize:28,hideName:!0,avatarProps:{hasTooltip:!0,tooltip:t.project.slug}}),t.name]}),(0,f.tZ)(E.Z,{value:t.id,children:(0,f.BX)(H,{children:[t.id," ",(0,f.tZ)(I.vU,{size:"xs"})]})})]}),(0,f.BX)(a.kP,{children:[(0,f.tZ)(G,{orgId:s,monitor:t,onUpdate:r}),(0,f.BX)(V,{children:[(0,f.tZ)(W,{children:(0,p.t)("Last Check-in")}),(0,f.tZ)(W,{children:(0,p.t)("Next Check-in")}),(0,f.tZ)(W,{children:(0,p.t)("Status")}),(0,f.tZ)("div",{children:t.lastCheckIn&&(0,f.tZ)(x.Z,{date:t.lastCheckIn})}),(0,f.tZ)("div",{children:t.nextCheckIn&&(0,f.tZ)(x.Z,{date:t.nextCheckIn})}),(0,f.BX)(K,{children:[(0,f.tZ)(X.Z,{status:t.status,size:16}),(0,f.tZ)(J,{children:U[t.status]})]})]})]})]})};O.displayName="MonitorHeader";const H=(0,n.Z)("div",{target:"e1gt2b5r4"})("margin-top:",(0,u.D)(1),";color:",(e=>e.theme.subText),";cursor:pointer;width:max-content;"),V=(0,n.Z)("div",{target:"e1gt2b5r3"})("display:grid;align-self:flex-end;grid-template-columns:repeat(3, max-content);grid-column-gap:",(0,u.D)(4),";grid-row-gap:",(0,u.D)(.5),";margin-bottom:",(0,u.D)(2),";margin-top:",(0,u.D)(1),";"),W=(0,n.Z)(R.OT,{target:"e1gt2b5r2"})("text-transform:uppercase;font-size:",(e=>e.theme.fontSizeSmall),";text-align:center;"),K=(0,n.Z)("div",{target:"e1gt2b5r1"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),J=(0,n.Z)("div",{target:"e1gt2b5r0"})("margin-left:",(0,u.D)(1),";"),Q=O;var Y=s("./app/components/emptyStateWarning.tsx"),ee=s("./app/components/issues/groupList.tsx"),te=s("./app/utils/dates.tsx"),se=s("./app/utils/usePageFilters.tsx");const re=()=>(0,f.tZ)(l.s_,{children:(0,f.tZ)(l.N,{children:(0,f.tZ)(Y.Z,{children:(0,f.tZ)("p",{children:(0,p.t)("No issues relating to this cron monitor have been found.")})})})});re.displayName="MonitorIssuesEmptyMessage";const ne=e=>{let{orgId:t,monitor:s}=e;const{selection:r}=(0,se.Z)(),{start:n,end:o,period:i}=r.datetime,a=n&&o?{start:(0,te.v5)(n),end:(0,te.v5)(o)}:{statsPeriod:i};return(0,f.tZ)(ee.Z,{orgId:t,endpointPath:`/organizations/${t}/issues/`,queryParams:{query:`monitor.id:"${s.id}"`,project:s.project.id,limit:5,...a},query:"",renderEmptyMessage:re,canSelectGroups:!1,withPagination:!1,withChart:!1,useTintRow:!1,source:"monitors"})};ne.displayName="MonitorIssues";const oe=ne;var ie=s("./app/components/charts/barChart.tsx"),ae=s("./app/components/charts/miniBarChart.tsx"),de=s("./app/components/charts/series/lineSeries.tsx"),le=s("./app/components/emptyMessage.tsx"),pe=s("./app/utils/discover/charts.tsx"),ue=s("./app/utils/theme.tsx");const ce=e=>{let{monitor:t,orgId:s}=e;const{selection:r}=(0,se.Z)(),{start:n,end:o,period:i}=r.datetime;let a,d;n&&o?(d=new Date(o).getTime()/1e3,a=new Date(n).getTime()/1e3):(d=Math.floor((new Date).getTime()/1e3),a=d-(0,te.NI)(i??"30d")/1e3);const{data:u,renderComponent:c}=(0,b.Z)({endpoints:[["stats",`/organizations/${s}/monitors/${t.id}/stats/`,{query:{since:a.toString(),until:d.toString(),resolution:"1d"}}]]});let m=!0;const h={seriesName:(0,p.t)("Successful"),yAxisIndex:0,data:[]},g={seriesName:(0,p.t)("Failed"),yAxisIndex:0,data:[]},x={seriesName:(0,p.t)("Missed"),yAxisIndex:0,data:[]},Z=[];u.stats?.forEach((e=>{(e.ok||e.error||e.missed)&&(m=!1);const t=1e3*e.ts;h.data.push({name:t,value:e.ok}),g.data.push({name:t,value:e.error}),x.data.push({name:t,value:e.missed}),Z.push([t,Math.trunc(e.duration)])}));const y=[ue.ZP.green200,ue.ZP.red200,ue.ZP.yellow200],w=(0,p.t)("Average Duration"),v=[(0,de.Z)({name:w,data:Z,lineStyle:{color:ue.ZP.purple300,width:2},itemStyle:{color:ue.ZP.purple300},yAxisIndex:1,animation:!1})],k=e=>({max:(0,ae.v)(150),splitLine:{show:!1},axisLabel:{formatter:t=>(0,pe.gu)(t,e,!0),showMaxLabel:!1}});return c((0,f.tZ)(l.s_,{children:(0,f.tZ)(l.N,{withPadding:!0,children:m?(0,f.tZ)(le.Z,{title:(0,p.t)("No check-ins have been recorded for this time period.")}):(0,f.tZ)(ie.v,{isGroupedByDate:!0,showTimeInTooltip:!0,useShortDate:!0,series:[h,g,x],stacked:!0,additionalSeries:v,height:150,colors:y,tooltip:{trigger:"axis",valueFormatter:(e,t)=>t===w?(0,pe.CX)(e,"duration"):(0,pe.CX)(e,"number")},yAxes:[{...k("number")},{...k("duration")}],grid:{top:6,bottom:0,left:4,right:0},animation:!1})})}))};var me=s("./images/spot/onboarding-preview.svg"),he=s("./app/components/onboardingPanel.tsx");const ge=()=>(0,f.BX)(he.Z,{image:(0,f.tZ)("img",{src:me}),children:[(0,f.tZ)("h3",{children:(0,p.t)("Learn how to instrument your cron monitor")}),(0,f.tZ)("p",{children:(0,p.t)("We'll tell you if this recurring job is running on schedule, failing, or succeeding.")}),(0,f.tZ)(L.zx,{priority:"primary",href:"https://docs.sentry.io/product/crons/getting-started/#step-2-set-up-health-checks",external:!0,children:(0,p.t)("Start Setup")})]});ge.displayName="MonitorOnboarding";const xe=ge;class Ze extends h.Z{constructor(){super(...arguments),(0,r.Z)(this,"onUpdate",(e=>this.setState((t=>({monitor:{...t.monitor,...e}})))))}get orgSlug(){return this.props.organization.slug}getEndpoints(){const{params:e,location:t}=this.props;return[["monitor",`/organizations/${this.orgSlug}/monitors/${e.monitorId}/`,{query:t.query}]]}getTitle(){return this.state.monitor?`${this.state.monitor.name} - Monitors - ${this.orgSlug}`:`Monitors - ${this.orgSlug}`}onRequestSuccess(e){this.props.setEventNames("monitors.details_page_viewed","Monitors: Details Page Viewed"),this.props.setRouteAnalyticsParams({empty_state:!e.data?.lastCheckIn})}renderBody(){const{monitor:e}=this.state;return null===e?null:(0,f.BX)(a.T3,{children:[(0,f.tZ)(Q,{monitor:e,orgId:this.orgSlug,onUpdate:this.onUpdate}),(0,f.tZ)(a.uT,{children:(0,f.tZ)(a.or,{fullWidth:!0,children:e.lastCheckIn?(0,f.BX)(o.Fragment,{children:[(0,f.tZ)(ye,{condensed:!0,children:(0,f.tZ)(i.Z,{alignDropdown:"left"})}),(0,f.tZ)(ce,{monitor:e,orgId:this.orgSlug}),(0,f.tZ)(oe,{monitor:e,orgId:this.orgSlug}),(0,f.BX)(l.s_,{children:[(0,f.tZ)(l.V9,{children:(0,p.t)("Recent Check-ins")}),(0,f.tZ)(v,{monitor:e,orgId:this.orgSlug})]})]}):(0,f.tZ)(xe,{})})})]})}}const ye=(0,n.Z)(d.Z,{target:"eokg3rx0"})("margin-bottom:",(0,u.D)(2),";"),be=(0,c.Z)((0,m.Z)(Ze))},"./app/views/monitors/monitorIcon.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});const r=(0,s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"e16hro3j0"})("display:inline-block;position:relative;border-radius:50%;height:",(e=>e.size),"px;width:",(e=>e.size),"px;",(e=>e.color?`background: ${e.color};`:`background: ${"error"===e.status?e.theme.error:"ok"===e.status?e.theme.success:"missed_checkin"===e.status?e.theme.warning:e.theme.disabled};`),";")},"./images/spot/onboarding-preview.svg":(e,t,s)=>{e.exports=s.p+"assets/onboarding-preview.736a954711c5b3d5be05.svg"}}]);
//# sourceMappingURL=../sourcemaps/app_views_monitors_details_tsx.1d624ed58a8a4902eecc21ab53162129.js.map