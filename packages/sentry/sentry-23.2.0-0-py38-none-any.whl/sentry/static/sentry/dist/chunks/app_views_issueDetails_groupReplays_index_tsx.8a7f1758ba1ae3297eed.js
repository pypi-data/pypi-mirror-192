"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_issueDetails_groupReplays_index_tsx"],{"./app/utils/useCleanQueryParamsOnRouteLeave.tsx":(e,s,t)=>{t.d(s,{Z:()=>n,j:()=>i});var a=t("../node_modules/react/index.js"),r=t("../node_modules/react-router/es/index.js"),o=t("./app/utils/useLocation.tsx");function i(e){let{fieldsToClean:s,newLocation:t,oldPathname:a}=e;const o=s.some((e=>void 0!==t.query[e]));if(t.pathname===a||!o)return;const i=s.reduce(((e,s)=>(e[s]=void 0,e)),{...t.query});r.browserHistory.replace({pathname:t.pathname,query:i})}const n=function(e){let{fieldsToClean:s}=e;const t=(0,o.T)(),n=(0,a.useCallback)((e=>{i({fieldsToClean:s,newLocation:e,oldPathname:t.pathname})}),[t.pathname,s]);(0,a.useEffect)((()=>r.browserHistory.listen(n)),[n])}},"./app/views/issueDetails/groupReplays/index.tsx":(e,s,t)=>{t.r(s),t.d(s,{default:()=>q});var a=t("./app/components/acl/feature.tsx"),r=t("./app/components/alert.tsx"),o=t("./app/components/layouts/thirds.tsx"),i=t("./app/locale.tsx"),n=t("./app/utils/useOrganization.tsx"),l=t("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),p=t("../node_modules/react/index.js"),u=t("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),d=t("./app/utils/replays/hooks/useReplayList.tsx"),c=t("./app/utils/useLocation.tsx"),y=t("./app/utils/useMedia.tsx"),m=t("../node_modules/@sentry/core/esm/exports.js"),g=t("./app/utils/discover/eventView.tsx"),h=t("./app/utils/discover/genericDiscoverQuery.tsx"),v=t("./app/utils/queryString.tsx"),x=t("./app/utils/replays/fetchReplayList.tsx"),b=t("./app/utils/useApi.tsx"),w=t("./app/utils/useCleanQueryParamsOnRouteLeave.tsx");var f=t("./app/views/replays/replayTable/index.tsx"),Z=t("./app/views/replays/replayTable/types.tsx"),k=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function j(e){let{group:s}=e;const t=(0,u.u)(),a=(0,y.Z)(`(min-width: ${t.breakpoints.small})`),r=(0,n.Z)(),o=(0,c.T)(),{eventView:i,fetchError:l,pageLinks:d}=function(e){let{group:s,location:t,organization:a}=e;const r=(0,b.Z)(),[o,i]=(0,p.useState)({pageLinks:null,replayIds:void 0}),[n,l]=(0,p.useState)(),{cursor:u}=t.query,d=(0,p.useCallback)((async()=>{const e=g.ZP.fromSavedQuery({id:"",name:"Errors within replay",version:2,fields:["replayId","count()"],query:`issue.id:${s.id} !replayId:""`,projects:[Number(s.project.id)]});try{const[{data:s},t,o]=await(0,h.AA)(r,`/organizations/${a.slug}/events/`,e.getEventsAPIPayload({query:{cursor:u}}));i({pageLinks:o?.getResponseHeader("Link")??"",replayIds:s.map((e=>String(e.replayId)))})}catch(e){m.Tb(e),l(e)}}),[r,u,a.slug,s.id,s.project.id]),c=(0,p.useMemo)((()=>o.replayIds?g.ZP.fromSavedQuery({id:"",name:"",version:2,fields:x.p8,projects:[Number(s.project.id)],query:`id:[${String(o.replayIds)}]`,orderby:(0,v.ro)(t.query.sort,x.yw)}):null),[t.query.sort,s.project.id,o.replayIds]);return(0,w.Z)({fieldsToClean:["cursor"]}),(0,p.useEffect)((()=>{d()}),[d]),{eventView:c,fetchError:n,pageLinks:o.pageLinks}}({group:s,location:o,organization:r});return i?(0,k.tZ)(L,{eventView:i,organization:r,pageLinks:d}):(0,k.tZ)(T,{withPadding:!0,children:(0,k.tZ)(f.Z,{fetchError:l,isFetching:!0,replays:[],sort:void 0,visibleColumns:[Z.M.session,...a?[Z.M.startedAt]:[],Z.M.duration,Z.M.countErrors,Z.M.activity]})})}j.displayName="GroupReplays";const L=e=>{let{eventView:s,organization:t}=e;const a=(0,p.useMemo)((()=>({query:{}})),[]),r=(0,u.u)(),o=(0,y.Z)(`(min-width: ${r.breakpoints.small})`),{replays:i,isFetching:n,fetchError:l}=(0,d.Z)({eventView:s,location:a,organization:t});return(0,k.tZ)(T,{withPadding:!0,children:(0,k.tZ)(f.Z,{fetchError:l,isFetching:n,replays:i,sort:void 0,visibleColumns:[Z.M.session,...o?[Z.M.startedAt]:[],Z.M.duration,Z.M.countErrors,Z.M.activity]})})};L.displayName="GroupReplaysTable";const T=(0,l.Z)(o.T3,{target:"e1ekyz00"})("box-shadow:0px 0px 1px ",(e=>e.theme.gray200),";background-color:",(e=>e.theme.background),";"),C=j;function M(){return(0,k.tZ)(o.T3,{withPadding:!0,children:(0,k.tZ)(r.bZ,{type:"warning",children:(0,i.t)("You don't have access to this feature")})})}M.displayName="renderNoAccess";const _=e=>{const s=(0,n.Z)();return(0,k.tZ)(a.Z,{features:["session-replay-ui"],organization:s,renderDisabled:M,children:(0,k.tZ)(C,{...e})})};_.displayName="GroupReplaysContainer";const q=_}}]);
//# sourceMappingURL=../sourcemaps/app_views_issueDetails_groupReplays_index_tsx.254f52aeb2d9f591227c347d27c523ed.js.map