(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_actionCreators_projects_tsx-app_components_modals_inviteMembersModal_index_tsx-app_utils_-ec36ab"],{"./app/actionCreators/projects.tsx":(e,t,s)=>{"use strict";s.d(t,{$L:()=>w,$P:()=>v,M9:()=>y,Nh:()=>p,Oe:()=>b,TA:()=>j,Vx:()=>m,bL:()=>S,iC:()=>_,mf:()=>I,pK:()=>f,rR:()=>x,xV:()=>Z}),s("../node_modules/core-js/modules/es.array.includes.js");var n=s("../node_modules/lodash/chunk.js"),o=s.n(n),i=s("../node_modules/lodash/debounce.js"),r=s.n(i),a=s("./app/actionCreators/indicator.tsx"),l=s("./app/locale.tsx"),d=s("./app/stores/latestContextStore.tsx"),u=s("./app/stores/projectsStatsStore.tsx"),c=s("./app/stores/projectsStore.tsx");function m(e,t){u.Z.onUpdate(t.projectId,t.data);const s=`/projects/${t.orgId}/${t.projectId}/`;return e.requestPromise(s,{method:"PUT",data:t.data}).then((e=>(c.Z.onUpdateSuccess(e),e)),(e=>{throw u.Z.onUpdateError(e,t.projectId),e}))}function p(e,t){const s=`/organizations/${t.orgId}/stats/`;e.request(s,{query:t.query,success:e=>c.Z.onStatsLoadSuccess(e)})}const h=new Set,g=r()(((e,t,s)=>{const n=u.Z.getAll(),i=Object.values(n).map((e=>{let{id:t}=e;return t})),r=Array.from(t).filter((e=>!i.includes(e)));if(!r.length)return void h.clear();const d=o()(r,10).map((t=>((e,t,s,n)=>{const o=`/organizations/${s}/projects/`,i={statsPeriod:"24h",query:t.map((e=>`id:${e}`)).join(" "),...n};return e.requestPromise(o,{query:i})})(e,t,s.orgId,s.query)));Promise.all(d).then((e=>{u.Z.onStatsLoadSuccess(e.reduce(((e,t)=>e.concat(t)),[]))})).catch((()=>{(0,a.Iw)((0,l.t)("Unable to fetch all project stats"))})),h.clear()}),50);function v(e,t,s){h.add(t),g(e,h,s)}function f(e){d.Z.onSetActiveProject(e)}function x(e,t,s){const n=`/projects/${t}/${s.slug}/`;return e.requestPromise(n,{method:"DELETE"}).then((()=>{(0,a.S9)((0,l._N)("[project] was successfully removed",{project:s.slug}))}),(e=>{throw(0,a.Iw)((0,l._N)("Error removing [project]",{project:s.slug})),e}))}function S(e,t,s,n){const o=`/projects/${t}/${s.slug}/transfer/`;return e.requestPromise(o,{method:"POST",data:{email:n}}).then((()=>{(0,a.S9)((0,l._N)("A request was sent to move [project] to a different organization",{project:s.slug}))}),(e=>{let t="";throw e.status>=400&&e.status<500&&e.responseJSON&&(t=e.responseJSON?.detail),t?(0,a.Iw)((0,l._N)("Error transferring [project]. [message]",{project:s.slug,message:t})):(0,a.Iw)((0,l._N)("Error transferring [project]",{project:s.slug})),e}))}function b(e,t,s,n){const o=`/projects/${t}/${s}/teams/${n.slug}/`;return(0,a.E3)(),e.requestPromise(o,{method:"POST"}).then((e=>{(0,a.S9)((0,l._N)("[team] has been added to the [project] project",{team:`#${n.slug}`,project:s})),c.Z.onAddTeam(n,s),c.Z.onUpdateSuccess(e)}),(e=>{throw(0,a.Iw)((0,l._N)("Unable to add [team] to the [project] project",{team:`#${n.slug}`,project:s})),e}))}function y(e,t,s,n){const o=`/projects/${t}/${s}/teams/${n}/`;return(0,a.E3)(),e.requestPromise(o,{method:"DELETE"}).then((e=>{(0,a.S9)((0,l._N)("[team] has been removed from the [project] project",{team:`#${n}`,project:s})),c.Z.onRemoveTeam(n,s),c.Z.onUpdateSuccess(e)}),(e=>{throw(0,a.Iw)((0,l._N)("Unable to remove [team] from the [project] project",{team:`#${n}`,project:s})),e}))}function j(e,t){c.Z.onChangeSlug(e,t)}function w(e,t,s,n,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return e.requestPromise(`/teams/${t}/${s}/projects/`,{method:"POST",data:{name:n,platform:o,default_rules:i.defaultRules}})}function _(e,t,s,n){return e.requestPromise(`/projects/${t}/${s}/docs/${n}/`)}function Z(e,t){return e.requestPromise(`/organizations/${t}/projects-count/`)}async function I(e,t,s){return(await e.requestPromise(`/organizations/${t}/releases/stats/`,{method:"GET",query:{statsPeriod:"90d",project:s,per_page:1}})).length>0}},"./app/actionCreators/teams.tsx":(e,t,s)=>{"use strict";s.d(t,{Cm:()=>c,PX:()=>a,s:()=>u,tT:()=>m,um:()=>d,z_:()=>l});var n=s("./app/actionCreators/indicator.tsx"),o=s("./app/locale.tsx"),i=s("./app/stores/teamStore.tsx");const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var s=arguments.length,n=new Array(s>2?s-2:0),o=2;o<s;o++)n[o-2]=arguments[o];return e[t]?.(...n)};async function a(e,t){const s=await e.requestPromise(`/organizations/${t.orgId}/user-teams/`);i.Z.loadUserTeams(s)}function l(e,t){i.Z.onUpdateSuccess(e,t)}function d(e,t,s){const n=`/organizations/${t.orgId}/members/${t.memberId??"me"}/teams/${t.teamId}/`;return e.request(n,{method:"POST",success:e=>{i.Z.onUpdateSuccess(t.teamId,e),r(s,"success",e)},error:e=>{r(s,"error",e)}})}function u(e,t,s){const n=`/organizations/${t.orgId}/members/${t.memberId||"me"}/teams/${t.teamId}/`;return e.request(n,{method:"DELETE",success:e=>{i.Z.onUpdateSuccess(t.teamId,e),r(s,"success",e)},error:e=>{r(s,"error",e)}})}function c(e,t,s){return e.requestPromise(`/organizations/${s.orgId}/teams/`,{method:"POST",data:t}).then((e=>(i.Z.onCreateSuccess(e),(0,n.S9)((0,o._N)("[team] has been added to the [organization] organization",{team:`#${e.slug}`,organization:s.orgId})),e)),(e=>{throw(0,n.Iw)((0,o._N)("Unable to create [team] in the [organization] organization",{team:`#${t.slug}`,organization:s.orgId})),e}))}function m(e,t){return e.requestPromise(`/teams/${t.orgId}/${t.teamId}/`,{method:"DELETE"}).then((e=>(i.Z.onRemoveSuccess(t.teamId),(0,n.S9)((0,o._N)("[team] has been removed from the [organization] organization",{team:`#${t.teamId}`,organization:t.orgId})),e)),(e=>{throw(0,n.Iw)((0,o._N)("Unable to remove [team] from the [organization] organization",{team:`#${t.teamId}`,organization:t.orgId})),e}))}},"./app/components/hookOrDefault.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/react/index.js"),i=s("./app/stores/hookStore.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=function(e){let{hookName:t,defaultComponent:s,defaultComponentPromise:a}=e;class l extends o.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{hooks:i.Z.get(t)}),(0,n.Z)(this,"unlistener",i.Z.listen(((e,s)=>e===t&&this.setState({hooks:s})),void 0))}componentWillUnmount(){this.unlistener?.()}get defaultComponent(){if(a){const e=(0,o.lazy)(a);return t=>(0,r.tZ)(o.Suspense,{fallback:null,children:(0,r.tZ)(e,{...t})})}return s}render(){const e=this.state.hooks&&this.state.hooks.length,t=this.state.hooks[0]?.(),s=e&&t?t:this.defaultComponent;return s?(0,r.tZ)(s,{...this.props}):null}}return l.displayName="HookOrDefaultComponent",(0,n.Z)(l,"displayName",`HookOrDefaultComponent(${t})`),l}},"./app/components/modals/inviteMembersModal/index.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>H,modalCss:()=>F});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=s("../node_modules/react/index.js"),r=s("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),a=s("./app/components/asyncComponent.tsx"),l=s("./app/components/button.tsx"),d=s("./app/components/buttonBar.tsx"),u=s("./app/components/hookOrDefault.tsx"),c=s("./app/components/loadingIndicator.tsx"),m=s("./app/components/questionTooltip.tsx"),p=s("./app/constants/index.tsx"),h=s("./app/icons/index.tsx"),g=s("./app/locale.tsx"),v=s("./app/styles/space.tsx"),f=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),x=s("./app/utils/guid.tsx"),S=s("./app/utils/withLatestContext.tsx"),b=s("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),y=s("./app/components/forms/controls/selectControl.tsx"),j=s("./app/components/roleSelectControl.tsx"),w=s("./app/components/teamSelector.tsx"),_=s("./app/icons/iconClose.tsx"),Z=s("../node_modules/react-select/dist/index-4bd03571.esm.js"),I=s("./app/components/tooltip.tsx"),z=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function C(e,t){const{children:s,...n}=t,o=e&&e.error,i=void 0===e?s:(0,z.tZ)(I.u,{disabled:!o,title:o,children:(0,z.BX)(E,{children:[s,!e.sent&&!e.error&&(0,z.tZ)($,{}),e.error&&(0,z.tZ)(h.FC,{legacySize:"10px"}),e.sent&&(0,z.tZ)(h.DL,{legacySize:"10px",color:"success"})]})});return(0,z.tZ)(Z.c.MultiValue,{...n,children:i})}C.displayName="renderEmailValue";const E=(0,o.Z)("div",{target:"e1ikvpuq1"})("display:inline-grid;grid-auto-flow:column;gap:",(0,v.D)(.5),";align-items:center;"),$=(0,o.Z)(c.Z,{target:"e1ikvpuq0"})({name:"440peb",styles:"margin:0;.loading-indicator{border-width:2px;}"});$.defaultProps={hideMessage:!0,size:14};const q=C;function D(e){return e.map((e=>({value:e,label:e})))}function M(e){let{className:t,disabled:s,emails:n,role:o,teams:r,roleOptions:a,roleDisabledUnallowed:d,inviteStatus:u,onRemove:c,onChangeEmails:m,onChangeRole:p,onChangeTeams:h,disableRemove:v}=e;const[f,x]=(0,i.useState)(""),S=(0,b.u)();return(0,z.BX)("li",{className:t,children:[(0,z.tZ)(y.Z,{"aria-label":(0,g.t)("Email Addresses"),"data-test-id":"select-emails",disabled:s,placeholder:(0,g.t)("Enter one or more emails"),inputValue:f,value:n,components:{MultiValue:e=>function(e,t){return q(t[e.data.value],e)}(e,u),DropdownIndicator:()=>null},options:D(n),onBlur:e=>e.target.value&&m([...D(n),{label:e.target.value,value:e.target.value}]),styles:k(S,u),onInputChange:x,onKeyDown:e=>{switch(e.key){case"Enter":case",":case" ":m([...D(n),{label:f,value:f}]),x(""),e.preventDefault()}},onChange:m,multiple:!0,creatable:!0,clearable:!0,menuIsOpen:!1}),(0,z.tZ)(j.Z,{"aria-label":(0,g.t)("Role"),"data-test-id":"select-role",disabled:s,value:o,roles:a,disableUnallowed:d,onChange:p}),(0,z.tZ)(w.Z,{"aria-label":(0,g.t)("Add to Team"),"data-test-id":"select-teams",disabled:s,placeholder:(0,g.t)("Add to teams…"),value:r,onChange:h,multiple:!0,clearable:!0}),(0,z.tZ)(l.zx,{borderless:!0,icon:(0,z.tZ)(_.b,{}),onClick:c,disabled:v,"aria-label":(0,g.t)("Remove")})]})}function k(e,t){return{multiValue:(s,n)=>{let{data:o}=n;return{...s,...t[o.value]?.error?{color:e.red400,border:`1px solid ${e.red300}`,backgroundColor:e.red100}:{}}},multiValueLabel:(s,n)=>{let{data:o}=n;return{...s,pointerEvents:"all",...t[o.value]?.error?{color:e.red400}:{}}},multiValueRemove:(s,n)=>{let{data:o}=n;return{...s,...t[o.value]?.error?{borderLeft:`1px solid ${e.red300}`,":hover":{backgroundColor:e.red100,color:e.red400}}:{}}}}}M.displayName="InviteRowControl";const N=M,P=(0,u.Z)({hookName:"member-invite-modal:customization",defaultComponent:e=>{let{onSendInvites:t,children:s}=e;return s({sendInvites:t,canSend:!0})}});class T extends a.Z{constructor(){super(...arguments),(0,n.Z)(this,"sessionId",""),(0,n.Z)(this,"reset",(()=>{this.setState({pendingInvites:[this.inviteTemplate],inviteStatus:{},complete:!1,sendingInvites:!1}),(0,f.Z)("invite_modal.add_more",{organization:this.props.organization,modal_session:this.sessionId})})),(0,n.Z)(this,"sendInvite",(async e=>{const{slug:t}=this.props.organization,s={email:e.email,teams:[...e.teams],role:e.role};this.setState((t=>({inviteStatus:{...t.inviteStatus,[e.email]:{sent:!1}}})));const n=this.willInvite?`/organizations/${t}/members/`:`/organizations/${t}/invite-requests/`;try{await this.api.requestPromise(n,{method:"POST",data:s})}catch(t){const s=t.responseJSON,n=!(!s||!s.email)&&(Array.isArray(s.email)?s.email[0]:s.email)||(0,g.t)("Could not invite user");return void this.setState((t=>({inviteStatus:{...t.inviteStatus,[e.email]:{sent:!1,error:n}}})))}this.setState((t=>({inviteStatus:{...t.inviteStatus,[e.email]:{sent:!0}}})))})),(0,n.Z)(this,"sendInvites",(async()=>{this.setState({sendingInvites:!0}),await Promise.all(this.invites.map(this.sendInvite)),this.setState({sendingInvites:!1,complete:!0}),(0,f.Z)(this.willInvite?"invite_modal.invites_sent":"invite_modal.requests_sent",{organization:this.props.organization,modal_session:this.sessionId})})),(0,n.Z)(this,"addInviteRow",(()=>this.setState((e=>({pendingInvites:[...e.pendingInvites,this.inviteTemplate]})))))}get inviteTemplate(){return{emails:new Set,teams:new Set,role:"member"}}componentDidMount(){this.sessionId=(0,x.E)();const{organization:e,source:t}=this.props;(0,f.Z)("invite_modal.opened",{organization:e,modal_session:this.sessionId,can_invite:this.willInvite,source:t})}getEndpoints(){return[["member",`/organizations/${this.props.organization.slug}/members/me/`]]}getDefaultState(){const e=super.getDefaultState(),{initialData:t}=this.props;return{...e,pendingInvites:t?t.map((e=>({...this.inviteTemplate,...e}))):[this.inviteTemplate],inviteStatus:{},complete:!1,sendingInvites:!1}}setEmails(e,t){this.setState((s=>{const n=[...s.pendingInvites];return n[t]={...n[t],emails:new Set(e)},{pendingInvites:n}}))}setTeams(e,t){this.setState((s=>{const n=[...s.pendingInvites];return n[t]={...n[t],teams:new Set(e)},{pendingInvites:n}}))}setRole(e,t){this.setState((s=>{const n=[...s.pendingInvites];return n[t]={...n[t],role:e},{pendingInvites:n}}))}removeInviteRow(e){this.setState((t=>{const s=[...t.pendingInvites];return s.splice(e,1),{pendingInvites:s}}))}get invites(){return this.state.pendingInvites.reduce(((e,t)=>[...e,...[...t.emails].map((e=>({email:e,teams:t.teams,role:t.role})))]),[])}get hasDuplicateEmails(){const e=this.invites.map((e=>e.email));return e.length!==new Set(e).size}get isValidInvites(){return this.invites.length>0&&!this.hasDuplicateEmails}get statusMessage(){const{sendingInvites:e,complete:t,inviteStatus:s}=this.state;if(e)return(0,z.BX)(W,{children:[(0,z.tZ)(c.Z,{mini:!0,relative:!0,hideMessage:!0,size:16}),this.willInvite?(0,g.t)("Sending organization invitations…"):(0,g.t)("Sending invite requests…")]});if(t){const e=Object.values(s),t=e.filter((e=>e.sent)).length,n=e.filter((e=>e.error)).length;if(this.willInvite){const e={invites:(0,z.tZ)("strong",{children:(0,g.tn)("%s invite","%s invites",t)}),failed:n};return(0,z.BX)(W,{status:"success",children:[(0,z.tZ)(h.DL,{size:"sm"}),n>0?(0,g._N)("Sent [invites], [failed] failed to send.",e):(0,g._N)("Sent [invites]",e)]})}const o={inviteRequests:(0,z.tZ)("strong",{children:(0,g.tn)("%s invite request","%s invite requests",t)}),failed:n};return(0,z.BX)(W,{status:"success",children:[(0,z.tZ)(h.DL,{size:"sm"}),n>0?(0,g._N)("[inviteRequests] pending approval, [failed] failed to send.",o):(0,g._N)("[inviteRequests] pending approval",o)]})}return this.hasDuplicateEmails?(0,z.BX)(W,{status:"error",children:[(0,z.tZ)(h.FC,{size:"sm"}),(0,g.t)("Duplicate emails between invite rows.")]}):null}get willInvite(){return this.props.organization.access?.includes("member:write")}get inviteButtonLabel(){if(this.invites.length>0){const e=this.invites.length,t=1===e?(0,g.t)("Send invite"):(0,g.t)("Send invites (%s)",e),s=1===e?(0,g.t)("Send invite request"):(0,g.t)("Send invite requests (%s)",e);return this.willInvite?t:s}return this.willInvite?(0,g.t)("Send invite"):(0,g.t)("Send invite request")}render(){const{Footer:e,closeModal:t,organization:s}=this.props,{pendingInvites:n,sendingInvites:o,complete:r,inviteStatus:a,member:u}=this.state,c=o||r;return(0,z.tZ)(P,{organization:s,willInvite:this.willInvite,onSendInvites:this.sendInvites,children:s=>{let{sendInvites:o,canSend:v,headerInfo:x}=s;return(0,z.BX)(i.Fragment,{children:[(0,z.BX)(U,{children:[(0,g.t)("Invite New Members"),!this.willInvite&&(0,z.tZ)(m.Z,{title:(0,g.t)("You do not have permission to directly invite members. Email\n                 addresses entered here will be forwarded to organization\n                 managers and owners; they will be prompted to approve the\n                 invitation."),size:"sm",position:"bottom"})]}),(0,z.tZ)(O,{children:this.willInvite?(0,g.t)("Invite new members by email to join your organization."):(0,g.t)("You don’t have permission to directly invite users, but we'll send a request to your organization owner and manager for review.")}),x,(0,z.BX)(L,{children:[(0,z.tZ)("div",{children:(0,g.t)("Email addresses")}),(0,z.tZ)("div",{children:(0,g.t)("Role")}),(0,z.tZ)("div",{children:(0,g.t)("Add to team")})]}),(0,z.tZ)(R,{children:n.map(((e,t)=>{let{emails:s,role:o,teams:i}=e;return(0,z.tZ)(A,{disabled:c,emails:[...s],role:o,teams:[...i],roleOptions:u?u.roles:p.Gh,roleDisabledUnallowed:this.willInvite,inviteStatus:a,onRemove:()=>this.removeInviteRow(t),onChangeEmails:e=>this.setEmails(e?.map((e=>e.value))??[],t),onChangeRole:e=>this.setRole(e?.value,t),onChangeTeams:e=>this.setTeams(e?e.map((e=>e.value)):[],t),disableRemove:c||1===n.length},t)}))}),(0,z.tZ)(X,{disabled:c,size:"sm",borderless:!0,onClick:this.addInviteRow,icon:(0,z.tZ)(h.N_,{size:"xs",isCircled:!0}),children:(0,g.t)("Add another")}),(0,z.tZ)(e,{children:(0,z.BX)(V,{children:[(0,z.tZ)("div",{children:this.statusMessage}),(0,z.tZ)(d.ZP,{gap:1,children:r?(0,z.BX)(i.Fragment,{children:[(0,z.tZ)(l.zx,{"data-test-id":"send-more",size:"sm",onClick:this.reset,children:(0,g.t)("Send more invites")}),(0,z.tZ)(l.zx,{"data-test-id":"close",priority:"primary",size:"sm",onClick:()=>{(0,f.Z)("invite_modal.closed",{organization:this.props.organization,modal_session:this.sessionId}),t()},children:(0,g.t)("Close")})]}):(0,z.BX)(i.Fragment,{children:[(0,z.tZ)(l.zx,{"data-test-id":"cancel",size:"sm",onClick:t,disabled:c,children:(0,g.t)("Cancel")}),(0,z.tZ)(l.zx,{size:"sm","data-test-id":"send-invites",priority:"primary",disabled:!v||!this.isValidInvites||c,onClick:o,children:this.inviteButtonLabel})]})})]})})]})}})}}T.displayName="InviteMembersModal";const U=(0,o.Z)("h1",{target:"edt9x2z7"})("display:inline-grid;gap:",(0,v.D)(1.5),";grid-auto-flow:column;align-items:center;font-weight:400;font-size:",(e=>e.theme.headerFontSize),";margin-top:0;margin-bottom:",(0,v.D)(.75),";"),O=(0,o.Z)("p",{target:"edt9x2z6"})("color:",(e=>e.theme.subText),";margin-bottom:",(0,v.D)(3),";"),B=(0,r.iv)("display:grid;gap:",(0,v.D)(1.5),";grid-template-columns:3fr 180px 2fr max-content;align-items:start;",""),L=(0,o.Z)("div",{target:"edt9x2z5"})(B,";margin-bottom:",(0,v.D)(1),";font-weight:600;text-transform:uppercase;font-size:",(e=>e.theme.fontSizeSmall),";"),R=(0,o.Z)("ul",{target:"edt9x2z4"})({name:"v5al3",styles:"list-style:none;padding:0;margin:0"}),A=(0,o.Z)(N,{target:"edt9x2z3"})(B,";margin-bottom:",(0,v.D)(1.5),";"),X=(0,o.Z)(l.zx,{target:"edt9x2z2"})("margin-top:",(0,v.D)(3),";"),V=(0,o.Z)("div",{target:"edt9x2z1"})("display:flex;gap:",(0,v.D)(1),";align-items:center;justify-content:space-between;flex:1;"),W=(0,o.Z)("div",{target:"edt9x2z0"})("display:flex;gap:",(0,v.D)(1),";align-items:center;font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>"error"===e.status?e.theme.errorText:e.theme.textColor),";>:first-child{",(e=>"success"===e.status&&`color: ${e.theme.successText}`),";}"),F={name:"16gyilg",styles:"width:100%;max-width:900px;margin:50px auto"},H=(0,S.Z)(T)},"./app/components/roleSelectControl.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("./app/components/forms/controls/selectControl.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e){let{roles:t,disableUnallowed:s,...n}=e;return(0,i.tZ)(o.Z,{options:t?.map((e=>({value:e.id,label:e.name,disabled:s&&!e.allowed||e.isRetired,details:(0,i.tZ)(l,{children:e.desc})}))),showDividers:!0,...n})}r.displayName="RoleSelectControl";const a=r,l=(0,n.Z)("span",{target:"eu9y8de0"})({name:"vad6xm",styles:"display:inline-block;width:20rem"})},"./app/stores/projectsStatsStore.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const n={itemsBySlug:{},init(){this.reset()},getInitialState(){return this.itemsBySlug},reset(){this.itemsBySlug={},this.updatingItems=new Map},onStatsLoadSuccess(e){e.forEach((e=>{this.itemsBySlug[e.slug]=e})),this.trigger(this.itemsBySlug)},onUpdate(e,t){const s=this.getBySlug(e);if(this.updatingItems.set(e,s),!s)return;const n={...s,...t};this.itemsBySlug={...this.itemsBySlug,[s.slug]:n},this.trigger(this.itemsBySlug)},onUpdateSuccess(e){this.updatingItems.delete(e.slug)},onUpdateError(e,t){const s=this.updatingItems.get(t);s&&(this.updatingItems.delete(t),this.itemsBySlug={...this.itemsBySlug,[s.slug]:{...s}},this.trigger(this.itemsBySlug))},getAll(){return this.itemsBySlug},getBySlug(e){return this.itemsBySlug[e]}},o=(0,s("../node_modules/reflux/src/index.js").createStore)(n)},"./app/utils/isActiveSuperuser.tsx":(e,t,s)=>{"use strict";s.d(t,{M:()=>a});var n=s("../node_modules/js-cookie/dist/js.cookie.mjs"),o=s("./app/stores/configStore.tsx");const i=window.superUserCookieName??"su",r=window.superUserCookieDomain;function a(){const{isSuperuser:e}=o.Z.get("user")||{};if(e){const e=o.Z.get("superUserCookieName")||i,t=o.Z.get("superUserCookieDomain")||r;if(n.Z.set(e,"set-in-isActiveSuperuser",{domain:t}),void 0===n.Z.get(e))return!0}return!1}},"./app/utils/useApi.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s("../node_modules/react/index.js"),o=s("./app/api.tsx");const i=function(){let{persistInFlight:e,api:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=(0,n.useRef)();void 0===s.current&&void 0===t&&(s.current=new o.KU);const i=t??s.current,r=(0,n.useCallback)((()=>{e||i.clear()}),[i,e]);return(0,n.useEffect)((()=>r),[r]),i}},"./app/utils/useTeams.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>h}),s("../node_modules/core-js/modules/es.array.includes.js");var n=s("../node_modules/react/index.js"),o=s("../node_modules/lodash/uniqBy.js"),i=s.n(o),r=s("./app/actionCreators/teams.tsx"),a=s("./app/stores/organizationStore.tsx"),l=s("./app/stores/teamStore.tsx"),d=s("./app/stores/useLegacyStore.tsx"),u=s("./app/utils/isActiveSuperuser.tsx"),c=s("./app/utils/parseLinkHeader.tsx"),m=s("./app/utils/useApi.tsx");async function p(e,t){let{slugs:s,ids:n,search:o,limit:i,lastSearch:r,cursor:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l={};void 0!==s&&s.length>0&&(l.query=s.map((e=>`slug:${e}`)).join(" ")),void 0!==n&&n.length>0&&(l.query=n.map((e=>`id:${e}`)).join(" ")),o&&(l.query=`${l.query??""} ${o}`.trim());const d=r===o||!r&&!o;d&&a&&(l.cursor=a),void 0!==i&&(l.per_page=i);let u=!1,m=null;const[p,,h]=await e.requestPromise(`/organizations/${t}/teams/`,{includeAllArgs:!0,query:l}),g=h?.getResponseHeader("Link");if(g){const e=(0,c.Z)(g);u=e?.next?.results,m=e?.next?.cursor}return{results:p,hasMore:u,nextCursor:m}}const h=function(){let{limit:e,slugs:t,ids:s,provideUserTeams:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const c=(0,m.Z)(),{organization:h}=(0,d.X)(a.Z),g=(0,d.X)(l.Z),v=h?.slug,f=new Set(g.teams.map((e=>e.slug))),x=t?.filter((e=>!f.has(e)))??[],S=new Set(g.teams.map((e=>e.id))),b=s?.filter((e=>!S.has(e)))??[],y=x.length>0,j=b.length>0,w=o&&!g.loadedUserTeams,_=!y&&!w&&!j,[Z,I]=(0,n.useState)({initiallyLoaded:_,fetching:!1,hasMore:g.hasMore,lastSearch:null,nextCursor:g.cursor,fetchError:null}),z=(0,n.useRef)(null);if(void 0!==t||void 0!==s){const e=(t||s)??[];null===z.current&&(z.current=new Set(e)),(e.length!==z.current.size||e.some((e=>!z.current?.has(e))))&&(z.current=new Set(e))}async function C(){if(void 0!==v){I({...Z,fetching:!0});try{await(0,r.PX)(c,{orgId:v}),I({...Z,fetching:!1,initiallyLoaded:!0})}catch(e){console.error(e),I({...Z,fetching:!1,initiallyLoaded:!0,fetchError:e})}}}async function E(){if(void 0!==v){I({...Z,fetching:!0});try{const{results:t,hasMore:s,nextCursor:n}=await p(c,v,{slugs:x,ids:b,limit:e}),o=i()([...t,...g.teams],(e=>{let{id:t}=e;return t}));l.Z.loadInitialData(o),I({...Z,hasMore:s,fetching:!1,initiallyLoaded:!0,nextCursor:n})}catch(e){console.error(e),I({...Z,fetching:!1,initiallyLoaded:!0,fetchError:e})}}}function $(e){return""!==e?q(e):(Z.hasMore===g.hasMore&&Z.nextCursor===g.cursor||I({...Z,lastSearch:e,hasMore:g.hasMore,nextCursor:g.cursor}),Promise.resolve())}async function q(t){const{lastSearch:s}=Z,n=t?Z.nextCursor:g.cursor;if(void 0!==v){I({...Z,fetching:!0});try{c.clear();const{results:o,hasMore:r,nextCursor:a}=await p(c,v,{search:t,limit:e,lastSearch:s,cursor:n}),d=i()([...g.teams,...o],(e=>{let{slug:t}=e;return t}));t?d.length>g.teams.length&&l.Z.loadInitialData(d):l.Z.loadInitialData(d,r,a),I({...Z,hasMore:r&&g.hasMore,fetching:!1,lastSearch:t??null,nextCursor:a})}catch(e){console.error(e),I({...Z,fetching:!1,fetchError:e})}}else console.error("Cannot fetch teams without an organization in context")}(0,n.useEffect)((()=>{y||j?E():w&&C()}),[z.current,o]);const D=(0,u.M)(),M=(0,n.useMemo)((()=>t?g.teams.filter((e=>t.includes(e.slug))):s?g.teams.filter((e=>s.includes(e.id))):o&&!D?g.teams.filter((e=>e.isMember)):g.teams),[g.teams,s,t,o,D]),k={teams:M,fetching:Z.fetching||g.loading,initiallyLoaded:Z.initiallyLoaded,fetchError:Z.fetchError,hasMore:Z.hasMore??g.hasMore,onSearch:$,loadMore:q};return k}},"./app/utils/withLatestContext.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/react/index.js"),i=s("./app/stores/configStore.tsx"),r=s("./app/stores/latestContextStore.tsx"),a=s("./app/utils/getDisplayName.tsx"),l=s("./app/utils/withOrganizations.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const u={organization:null,project:null},c=function(e){class t extends o.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{latestContext:r.Z.get()}),(0,n.Z)(this,"unsubscribe",r.Z.listen((e=>this.setState({latestContext:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{organizations:t}=this.props,{latestContext:s}=this.state,{organization:n,project:o}=s||u,r=n||(t&&t.length?t.find((e=>{let{slug:t}=e;return t===i.Z.get("lastOrganization")}))||t[0]:null);return(0,d.tZ)(e,{project:o,...this.props,organization:this.props.organization||r})}}return t.displayName="WithLatestContext",(0,n.Z)(t,"displayName",`withLatestContext(${(0,a.Z)(e)})`),(0,l.Z)(t)}},"./app/utils/withOrganizations.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/react/index.js"),i=s("./app/stores/organizationsStore.tsx"),r=s("./app/utils/getDisplayName.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=function(e){class t extends o.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{organizations:i.Z.getAll()}),(0,n.Z)(this,"unsubscribe",i.Z.listen((e=>this.setState({organizations:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{organizationsLoading:t,organizations:s,...n}=this.props;return(0,a.tZ)(e,{organizationsLoading:t??!i.Z.loaded,organizations:s??this.state.organizations,...n})}}return t.displayName="WithOrganizations",(0,n.Z)(t,"displayName",`withOrganizations(${(0,r.Z)(e)})`),t}},"../node_modules/lodash/_arrayIncludes.js":(e,t,s)=>{var n=s("../node_modules/lodash/_baseIndexOf.js");e.exports=function(e,t){return!(null==e||!e.length)&&n(e,t,0)>-1}},"../node_modules/lodash/_arrayIncludesWith.js":e=>{e.exports=function(e,t,s){for(var n=-1,o=null==e?0:e.length;++n<o;)if(s(t,e[n]))return!0;return!1}},"../node_modules/lodash/_baseUniq.js":(e,t,s)=>{var n=s("../node_modules/lodash/_SetCache.js"),o=s("../node_modules/lodash/_arrayIncludes.js"),i=s("../node_modules/lodash/_arrayIncludesWith.js"),r=s("../node_modules/lodash/_cacheHas.js"),a=s("../node_modules/lodash/_createSet.js"),l=s("../node_modules/lodash/_setToArray.js");e.exports=function(e,t,s){var d=-1,u=o,c=e.length,m=!0,p=[],h=p;if(s)m=!1,u=i;else if(c>=200){var g=t?null:a(e);if(g)return l(g);m=!1,u=r,h=new n}else h=t?[]:p;e:for(;++d<c;){var v=e[d],f=t?t(v):v;if(v=s||0!==v?v:0,m&&f==f){for(var x=h.length;x--;)if(h[x]===f)continue e;t&&h.push(f),p.push(v)}else u(h,f,s)||(h!==p&&h.push(f),p.push(v))}return p}},"../node_modules/lodash/_createSet.js":(e,t,s)=>{var n=s("../node_modules/lodash/_Set.js"),o=s("../node_modules/lodash/noop.js"),i=s("../node_modules/lodash/_setToArray.js"),r=n&&1/i(new n([,-0]))[1]==1/0?function(e){return new n(e)}:o;e.exports=r},"../node_modules/lodash/chunk.js":(e,t,s)=>{var n=s("../node_modules/lodash/_baseSlice.js"),o=s("../node_modules/lodash/_isIterateeCall.js"),i=s("../node_modules/lodash/toInteger.js"),r=Math.ceil,a=Math.max;e.exports=function(e,t,s){t=(s?o(e,t,s):void 0===t)?1:a(i(t),0);var l=null==e?0:e.length;if(!l||t<1)return[];for(var d=0,u=0,c=Array(r(l/t));d<l;)c[u++]=n(e,d,d+=t);return c}},"../node_modules/lodash/findLastIndex.js":(e,t,s)=>{var n=s("../node_modules/lodash/_baseFindIndex.js"),o=s("../node_modules/lodash/_baseIteratee.js"),i=s("../node_modules/lodash/toInteger.js"),r=Math.max,a=Math.min;e.exports=function(e,t,s){var l=null==e?0:e.length;if(!l)return-1;var d=l-1;return void 0!==s&&(d=i(s),d=s<0?r(l+d,0):a(d,l-1)),n(e,o(t,3),d,!0)}},"../node_modules/lodash/noop.js":e=>{e.exports=function(){}},"../node_modules/lodash/uniqBy.js":(e,t,s)=>{var n=s("../node_modules/lodash/_baseIteratee.js"),o=s("../node_modules/lodash/_baseUniq.js");e.exports=function(e,t){return e&&e.length?o(e,n(t,2)):[]}},"../node_modules/react-document-title/index.js":(e,t,s)=>{"use strict";var n=s("../node_modules/react/index.js"),o=s("../node_modules/prop-types/index.js"),i=s("../node_modules/react-side-effect/lib/index.js");function r(){}r.prototype=Object.create(n.Component.prototype),r.displayName="DocumentTitle",r.propTypes={title:o.string.isRequired},r.prototype.render=function(){return this.props.children?n.Children.only(this.props.children):null},e.exports=i((function(e){var t=e[e.length-1];if(t)return t.title}),(function(e){var t=e||"";t!==document.title&&(document.title=t)}))(r)},"../node_modules/react-side-effect/lib/index.js":(e,t,s)=>{"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var o=s("../node_modules/react/index.js"),i=n(o),r=n(s("../node_modules/shallowequal/index.js"));function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var l=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=function(e,t,s){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==s&&"function"!=typeof s)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(n){if("function"!=typeof n)throw new Error("Expected WrappedComponent to be a React component.");var d,u=[];function c(){d=e(u.map((function(e){return e.props}))),m.canUseDOM?t(d):s&&(d=s(d))}var m=function(e){var t,s;function o(){return e.apply(this,arguments)||this}s=e,(t=o).prototype=Object.create(s.prototype),t.prototype.constructor=t,t.__proto__=s,o.peek=function(){return d},o.rewind=function(){if(o.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=d;return d=void 0,u=[],e};var a=o.prototype;return a.shouldComponentUpdate=function(e){return!r(e,this.props)},a.componentWillMount=function(){u.push(this),c()},a.componentDidUpdate=function(){c()},a.componentWillUnmount=function(){var e=u.indexOf(this);u.splice(e,1),c()},a.render=function(){return i.createElement(n,this.props)},o}(o.Component);return a(m,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(n)+")"),a(m,"canUseDOM",l),m}}},"../node_modules/shallowequal/index.js":e=>{e.exports=function(e,t,s,n){var o=s?s.call(n,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<i.length;l++){var d=i[l];if(!a(d))return!1;var u=e[d],c=t[d];if(!1===(o=s?s.call(n,u,c,d):void 0)||void 0===o&&u!==c)return!1}return!0}}}]);
//# sourceMappingURL=../sourcemaps/app_actionCreators_projects_tsx-app_components_modals_inviteMembersModal_index_tsx-app_utils_-ec36ab.6ad409da341df1c232d6d46623c9c840.js.map