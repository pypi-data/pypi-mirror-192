"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_searchBar_tsx-app_views_profiling_profileGroupProvider_tsx"],{"./app/components/searchBar.tsx":(e,t,r)=>{r.d(t,{Z:()=>g,p:()=>f});var s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=r("../node_modules/react/index.js"),i=r("./app/components/button.tsx"),o=r("./app/components/inputGroup.tsx"),a=r("./app/icons/index.tsx"),l=r("./app/icons/iconClose.tsx"),h=r("./app/locale.tsx"),c=r("./app/styles/space.tsx"),u=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{query:t,defaultQuery:r="",onChange:s,onSearch:i,width:c,size:d,className:g,trailing:y,...w}=e;const v=(0,n.useRef)(null),[k,b]=(0,n.useState)(t??r);(0,n.useEffect)((()=>{"string"==typeof t&&b(t)}),[t]);const I=(0,n.useCallback)((e=>{const{value:t}=e.target;b(t),s?.(t)}),[s]),x=(0,n.useCallback)((e=>{e.preventDefault(),v.current?.blur(),i?.(k)}),[i,k]),_=(0,n.useCallback)((()=>{b(""),s?.(""),i?.("")}),[s,i]);return(0,u.tZ)(p,{onSubmit:x,className:g,children:(0,u.BX)(o.BZ,{children:[(0,u.tZ)(o.t_,{disablePointerEvents:!0,children:(0,u.tZ)(a.jV,{color:"subText",size:"xs"===d?"xs":"sm"})}),(0,u.tZ)(m,{...w,ref:v,type:"text",name:"query",autoComplete:"off",value:k,onChange:I,width:c,size:d}),(0,u.BX)(o.Oj,{children:[y,!!k&&(0,u.tZ)(f,{size:"zero",borderless:!0,onClick:_,icon:(0,u.tZ)(l.b,{size:"xs"}),"aria-label":(0,h.t)("Clear")})]})]})})}d.displayName="SearchBar";const p=(0,s.Z)("form",{target:"elu65nr2"})({name:"4bgdod",styles:"display:block;position:relative"}),m=(0,s.Z)(o.II,{target:"elu65nr1"})((e=>e.width&&`width: ${e.width};`),";"),f=(0,s.Z)(i.zx,{target:"elu65nr0"})("color:",(e=>e.theme.subText),";padding:",(0,c.D)(.5),";"),g=d},"./app/utils/profiling/callTreeNode.tsx":(e,t,r)=>{r.d(t,{n:()=>o});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=r("./app/utils/profiling/frame.tsx"),i=r("./app/utils/profiling/weightedNode.tsx");class o extends i.${constructor(e,t){super(),(0,s.Z)(this,"frame",void 0),(0,s.Z)(this,"locked",!1),(0,s.Z)(this,"count",0),(0,s.Z)(this,"parent",void 0),(0,s.Z)(this,"recursive",void 0),(0,s.Z)(this,"children",[]),this.recursive=null,this.parent=t,this.frame=e}setParent(e){this.parent=e}setRecursiveThroughNode(e){this.recursive=e}incrementCount(){this.count++}isRecursive(){return!!this.recursive}isDirectRecursive(){return!!this.parent&&this.parent.frame===this.frame}isLocked(){return this.locked}lock(){this.locked=!0}isRoot(){return n.R.Root.name===this.frame.name}}(0,s.Z)(o,"Root",new o(n.R.Root,null))},"./app/utils/profiling/frame.tsx":(e,t,r)=>{r.d(t,{R:()=>o});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=r("./app/locale.tsx"),i=r("./app/utils/profiling/weightedNode.tsx");class o extends i.${constructor(e,t){if(super(),(0,s.Z)(this,"key",void 0),(0,s.Z)(this,"name",void 0),(0,s.Z)(this,"file",void 0),(0,s.Z)(this,"line",void 0),(0,s.Z)(this,"column",void 0),(0,s.Z)(this,"is_application",void 0),(0,s.Z)(this,"path",void 0),(0,s.Z)(this,"image",void 0),(0,s.Z)(this,"resource",void 0),(0,s.Z)(this,"threadId",void 0),(0,s.Z)(this,"inline",void 0),this.key=e.key,this.file=e.file,this.name=e.name,this.resource=e.resource,this.line=e.line,this.column=e.column,this.is_application=!!e.is_application,this.image=e.image,this.threadId=e.threadId,this.path=e.path,e.columnNumber&&void 0===this.column&&(this.column=e.columnNumber),e.lineNumber&&void 0===this.column&&(this.line=e.lineNumber),e.scriptName&&void 0===this.column&&(this.resource=e.scriptName),"web"===t||"node"===t){"(garbage collector)"!==this.name&&"(root)"!==this.name||(this.is_application=!1),this.name&&!this.name.startsWith("unknown ")||(this.name=(0,n.t)("<anonymous>")),void 0===this.line&&void 0===this.column&&(this.name+=` ${(0,n.t)("[native code]")}`,this.is_application=!1);const e=this.path||this.file;if(e){if(e.startsWith("node:internal")&&(this.is_application=!1),void 0===this.image&&e){const t=/node_modules(\/|\\)(?<maybeScopeOrPackage>.*?)(\/|\\)((?<maybePackage>.*)((\/|\\)))?/.exec(e);if(t?.groups){const{maybeScopeOrPackage:e,maybePackage:r}=t.groups;e.startsWith("@")?this.image=`${e}/${r}`:this.image=t.groups.maybeScopeOrPackage,this.is_application=!1}}if("node:"===e?.substring(0,5)){let t="";const r=e.length;for(let s=0;s<r;s++){if("/"===e.charAt(s)){for(t+="/",s++;s<r&&"/"!==e.charAt(s);)t+=e.charAt(s),s++;break}t+=e.charAt(s)}this.image=t}}}this.name||(this.name=(0,n.t)("<unknown>"))}isRoot(){return this.name===o.Root.name}}(0,s.Z)(o,"Root",new o({key:"sentry root",name:"sentry root",is_application:!1},"mobile"))},"./app/utils/profiling/guards/profile.tsx":(e,t,r)=>{function s(e){return"object"==typeof e&&"profiles"in e&&Array.isArray(e.profiles)&&"shared"in e}function n(e){return"type"in e&&"evented"===e.type}function i(e){return"type"in e&&"sampled"===e.type}function o(e){return!("type"in e)&&Array.isArray(e.resources)}function a(e){return"profile"in e&&"samples"in e.profile&&"stacks"in e.profile&&"frames"in e.profile}function l(e){return"object"==typeof e&&"traceEvents"in e}function h(e){return Array.isArray(e)&&!e.some((e=>"P"===e.ph&&"ProfileChunk"===e.name))}function c(e){return h(e)||l(e)||function(e){return Array.isArray(e)&&e.some((e=>"P"===e.ph&&"ProfileChunk"===e.name))}(e)}r.d(t,{AN:()=>a,BE:()=>o,Us:()=>i,_b:()=>h,bf:()=>n,nN:()=>s,pi:()=>c,zx:()=>l})},"./app/utils/profiling/profile/importProfile.tsx":(e,t,r)=>{r.d(t,{B_:()=>N,F$:()=>E}),r("../node_modules/core-js/modules/es.error.cause.js"),r("../node_modules/core-js/modules/es.array.push.js");var s=r("../node_modules/@sentry/core/esm/exports.js"),n=r("./app/utils/profiling/guards/profile.tsx"),i=r("./app/utils/profiling/frame.tsx"),o=r("./app/utils/profiling/profile/utils.tsx"),a=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),l=(r("../node_modules/core-js/modules/es.array.at.js"),r("../node_modules/core-js/modules/es.string.at-alternative.js"),r("./app/utils.tsx")),h=r("./app/utils/profiling/callTreeNode.tsx"),c=r("./app/utils/profiling/units/units.ts"),u=r("./app/utils/profiling/profile/profile.tsx");class d extends u.N{constructor(){super(...arguments),(0,a.Z)(this,"calltree",[this.callTree]),(0,a.Z)(this,"stack",[]),(0,a.Z)(this,"lastValue",0),(0,a.Z)(this,"samplingIntervalApproximation",0)}static FromProfile(e,t,r){const s=new d({duration:e.endValue-e.startValue,startedAt:e.startValue,endedAt:e.endValue,name:e.name,unit:e.unit,threadId:e.threadID,type:r.type});s.lastValue=Math.max(0,e.startValue),s.samplingIntervalApproximation=(0,c.CD)(10,"milliseconds",e.unit);for(const r of e.events){const e=t[r.frame];if(!e)throw new Error(`Cannot retrieve event: ${r.frame} from frame index`);switch(r.type){case"O":s.enterFrame(e,r.at);break;case"C":s.leaveFrame(e,r.at);break;default:throw new TypeError(`Unknown event type ${r.type}`)}}const n=s.build();if("flamegraph"===r.type){const e=new Set,t=[],r=[];for(let s=0;s<n.samples.length;s++){const i=n.samples[s];e.has(i)||(e.add(i),t.push(i),r.push(i.totalWeight))}n.samples=t,n.weights=r}return n}addWeightToFrames(e){const t=e-this.lastValue;for(const e of this.stack)e.addToTotalWeight(t);const r=(0,l.SI)(this.stack);r&&r.addToSelfWeight(e)}addWeightsToNodes(e){const t=e-this.lastValue;for(const e of this.calltree)e.addToTotalWeight(t);const r=(0,l.SI)(this.calltree);r&&r.addToSelfWeight(t)}enterFrame(e,t){this.addWeightToFrames(t),this.addWeightsToNodes(t);const r=(0,l.SI)(this.calltree);if(r){const s=t-this.lastValue;if(s<0)throw new Error("Sample delta cannot be negative, samples may be corrupt or out of order");let n;if(s>0&&(this.samples.push(r),this.weights.push(s)),"flamegraph"===this.type){const t=r.children.find((t=>t.frame===e));t?n=t:(n=new h.n(e,r),r.children.push(n))}else{const t=(0,l.SI)(r.children);t&&!t.isLocked()&&t.frame===e?n=t:(n=new h.n(e,r),r.children.push(n))}let i=this.calltree.length-1;for(;i>=0;){if(this.calltree[i].frame===n.frame){this.calltree[i].setRecursiveThroughNode(n),n.setRecursiveThroughNode(this.calltree[i]);break}i--}this.calltree.push(n)}this.stack.push(e),this.lastValue=t}leaveFrame(e,t){this.addWeightToFrames(t),this.addWeightsToNodes(t),this.trackSampleStats(t);const r=this.calltree.pop();if(void 0===r)throw new Error("Unbalanced stack");r.lock();const s=t-this.lastValue;r.count+=Math.ceil(r.totalWeight/this.samplingIntervalApproximation),s>0&&(this.samples.push(r),this.weights.push(s),this.minFrameDuration=Math.min(s,this.minFrameDuration)),this.stack.pop(),this.lastValue=t}build(){if(this.calltree.length>1)throw new Error("Unbalanced append order stack");return this.duration=Math.max(this.duration,this.weights.reduce(((e,t)=>e+t),0)),this.minFrameDuration!==Number.POSITIVE_INFINITY&&0!==this.minFrameDuration||(this.minFrameDuration=this.duration),this}}class p extends d{}function m(e,t){return t.ts-e.ts}function f(e,t){if(!e.length&&!t.length)throw new Error("Profile contains no events");const r=e[e.length-1],s=t[t.length-1];return s?r?r.ts<s.ts?"B":s.ts<r.ts?"E":"B":"E":"B"}function g(e,t,r,s){let n=`pid (${e})`,o=`tid (${t})`;const a=r.filter((e=>"B"===e.ph||"E"===e.ph||"X"===e.ph||"M"===e.ph)),l=[],h=[];for(let r=0;r<a.length;r++){const s=a[r];if("M"===s.ph){if("thread_name"===s.name&&"string"==typeof s.args.name){o=`${s.args.name} (${t})`;continue}if("process_name"===s.name&&"string"==typeof s.args.name){n=`${s.args.name} (${e})`;continue}}"B"!==s.ph?"E"!==s.ph?"X"!==s.ph||"number"!=typeof s.dur&&"number"!=typeof s.tdur||(l.push({...s,ph:"B"}),h.push({...s,ph:"E",ts:s.ts+(s.dur??s.tdur??0)})):h.push(s):l.push(s)}if(l.sort(m),h.sort(m),!l.length)throw new Error("Profile does not contain any frame events");const c=l[l.length-1].ts,u=h[0]?.ts??l[0].ts;if("number"!=typeof c)throw new Error("First begin event contains no timestamp");if("number"!=typeof u)throw new Error("Last end event contains no timestamp");const d=new p({duration:u-c,startedAt:c,endedAt:u,name:`${n}: ${o}`,unit:"microseconds",threadId:t,type:s}),g=[],w=new Map;for(;l.length>0||h.length>0;){const e=f(l,h);if("B"!==e)if("E"!==e);else{const e=h.pop();let t=y(e);if(void 0===g[g.length-1])throw new Error(`Unable to close frame from an empty stack, attempting to close ${JSON.stringify(e)}`);const r=y(g[g.length-1]);for(let e=h.length-2;e>0&&!(h[e].ts>h[h.length-1].ts);e--){const s=y(h[e]);if(r.key===s.key){const r=h[h.length-1];h[h.length-1]=h[e],h[e]=r,t=s;break}}if(!w.has(t.key))throw new Error(`Cannot leave frame that was never entered, leaving ${t.key}`);const s=w.get(t.key);d.leaveFrame(s,e.ts-c),g.pop()}else{const e=l.pop();if(!e)throw new Error("Nothing to take from begin queue");const t=y(e);w.has(t.key)||w.set(t.key,new i.R(t));const r=w.get(t.key);d.enterFrame(r,e.ts-c),g.push(e)}}for(;g.length;){const e=y(g.pop()),t=w.get(e.key);if(!t)throw new Error(`Cannot leave frame that was never entered, leaving ${e.key}`);d.leaveFrame(t,t.totalWeight)}return d.build()}function y(e){const t=JSON.stringify(e.args);return{key:t,name:`${e?.name||"Unknown"} ${t}`.trim()}}var w=r("./app/locale.tsx");function v(e){switch(e){case"gc":return(0,w.t)("Garbage Collection");case"style":return(0,w.t)("Style");case"layout":return(0,w.t)("Layout");case"paint":return(0,w.t)("Paint");case"script":return(0,w.t)("Script");case"other":return(0,w.t)("Other");default:return e}}function k(e){return{name:v(e),resourceId:void 0,line:void 0,column:void 0}}function b(e,t,r,s){const n=[];if(s&&"script"!==s&&n.unshift(new i.R({...k(s),key:s})),void 0===t)return n;let o=e.stacks[t];if(!o)throw new Error(`Missing stackId ${t} in trace, cannot resolve stack`);for(;void 0!==o;){if(void 0===e.frames[o.frameId])return n;n.unshift(r[o.frameId]),o=void 0!==o.parentId?e.stacks[o.parentId]:void 0}return n}r("../node_modules/core-js/modules/es.array.unshift.js");class I extends u.N{static FromProfile(e,t,r){const s=["gc","layout","other","paint","script","style"];for(const e of s)t[e]=new i.R({key:e,name:v(e),line:void 0,column:void 0,is_application:!1},"web");const n=e.samples[0].timestamp,o=(0,l.SI)(e.samples).timestamp,a=new I({duration:o-n,startedAt:n,endedAt:o,name:"JSSelfProfiling",unit:"milliseconds",threadId:0,type:r.type}),h="flamegraph"===r.type?function(e){return[...e].sort(((e,t)=>e.stackId-t.stackId))}(e.samples):e.samples;"flamechart"===r.type&&a.appendSample(b(e,e.samples[0].stackId,t,e.samples[0].marker),0);for(let s=1;s<h.length;s++)"gc"===h[s].marker&&"flamechart"===r.type?a.appendSample(b(e,h[s-1].stackId,t,h[s].marker),h[s].timestamp-h[s-1].timestamp):a.appendSample(b(e,h[s].stackId,t,h[s].marker),h[s].timestamp-h[s-1].timestamp);return a.build()}appendSample(e,t){this.trackSampleStats(t);let r=this.callTree;const s=[];for(const n of e){const e=(0,l.SI)(r.children);if(e&&!e.isLocked()&&e.frame===n)r=e;else{const e=r;r=new h.n(n,r),e.children.push(r)}r.addToTotalWeight(t);let i=s.length-1;for(;i>=0;){if(s[i].frame===r.frame){s[i].setRecursiveThroughNode(r),r.setRecursiveThroughNode(s[i]);break}i--}s.push(r)}r.addToSelfWeight(t),t>0&&(this.minFrameDuration=Math.min(t,this.minFrameDuration));for(const e of r.children)e.lock();r.frame.addToSelfWeight(t);for(const e of s)e.frame.addToTotalWeight(t),e.incrementCount();r===(0,l.SI)(this.samples)?this.weights[this.weights.length-1]+=t:(this.samples.push(r),this.weights.push(t))}build(){return this.duration=Math.max(this.duration,this.weights.reduce(((e,t)=>e+t),0)),this.minFrameDuration!==Number.POSITIVE_INFINITY&&0!==this.minFrameDuration||(this.minFrameDuration=this.duration),this}}var x=r("./app/utils/profiling/profile/sampledProfile.tsx");class _ extends u.N{static FromProfile(e,t,r){const{stacks:s,thread_metadata:n={}}=e.profile,i="flamegraph"===r.type?function(e){return[...e].sort(((e,t)=>e.stack_id-t.stack_id))}(e.profile.samples):e.profile.samples,o=parseInt(i[0].elapsed_since_start_ns,10),a=parseInt(i[i.length-1].elapsed_since_start_ns,10);if(Number.isNaN(o)||Number.isNaN(a))throw TypeError("startedAt or endedAt is NaN");const l=parseInt(i[0].thread_id,10),h=`thread: ${n[i[0].thread_id]?.name||l}`,c=e.transactions?.[0]?.name,u=new _({duration:a-o,startedAt:o,endedAt:a,unit:"nanoseconds",name:c?`${c} (${h})`:h,threadId:l,type:r.type});let d=0;for(let e=0;e<i.length;e++){const r=i[e],n=s[r.stack_id],o=parseInt(r.elapsed_since_start_ns,10);u.appendSampleWithWeight(n.map((e=>{if(!t[e])throw new Error(`Could not resolve frame ${e} in frame index`);return t[e]})),o-d),d=o}return u.build()}appendSampleWithWeight(e,t){if(this.trackSampleStats(t),0===t)return;let r=this.callTree;const s=[];for(let n=e.length-1;n>=0;n--){const i=e[n],o=(0,l.SI)(r.children);if(o&&!o.isLocked()&&o.frame===i)r=o;else{const e=r;r=new h.n(i,r),e.children.push(r)}r.addToTotalWeight(t);let a=s.length-1;for(;a>=0;){if(s[a].frame===r.frame){s[a].setRecursiveThroughNode(r),r.setRecursiveThroughNode(s[a]);break}a--}s.push(r)}r.addToSelfWeight(t),this.minFrameDuration=Math.min(t,this.minFrameDuration);for(const e of r.children)e.lock();r.frame.addToSelfWeight(t);for(const e of s)e.frame.addToTotalWeight(t),e.incrementCount();r===(0,l.SI)(this.samples)?this.weights[this.weights.length-1]+=t:(this.samples.push(r),this.weights.push(t))}build(){return this.duration=Math.max(this.duration,this.weights.reduce(((e,t)=>e+t),0)),this.minFrameDuration!==Number.POSITIVE_INFINITY&&0!==this.minFrameDuration||(this.minFrameDuration=this.duration),this}}function N(e,t,r){const i=s.Yr({op:"import",name:"profiles.import"});try{if((0,n.BE)(e))return i&&i.setTag("profile.type","js-self-profile"),function(e,t,r){const s=S(e,(0,o.vw)("web",e.frames),r);return{traceID:t,name:t,transactionID:null,activeProfileIndex:0,profiles:[s],measurements:{},metadata:{platform:"javascript",durationNS:s.duration}}}(e,t,{transaction:i,type:r});if((0,n.pi)(e))return i&&i.setTag("profile.type","chrometrace"),function(e,t,r){if((0,n.zx)(e))throw new Error("Chrometrace object format is not yet supported");if((0,n._b)(e))return function(e,t,r){const s=[],n=function(e){const t=new Map;for(let r=0;r<e.length;r++){const s=e[r];if("number"!=typeof s.pid)continue;if("number"!=typeof s.tid)continue;let n=t.get(s.pid);n||(n=new Map,t.set(s.pid,n));let i=n.get(s.tid);i||(i=[],n.set(s.tid,i)),i.push(s)}return t}(e);for(const[e,t]of n)for(const[n,i]of t)(0,o.GB)(r?.transaction,(()=>s.push(g(e,n,i??[],r.type))),{op:"profile.import",description:"chrometrace"});return{name:"chrometrace",traceID:t,transactionID:null,activeProfileIndex:0,profiles:s,metadata:{},measurements:{}}}(e,t,r);throw new Error("Failed to parse trace input format")}(e,t,{transaction:i,type:r});if((0,n.AN)(e))return i&&i.setTag("profile.type","sentry-sampled"),function(e,t){const r=(0,o.h1)(e.profile.frames),s={};for(let t=0;t<e.profile.samples.length;t++){const r=e.profile.samples[t];s[r.thread_id]||(s[r.thread_id]=[]),s[r.thread_id].push(r)}for(const e in s)s[e].sort(((e,t)=>parseInt(e.elapsed_since_start_ns,10)-parseInt(t.elapsed_since_start_ns,10)));const n=[];for(const i in s){const a={...e,profile:{...e.profile,samples:s[i]}};n.push((0,o.GB)(t.transaction,(()=>_.FromProfile(a,r,{type:t.type})),{op:"profile.import",description:"evented"}))}const i=e.transactions?.[0];return{transactionID:i?.id??null,traceID:i?.trace_id??"",name:i?.name??"",activeProfileIndex:0,measurements:{},metadata:{deviceLocale:e.device.locale,deviceManufacturer:e.device.manufacturer,deviceModel:e.device.model,deviceOSName:e.os.name,deviceOSVersion:e.os.version,durationNS:parseInt(e.profile.samples[e.profile.samples.length-1].elapsed_since_start_ns,10),environment:e.environment,platform:e.platform,profileID:e.event_id,transactionID:i?.id,transactionName:i?.name,traceID:i?.trace_id},profiles:n}}(e,{transaction:i,type:r});if((0,n.nN)(e))return i&&i.setTag("profile.type","schema"),function(e,t,r){const s=(0,o.vw)("node"===e.metadata.platform?"node":"mobile",e.shared.frames);return{traceID:t,transactionID:e.metadata.transactionID??null,name:e.metadata?.transactionName??t,activeProfileIndex:e.activeProfileIndex??0,metadata:e.metadata??{},measurements:e.measurements??{},profiles:e.profiles.map((e=>S(e,s,r)))}}(e,t,{transaction:i,type:r});throw new Error("Unsupported trace format")}catch(e){throw i&&i.setStatus("internal_error"),e}finally{i&&i.finish()}}function S(e,t,r){let{transaction:s,type:i}=r;if((0,n.bf)(e))return s?(0,o.GB)(s,(()=>d.FromProfile(e,t,{type:i})),{op:"profile.import",description:"evented"}):d.FromProfile(e,t,{type:i});if((0,n.Us)(e))return s?(0,o.GB)(s,(()=>x.J.FromProfile(e,t,{type:i})),{op:"profile.import",description:"sampled"}):x.J.FromProfile(e,t,{type:i});if((0,n.BE)(e))return s?(0,o.GB)(s,(()=>I.FromProfile(e,(0,o.vw)("web",e.frames),{type:i})),{op:"profile.import",description:"js-self-profile"}):I.FromProfile(e,(0,o.vw)("web",e.frames),{type:i});throw new Error("Unrecognized trace format")}const T=e=>{try{return[JSON.parse(e),null]}catch(e){return[null,e]}},F=[e=>T(e),e=>T(e+"]")];function P(e){return new Promise(((t,r)=>{const s=new FileReader;s.addEventListener("load",(e=>{"string"!=typeof e.target?.result?r("Failed to read string contents of input file"):t(e.target.result)})),s.addEventListener("error",(()=>{r("Failed to read string contents of input file")})),s.readAsText(e)}))}async function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F;const r=await P(e);for(const e of t){const[t]=e(r);if(t){if("object"!=typeof t||null===t)throw new TypeError("Input JSON is not an object");return t}}throw new Error("Failed to parse input JSON")}},"./app/utils/profiling/profile/profile.tsx":(e,t,r)=>{r.d(t,{N:()=>a});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(r("../node_modules/core-js/modules/es.array.push.js"),r("../node_modules/core-js/modules/es.array.unshift.js"),r("./app/utils.tsx")),i=r("./app/utils/profiling/callTreeNode.tsx"),o=r("./app/utils/profiling/frame.tsx");class a{constructor(e){let{duration:t,startedAt:r,endedAt:n,name:a,unit:l,threadId:h,type:c}=e;(0,s.Z)(this,"duration",void 0),(0,s.Z)(this,"startedAt",void 0),(0,s.Z)(this,"endedAt",void 0),(0,s.Z)(this,"threadId",void 0),(0,s.Z)(this,"type",void 0),(0,s.Z)(this,"unit","microseconds"),(0,s.Z)(this,"name","Unknown"),(0,s.Z)(this,"callTree",new i.n(o.R.Root,null)),(0,s.Z)(this,"framesInStack",new Set),(0,s.Z)(this,"minFrameDuration",Number.POSITIVE_INFINITY),(0,s.Z)(this,"samples",[]),(0,s.Z)(this,"weights",[]),(0,s.Z)(this,"rawWeights",[]),(0,s.Z)(this,"stats",{discardedSamplesCount:0,negativeSamplesCount:0}),this.threadId=h,this.duration=t,this.startedAt=r,this.endedAt=n,this.name=a,this.unit=l,this.type=c??""}isEmpty(){return this===a.Empty}trackSampleStats(e){0===e&&this.stats.discardedSamplesCount++,e<0&&this.stats.negativeSamplesCount++,e>0&&this.rawWeights.push(e)}forEach(e,t){let r=[],s=0,i=0;for(const o of this.samples){let a=o;for(;a&&!a.isRoot()&&-1===r.indexOf(a);)a=a.parent;for(;r.length>0&&(0,n.SI)(r)!==a;)t(r.pop(),s);const l=[];let h=o;for(;h&&!h.isRoot()&&h!==a;)l.unshift(h),h=h.parent;for(const t of l)e(t,s);r=r.concat(l),s+=this.weights[i++]}for(let e=r.length-1;e>=0;e--)t(r[e],s)}build(){return this.duration=Math.max(this.duration,this.weights.reduce(((e,t)=>e+t),0)),this.minFrameDuration!==Number.POSITIVE_INFINITY&&0!==this.minFrameDuration||(this.minFrameDuration=this.duration),this}}(0,s.Z)(a,"Empty",new a({duration:1e3,startedAt:0,endedAt:1e3,name:"Empty Profile",unit:"milliseconds",threadId:0,type:""}).build())},"./app/utils/profiling/profile/sampledProfile.tsx":(e,t,r)=>{r.d(t,{J:()=>c});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(r("../node_modules/core-js/modules/es.error.cause.js"),r("../node_modules/core-js/modules/es.array.push.js"),r("./app/utils/profiling/callTreeNode.tsx")),i=r("./app/utils/profiling/frame.tsx"),o=r("./app/utils/profiling/profile/profile.tsx");function a(e,t){const r=Math.max(e.stack.length,t.stack.length);for(let s=0;s<r;s++){if(void 0===e.stack[s])return-1;if(void 0===t.stack[s])return 1;if(e.stack[s]!==t.stack[s])return e.stack[s]-t.stack[s]}return 0}function l(e){return e.samples.map(((t,r)=>({stack:t,weight:e.weights[r]})))}function h(e){throw new Error(`Could not resolve frame ${e} in frame index`)}class c extends o.N{static FromProfile(e,t,r){const s=new c({duration:e.endValue-e.startValue,startedAt:e.startValue,endedAt:e.endValue,name:e.name,unit:e.unit,threadId:e.threadID,type:r.type});if(e.samples.length!==e.weights.length)throw new Error(`Expected samples.length (${e.samples.length}) to equal weights.length (${e.weights.length})`);const n="flamegraph"===r.type?function(e){return l(e).sort(a)}(e):l(e),i=new Array(256);for(let e=0;e<n.length;e++){const o=n[e].stack;let a=n[e].weight,l=n[e].stack.length,c=!0;if("flamechart"===r.type&&e>0&&o.length<=2&&"(garbage collector) [native code]"===t[o[o.length-1]]?.name)for(c=!1,i[n[e-1].stack.length]=t[o[o.length-1]],l=n[e-1].stack.length+1;n[e+1]&&n[e+1].stack.length<=2&&"(garbage collector) [native code]"===t[n[e+1].stack[n[e+1].stack.length-1]]?.name;)a+=n[++e].weight;if(c)for(let e=0;e<o.length;e++)i[e]=t[o[e]]??h(o[e]);s.appendSampleWithWeight(i,a,l)}return s.build()}appendSampleWithWeight(e,t,r){if(this.trackSampleStats(t),0===t)return;let s=this.callTree;const i=[];for(let o=0;o<r;o++){const r=e[o],a=s.children[s.children.length-1];if(a&&!a.isLocked()&&a.frame===r)s=a;else{const e=s;s=new n.n(r,s),e.children.push(s)}s.addToTotalWeight(t);let l=i.length-1;for(;l>=0;){if(i[l].frame===s.frame){i[l].setRecursiveThroughNode(s),s.setRecursiveThroughNode(i[l]);break}l--}i[o]=s}s.addToSelfWeight(t),this.minFrameDuration=Math.min(t,this.minFrameDuration);for(const e of s.children)e.lock();s.frame.addToSelfWeight(t);for(const e of i)e.frame.addToTotalWeight(t),e.incrementCount();s===this.samples[this.samples.length-1]?this.weights[this.weights.length-1]+=t:(this.samples.push(s),this.weights.push(t))}build(){return this.duration=Math.max(this.duration,this.weights.reduce(((e,t)=>e+t),0)),this.minFrameDuration!==Number.POSITIVE_INFINITY&&0!==this.minFrameDuration||(this.minFrameDuration=this.duration),this}}(0,s.Z)(c,"Example",c.FromProfile({startValue:0,endValue:1e3,name:"Example sampled profile",threadID:0,unit:"millisecond",weights:[200,200,200,200,200],samples:[[0,1,2],[0,1,2,3,4,5],[0,1,2,3],[0,1,2,3,4],[0,1]],type:"sampled"},{0:new i.R({key:0,name:"f0"}),1:new i.R({key:1,name:"f1"}),2:new i.R({key:2,name:"f2"}),3:new i.R({key:3,name:"f3"}),4:new i.R({key:4,name:"f4"}),5:new i.R({key:5,name:"f5"})},{type:"flamechart"}))},"./app/utils/profiling/profile/utils.tsx":(e,t,r)=>{r.d(t,{GB:()=>l,h1:()=>i,ql:()=>c,vw:()=>o,w_:()=>a}),r("../node_modules/core-js/modules/es.array.push.js");var s=r("./app/utils.tsx"),n=r("./app/utils/profiling/frame.tsx");function i(e){const t={};for(let r=0;r<e.length;r++){const s=e[r];t[r]=new n.R({key:r,name:s.function??"unknown",line:s.lineno,column:s.colno})}return t}function o(e,t,r){return r?t.reduce(((e,t,s)=>(e[s]=new n.R({key:s,resource:void 0!==t.resourceId?r.resources[t.resourceId]:void 0,...t},"web"),e)),{}):t.reduce(((t,r,s)=>(t[s]=new n.R({key:s,...r},e),t)),{})}function a(e){let t=null;return function(r){return t?(t.args===r&&void 0!==t.args&&void 0!==r||(t.args=r,t.value=e(r)),t.value):(t={args:r,value:e(r)},t.value)}}function l(e,t,r){if(!(0,s.ri)(e))return t();const n=e.startChild(r);try{return t()}catch(e){throw n.setStatus("internal_error"),e}finally{n.finish()}}function h(e,t){const r=[];for(const s of e){const e={...s,parent:null,children:[]},n=t[s.key];if(n){for(const r of n)e.children.push(...h([r],t));r.push(e)}}return r}const c=e=>{const t={},r=[];return function(e,t,r){function s(e,n){if(t[e.key]||(t[e.key]=[]),t[e.key].push(n),e.children.length)for(let t=0;t<e.children.length;t++)s(e.children[t],e);else r.push(e)}for(let n=0;n<e.length;n++){e[n].children?.length||r.push(e[n]),t[e[n].key]||(t[e[n].key]=[]);for(let t=0;t<e[n].children.length;t++)s(e[n].children[t],e[n])}}(e,t,r),h(r,t)}},"./app/utils/profiling/units/units.ts":(e,t,r)=>{r.d(t,{CD:()=>i,ab:()=>h,fr:()=>n,s4:()=>a}),r("../node_modules/core-js/modules/es.error.cause.js");const s={nanosecond:1e-9,nanoseconds:1e-9,microsecond:1e-6,microseconds:1e-6,millisecond:.001,milliseconds:.001,second:1,seconds:1,count:1};function n(e,t){if(void 0===s[e])throw new Error(`Cannot format unit ${e}, duration mapping is not defined`);if(void 0===s[t])throw new Error(`Cannot format unit ${e}, duration mapping is not defined`);return e===t?e=>e:function(r){return i(r,e,t)}}function i(e,t,r){const n=Math.log10(s[t]),i=Math.log10(s[r]);return e*Math.pow(10,n-i)}const o=(e,t,r)=>0===e?"0"+t:e.toFixed(r)+t;function a(e){const t=s[e];if(void 0===t)throw new Error(`Cannot format unit ${e}, duration mapping is not defined`);return"count"===e?e=>e.toFixed(0):e=>{const r=e*t;return r>=1?o(r,"s",2):r/.001>=1?o(r/.001,"ms",2):r/1e-6>=1?o(r/1e-6,"μs",2):o(r/1e-9,"ns",2)}}function l(e,t){return Math.floor(e).toString().padStart(t,"0")}function h(e){const t=s[e];if(void 0===t)throw new Error(`Cannot format unit ${e}, duration mapping is not defined`);return e=>{const r=Math.abs(e*t),s=1e3*r;return`${e<0?"-":""}${l(r/60,2)}:${l(r%60,2)}.${l(s%1e3,3)}`}}},"./app/utils/profiling/weightedNode.tsx":(e,t,r)=>{r.d(t,{$:()=>n});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js");class n{constructor(){(0,s.Z)(this,"totalWeight",0),(0,s.Z)(this,"selfWeight",0)}addToTotalWeight(e){return this.totalWeight+=e,this.totalWeight}addToSelfWeight(e){return this.selfWeight+=e,this.selfWeight}}},"./app/views/profiling/profileGroupProvider.tsx":(e,t,r)=>{r.d(t,{A:()=>a,D:()=>h}),r("../node_modules/core-js/modules/es.error.cause.js");var s=r("../node_modules/react/index.js"),n=r("./app/utils/profiling/profile/importProfile.tsx"),i=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const o=(0,s.createContext)(null);function a(){const e=(0,s.useContext)(o);if(!e)throw new Error("useProfileGroup was called outside of ProfileGroupProvider");return e}const l={name:"Loading",activeProfileIndex:0,transactionID:null,metadata:{},measurements:{},traceID:"",profiles:[]};function h(e){const t=(0,s.useMemo)((()=>e.input?(0,n.B_)(e.input,e.traceID,e.type):l),[e.input,e.traceID,e.type]);return(0,i.tZ)(o.Provider,{value:t,children:e.children})}h.displayName="ProfileGroupProvider"}}]);
//# sourceMappingURL=../sourcemaps/app_components_searchBar_tsx-app_views_profiling_profileGroupProvider_tsx.c6eeefd0528ad6bcf9a1ac257f521d7c.js.map