"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_charts_areaChart_tsx-app_components_charts_chartZoom_tsx-app_components_profil-76d9b3"],{"./app/components/charts/areaChart.tsx":(e,t,o)=>{o.d(t,{T:()=>a});var n=o("./app/components/charts/series/lineSeries.tsx"),s=o("./app/components/charts/baseChart.tsx"),r=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{series:t,stacked:o,colors:a,...i}=e;return(0,r.tZ)(s.Z,{...i,"data-test-id":"area-chart",colors:a,series:t.map(((e,t)=>{let{seriesName:s,data:r,...i}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.Z)({...e})}({stack:o?"area":void 0,name:s,data:r.map((e=>{let{name:t,value:o}=e;return[t,o]})),lineStyle:{color:a?.[t],opacity:1,width:.4},areaStyle:{color:a?.[t],opacity:1},animation:!1,animationThreshold:1,animationDuration:0,...i})}))})}a.displayName="AreaChart"},"./app/components/charts/chartZoom.tsx":(e,t,o)=>{o.d(t,{Z:()=>x});var n=o("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(o("../node_modules/core-js/modules/es.array.push.js"),o("../node_modules/react/index.js")),r=o("../node_modules/moment/moment.js"),a=o.n(r),i=o("../node_modules/query-string/index.js"),l=o("./app/actionCreators/pageFilters.tsx"),c=o("./app/components/charts/components/dataZoomInside.tsx");o("../node_modules/echarts/lib/component/dataZoomSlider.js");const u={realtime:!1,showDetail:!1,left:0,right:6,bottom:8};function d(e){return e&&Array.isArray(e)?e:[{...u,...e}]}var p=o("./app/components/charts/components/toolBox.tsx"),m=o("./app/utils/callIfFunction.tsx"),h=o("./app/utils/dates.tsx");const g=e=>e?a().utc(e).format(a().HTML5_FMT.DATETIME_LOCAL_SECONDS):null;class y extends s.Component{constructor(e){var t;super(e),t=this,(0,n.Z)(this,"history",void 0),(0,n.Z)(this,"currentPeriod",void 0),(0,n.Z)(this,"zooming",null),(0,n.Z)(this,"saveCurrentPeriod",(e=>{this.currentPeriod={period:e.period,start:g(e.start),end:g(e.end)}})),(0,n.Z)(this,"setPeriod",(function(e){let{period:o,start:n,end:s}=e,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{router:a,onZoom:c,usePageDate:u}=t.props,d=g(n),p=g(s);r&&t.history.push(t.currentPeriod),c?.({period:o,start:d,end:p}),t.zooming=()=>{if(u&&a){const e={...a.location.query,pageStart:n?(0,h.v5)(n):void 0,pageEnd:s?(0,h.v5)(s):void 0,pageStatsPeriod:o??void 0};i.stringify(e)!==i.stringify(a.location.query)&&a.push({pathname:a.location.pathname,query:e})}else(0,l.dR)({period:o,start:d?(0,h.hC)(d):d,end:p?(0,h.hC)(p):p},a);t.saveCurrentPeriod({period:o,start:n,end:s})}})),(0,n.Z)(this,"handleChartReady",(e=>{this.props.onChartReady?.(e)})),(0,n.Z)(this,"handleZoomRestore",((e,t)=>{this.history.length&&(this.setPeriod(this.history[0]),this.history=[],this.props.onRestore?.(e,t))})),(0,n.Z)(this,"handleDataZoom",((e,t)=>{const o=t.getModel(),{startValue:n,endValue:s}=o._payload.batch[0];if(null===n&&null===s){const e=this.history.pop();if(!e)return;this.setPeriod(e)}else{const e=a().utc(n),t=a().utc(s);this.setPeriod({period:null,start:e,end:t},!0)}this.props.onDataZoom?.(e,t)})),(0,n.Z)(this,"handleChartFinished",((e,t)=>{"function"==typeof this.zooming&&(this.zooming(),this.zooming=null);const o=t._componentsViews?.find((e=>e._features&&e._features.dataZoom));o&&!o._features.dataZoom._isZoomActive&&t.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}),(0,m.g)(this.props.onFinished)})),this.history=[],this.saveCurrentPeriod(e)}componentDidUpdate(){this.props.disabled||this.saveCurrentPeriod(this.props)}render(){const{utc:e,start:t,end:o,disabled:n,children:s,xAxisIndex:r,router:a,onZoom:i,onRestore:l,onChartReady:u,onDataZoom:m,onFinished:g,showSlider:y,chartZoomOptions:x,...f}=this.props,Z=e??void 0,k=t?(0,h.hC)(t):void 0,b=o?(0,h.hC)(o):void 0;return s(n?{utc:Z,start:k,end:b,...f}:{isGroupedByDate:!0,onChartReady:this.handleChartReady,utc:Z,start:k,end:b,dataZoom:y?[...d({xAxisIndex:r,...x}),...(0,c.Z)({xAxisIndex:r,...x})]:(0,c.Z)({xAxisIndex:r,...x}),showTimeInTooltip:!0,toolBox:(0,p.Z)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom,onFinished:this.handleChartFinished,onRestore:this.handleZoomRestore,...f})}}y.displayName="ChartZoom";const x=y},"./app/components/gridEditable/sortLink.tsx":(e,t,o)=>{o.d(t,{Z:()=>h});var n=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=o("../node_modules/react-router/es/index.js"),r=o("../node_modules/lodash/omit.js"),a=o.n(r),i=o("./app/components/links/link.tsx"),l=o("./app/icons/index.tsx"),c=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function u(e){let{align:t,title:o,canSort:n,generateSortLink:r,onClick:a,direction:i,replace:l}=e;const u=r();if(!u||!n)return(0,c.tZ)(p,{align:t,children:o});const h=i?(0,c.tZ)(m,{size:"xs",direction:"desc"===i?"down":"up"}):null;return(0,c.BX)(d,{align:t,to:u,onClick:e=>{l&&(e.preventDefault(),s.browserHistory.replace(u)),a?.(e)},children:[o," ",h]})}u.displayName="SortLink";const d=(0,n.Z)((e=>{const t=a()(e,["align","css"]);return(0,c.tZ)(i.Z,{...t})}),{target:"esdhr0u2"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(e=>e.align?`text-align: ${e.align};`:""),";"),p=(0,n.Z)("div",{target:"esdhr0u1"})("display:block;width:100%;white-space:nowrap;",(e=>e.align?`text-align: ${e.align};`:""),";"),m=(0,n.Z)(l.CC,{target:"esdhr0u0"})({name:"40f4ru",styles:"vertical-align:top"}),h=u},"./app/components/performanceDuration.tsx":(e,t,o)=>{o.d(t,{Z:()=>i});var n=o("./app/components/duration.tsx"),s=o("./app/utils.tsx"),r=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){const t=function(e){return(0,s.ri)(e.nanoseconds)}(e)?e.nanoseconds/1e9:function(e){return(0,s.ri)(e.milliseconds)}(e)?e.milliseconds/1e3:e.seconds;return(0,r.tZ)(n.Z,{abbreviation:e.abbreviation,seconds:t,fixedDigits:2})}a.displayName="PerformanceDuration";const i=a},"./app/components/profiling/suspectFunctions/suspectFunctionsTable.tsx":(e,t,o)=>{o.d(t,{f:()=>N});var n=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(o("../node_modules/core-js/modules/es.array.push.js"),o("../node_modules/react/index.js")),r=o("../node_modules/react-router/es/index.js"),a=o("./app/components/compactSelect/index.tsx"),i=o("./app/components/pagination.tsx"),l=(o("../node_modules/core-js/modules/es.array.unshift.js"),o("./app/components/count.tsx")),c=o("./app/components/gridEditable/index.tsx"),u=o("./app/components/performanceDuration.tsx"),d=o("./app/components/links/link.tsx"),p=o("./app/locale.tsx"),m=o("./app/styles/space.tsx"),h=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function g(e){let{items:t}=e;const[o,n]=(0,s.useState)(!1),r=t[0];return(0,h.BX)(x,{expanded:o,children:[r&&(0,h.tZ)(y,{item:r}),t.length>1&&o&&t.slice(1,t.length).map((e=>(0,h.tZ)(y,{item:e},e.value))),t.length>1?(0,h.tZ)(Z,{children:(0,h.tZ)("button",{onClick:()=>n(!o),children:o?(0,p.t)("[collapse]"):(0,p.t)("[+%s more]",t.length-1)})}):null]})}function y(e){let{item:t}=e;return(0,h.tZ)(f,{children:(0,h.tZ)(d.Z,{to:t.target,onClick:t?.onClick,children:t.value})})}g.displayName="ArrayLinks",y.displayName="LinkedItem";const x=(0,n.Z)("div",{target:"e153a8kj2"})("display:flex;flex-direction:",(e=>e.expanded?"column":"row"),";"),f=(0,n.Z)("span",{target:"e153a8kj1"})("flex-shrink:1;display:block;",(e=>e.theme.overflowEllipsis),";width:unset;"),Z=(0,n.Z)("div",{target:"e153a8kj0"})("white-space:nowrap;& button{background:none;border:0;outline:none;padding:0;cursor:pointer;color:",(e=>e.theme.linkColor),";margin-left:",(0,m.D)(.5),";}");var k=o("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),b=o("./app/utils/discover/styles.tsx"),v=o("./app/utils/events.tsx"),w=o("./app/utils/profiling/routes.tsx"),C=o("./app/utils/profiling/tableRenderer.tsx"),j=o("./app/utils/useLocation.tsx"),_=o("./app/utils/useOrganization.tsx");function S(e){const t=(0,j.T)(),o=(0,_.Z)(),n=(0,s.useMemo)((()=>{let t=e.sort,o="asc";return e.sort.startsWith("-")&&(t=e.sort.substring(1),o="desc"),q.has(t)||(t="p99"),{key:t,order:o}}),[e.sort]),r=(0,s.useMemo)((()=>{const t=e.project;return t?e.functions.map((n=>{const{worst:s,examples:r,...a}=n,i=r.filter((e=>e!==s));return i.unshift(s),{...a,examples:i.map((s=>{const r=s.replaceAll("-","");return{value:(0,v.XQ)(r),onClick:()=>(0,k.Z)("profiling_views.go_to_flamegraph",{organization:o,source:`${e.analyticsPageSource}.suspect_functions_table`}),target:(0,w.TH)({orgSlug:o.slug,projectSlug:t.slug,profileId:r,query:{frameName:n.name,framePackage:n.package}})}}))}})):[]}),[o,e.project,e.functions,e.analyticsPageSource]),a=(0,s.useCallback)((e=>{if(!q.has(e))return()=>{};const o=n.key!==e?"desc":"desc"===n.order?"asc":"desc";return()=>({...t,query:{...t.query,functionsSort:`${"desc"===o?"-":""}${e}`}})}),[t,n]);return(0,h.tZ)(c.ZP,{isLoading:e.isLoading,error:e.error,data:r,columnOrder:D.map((e=>z[e])),columnSortBy:[],grid:{renderHeadCell:(0,C.w)({currentSort:n,rightAlignedColumns:P,sortableColumns:q,generateSortLink:a}),renderBodyCell:F},location:t})}S.displayName="FunctionsTable";const P=new Set(["p75","p99","count"]),q=P;function F(e,t,o,n){return(0,h.tZ)(A,{column:e,dataRow:t,rowIndex:o,columnIndex:n})}F.displayName="renderFunctionsTableCell";const T=(0,n.Z)("span",{target:"e13dbyps0"})("color:",(e=>e.theme.gray300),";");function A(e){let{column:t,dataRow:o}=e;const n=o[t.key];switch(t.key){case"count":return(0,h.tZ)(b.Hw,{children:(0,h.tZ)(l.Z,{value:n})});case"p75":case"p99":return(0,h.tZ)(b.Hw,{children:(0,h.tZ)(u.Z,{nanoseconds:n,abbreviation:!0})});case"examples":return(0,h.tZ)(g,{items:n});case"name":case"package":const e=n||(0,h.tZ)(T,{children:(0,p.t)("Unknown")});return(0,h.tZ)(b.W2,{children:e});default:return(0,h.tZ)(b.W2,{children:n})}}const D=["name","package","count","p75","p99","examples"],z={name:{key:"name",name:(0,p.t)("Name"),width:c.z7},package:{key:"package",name:(0,p.t)("Package"),width:c.z7},path:{key:"path",name:(0,p.t)("Path"),width:c.z7},p75:{key:"p75",name:(0,p.t)("P75 Total Duration"),width:c.z7},p99:{key:"p99",name:(0,p.t)("P99 Total Duration"),width:c.z7},count:{key:"count",name:(0,p.t)("Total Occurrences"),width:c.z7},examples:{key:"examples",name:(0,p.t)("Example Profiles"),width:c.z7}};var L=o("./app/utils/profiling/hooks/useFunctions.tsx"),R=o("./app/utils/queryString.tsx"),E=o("./app/utils/usePageFilters.tsx");function N(e){let{analyticsPageSource:t,project:o,transaction:n}=e;const{selection:i}=(0,E.Z)(),[l,c]=(0,s.useState)("application"),u=(0,j.T)(),d=(0,s.useMemo)((()=>(0,R.ro)(u.query.functionsCursor)),[u.query.functionsCursor]),m=(0,s.useMemo)((()=>(0,R.ro)(u.query.functionsSort,"-p99")),[u.query.functionsSort]),g=(0,s.useCallback)(((e,t,o)=>{r.browserHistory.push({pathname:t,query:{...o,functionsCursor:e}})}),[]),y=(0,L.d)({cursor:d,project:o,query:"",selection:i,transaction:n,sort:m,functionType:l});return(0,h.BX)(s.Fragment,{children:[(0,h.BX)(I,{children:[(0,h.tZ)(a.Z,{triggerProps:{prefix:(0,p.t)("Suspect Functions"),size:"xs"},value:l,options:[{label:(0,p.t)("All"),value:"all"},{label:(0,p.t)("Application"),value:"application"},{label:(0,p.t)("System"),value:"system"}],onChange:e=>{let{value:t}=e;return c(t)}}),(0,h.tZ)(B,{pageLinks:y.isFetched?y.data?.[0]?.pageLinks:null,onCursor:g,size:"xs"})]}),(0,h.tZ)(S,{analyticsPageSource:t,error:y.isError?y.error.message:null,isLoading:y.isLoading,functions:y.isFetched?y.data?.[0].functions??[]:[],project:o,sort:m})]})}N.displayName="SuspectFunctionsTable";const I=(0,n.Z)("div",{target:"e1qpwo4s1"})("display:flex;justify-content:space-between;margin-bottom:",(0,m.D)(1),";"),B=(0,n.Z)(i.Z,{target:"e1qpwo4s0"})("margin:0 0 0 ",(0,m.D)(1),";")},"./app/utils/profiling/hooks/useFunctions.tsx":(e,t,o)=>{o.d(t,{d:()=>c}),o("../node_modules/core-js/modules/es.error.cause.js");var n=o("../node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),s=o("./app/components/organizations/pageFilters/parse.tsx"),r=o("./app/utils.tsx"),a=o("./app/utils/tokenizeSearch.tsx"),i=o("./app/utils/useApi.tsx"),l=o("./app/utils/useOrganization.tsx");function c(e){let{functionType:t,project:o,query:c,transaction:u,sort:d,cursor:p,selection:m,enabled:h=!0}=e;const g=(0,i.Z)(),y=`/projects/${(0,l.Z)().slug}/${o?.slug}/profiling/functions/`,x={functionType:t,query:c,selection:m,sort:d,transaction:u,cursor:p,enabled:h},f=[y,x];return(0,n.a)({queryKey:f,queryFn:()=>{if(!(0,r.ri)(x.selection)||!(0,r.ri)(x.transaction)||!(0,r.ri)(o))throw Error("selection, transaction and project arguments required for fetchFunctions");return function(e,t,o){let{cursor:n,functionType:r,query:i,selection:l,sort:c,transaction:u}=o;const d=new a.MY(i);return d.setFilterValues("transaction_name",[u]),e.requestPromise(t,{method:"GET",includeAllArgs:!0,query:{cursor:n,environment:l.environments,...(0,s.fK)(l.datetime),query:d.formatString(),sort:c,is_application:"application"===r?"1":"system"===r?"0":void 0}})}(g,y,x)},refetchOnWindowFocus:!1,retry:!1,enabled:h})}},"./app/utils/profiling/tableRenderer.tsx":(e,t,o)=>{o.d(t,{w:()=>r});var n=o("./app/components/gridEditable/sortLink.tsx"),s=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e){let{currentSort:t,generateSortLink:o,rightAlignedColumns:r,sortableColumns:a,onClick:i}=e;return(e,l)=>(0,s.tZ)(n.Z,{onClick:t=>i?.(e,t),align:r?.has(e.key)?"right":"left",title:e.name,direction:t?.key===e.key?t?.order:void 0,canSort:a?.has(e.key)||!1,generateSortLink:o?.(e.key)??(()=>{}),replace:!0})}}}]);
//# sourceMappingURL=../sourcemaps/app_components_charts_areaChart_tsx-app_components_charts_chartZoom_tsx-app_components_profil-76d9b3.341fc671056e5f236ef53f0d13edc479.js.map