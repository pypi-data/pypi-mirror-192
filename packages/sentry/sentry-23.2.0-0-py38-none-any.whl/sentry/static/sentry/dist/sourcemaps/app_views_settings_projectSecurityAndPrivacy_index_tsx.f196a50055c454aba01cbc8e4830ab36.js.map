{"version":3,"file":"chunks/app_views_settings_projectSecurityAndPrivacy_index_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/data/forms/projectSecurityAndPrivacyGroups.tsx","webpack:///./app/views/settings/projectSecurityAndPrivacy/index.tsx"],"sourcesContent":["import {JsonFormObject} from 'sentry/components/forms/types';\nimport Link from 'sentry/components/links/link';\nimport {t, tct} from 'sentry/locale';\nimport {convertMultilineFieldValue, extractMultilineFields} from 'sentry/utils';\nimport {\n  formatStoreCrashReports,\n  getStoreCrashReportsValues,\n  SettingScope,\n} from 'sentry/utils/crashReports';\n\n// Export route to make these forms searchable by label/help\nexport const route = '/settings/:orgId/projects/:projectId/security-and-privacy/';\n\nconst ORG_DISABLED_REASON = t(\n  \"This option is enforced by your organization's settings and cannot be customized per-project.\"\n);\n\n// Check if a field has been set AND IS TRUTHY at the organization level.\nconst hasOrgOverride = ({organization, name}) => organization[name];\n\nexport default [\n  {\n    title: t('Security & Privacy'),\n    fields: [\n      {\n        name: 'storeCrashReports',\n        type: 'select',\n        label: t('Store Native Crash Reports'),\n        help: ({organization}) =>\n          tct(\n            'Store native crash reports such as Minidumps for improved processing and download in issue details. Overrides [organizationSettingsLink: organization settings].',\n            {\n              organizationSettingsLink: (\n                <Link to={`/settings/${organization.slug}/security-and-privacy/`} />\n              ),\n            }\n          ),\n        visible: ({features}) => features.has('event-attachments'),\n        placeholder: ({organization, value}) => {\n          // empty value means that this project should inherit organization settings\n          if (value === '') {\n            return tct('Inherit organization settings ([organizationValue])', {\n              organizationValue: formatStoreCrashReports(organization.storeCrashReports),\n            });\n          }\n\n          // HACK: some organization can have limit of stored crash reports a number that's not in the options (legacy reasons),\n          // we therefore display it in a placeholder\n          return formatStoreCrashReports(value);\n        },\n        choices: ({organization}) =>\n          getStoreCrashReportsValues(SettingScope.Project).map(value => [\n            value,\n            formatStoreCrashReports(value, organization.storeCrashReports),\n          ]),\n      },\n    ],\n  },\n  {\n    title: t('Data Scrubbing'),\n    fields: [\n      {\n        name: 'dataScrubber',\n        type: 'boolean',\n        label: t('Data Scrubber'),\n        disabled: hasOrgOverride,\n        disabledReason: ORG_DISABLED_REASON,\n        help: t('Enable server-side data scrubbing'),\n        'aria-label': t('Enable server-side data scrubbing'),\n        // `props` are the props given to FormField\n        setValue: (val, props) =>\n          (props.organization && props.organization[props.name]) || val,\n        confirm: {\n          false: t('Are you sure you want to disable server-side data scrubbing?'),\n        },\n      },\n      {\n        name: 'dataScrubberDefaults',\n        type: 'boolean',\n        disabled: hasOrgOverride,\n        disabledReason: ORG_DISABLED_REASON,\n        label: t('Use Default Scrubbers'),\n        help: t(\n          'Apply default scrubbers to prevent things like passwords and credit cards from being stored'\n        ),\n        'aria-label': t(\n          'Enable to apply default scrubbers to prevent things like passwords and credit cards from being stored'\n        ),\n        // `props` are the props given to FormField\n        setValue: (val, props) =>\n          (props.organization && props.organization[props.name]) || val,\n        confirm: {\n          false: t('Are you sure you want to disable using default scrubbers?'),\n        },\n      },\n      {\n        name: 'scrubIPAddresses',\n        type: 'boolean',\n        disabled: hasOrgOverride,\n        disabledReason: ORG_DISABLED_REASON,\n        // `props` are the props given to FormField\n        setValue: (val, props) =>\n          (props.organization && props.organization[props.name]) || val,\n        label: t('Prevent Storing of IP Addresses'),\n        help: t('Preventing IP addresses from being stored for new events'),\n        'aria-label': t(\n          'Enable to prevent IP addresses from being stored for new events'\n        ),\n        confirm: {\n          false: t('Are you sure you want to disable scrubbing IP addresses?'),\n        },\n      },\n      {\n        name: 'sensitiveFields',\n        type: 'string',\n        multiline: true,\n        autosize: true,\n        maxRows: 10,\n        rows: 1,\n        placeholder: t('email'),\n        label: t('Additional Sensitive Fields'),\n        help: t(\n          'Additional field names to match against when scrubbing data. Separate multiple entries with a newline'\n        ),\n        'aria-label': t(\n          'Enter additional field names to match against when scrubbing data. Separate multiple entries with a newline'\n        ),\n        getValue: val => extractMultilineFields(val),\n        setValue: val => convertMultilineFieldValue(val),\n      },\n      {\n        name: 'safeFields',\n        type: 'string',\n        multiline: true,\n        autosize: true,\n        maxRows: 10,\n        rows: 1,\n        placeholder: t('business-email'),\n        label: t('Safe Fields'),\n        help: t(\n          'Field names which data scrubbers should ignore. Separate multiple entries with a newline'\n        ),\n        'aria-label': t(\n          'Enter field names which data scrubbers should ignore. Separate multiple entries with a newline'\n        ),\n        getValue: val => extractMultilineFields(val),\n        setValue: val => convertMultilineFieldValue(val),\n      },\n    ],\n  },\n] as JsonFormObject[];\n","import {Fragment} from 'react';\n\nimport {addErrorMessage} from 'sentry/actionCreators/indicator';\nimport Form from 'sentry/components/forms/form';\nimport JsonForm from 'sentry/components/forms/jsonForm';\nimport Link from 'sentry/components/links/link';\nimport SentryDocumentTitle from 'sentry/components/sentryDocumentTitle';\nimport projectSecurityAndPrivacyGroups from 'sentry/data/forms/projectSecurityAndPrivacyGroups';\nimport {t, tct} from 'sentry/locale';\nimport ProjectsStore from 'sentry/stores/projectsStore';\nimport {Organization, Project} from 'sentry/types';\nimport SettingsPageHeader from 'sentry/views/settings/components/settingsPageHeader';\n\nimport {DataScrubbing} from '../components/dataScrubbing';\n\ntype Props = {\n  organization: Organization;\n  project: Project;\n};\n\nexport default function ProjectSecurityAndPrivacy({organization, project}: Props) {\n  function handleUpdateProject(data: Project) {\n    // This will update our project global state\n    ProjectsStore.onUpdateSuccess(data);\n  }\n\n  const initialData = project;\n  const projectSlug = project.slug;\n  const endpoint = `/projects/${organization.slug}/${projectSlug}/`;\n  const access = new Set(organization.access);\n  const features = new Set(organization.features);\n  const relayPiiConfig = project.relayPiiConfig;\n  const apiMethod = 'PUT';\n  const title = t('Security & Privacy');\n\n  return (\n    <Fragment>\n      <SentryDocumentTitle title={title} projectSlug={projectSlug} />\n      <SettingsPageHeader title={title} />\n      <Form\n        saveOnBlur\n        allowUndo\n        initialData={initialData}\n        apiMethod={apiMethod}\n        apiEndpoint={endpoint}\n        onSubmitSuccess={handleUpdateProject}\n        onSubmitError={() => addErrorMessage('Unable to save change')}\n      >\n        <JsonForm\n          additionalFieldProps={{organization}}\n          features={features}\n          disabled={!access.has('project:write')}\n          forms={projectSecurityAndPrivacyGroups}\n        />\n      </Form>\n      <DataScrubbing\n        additionalContext={\n          <span>\n            {tct(\n              'These rules can be configured at the organization level in [linkToOrganizationSecurityAndPrivacy].',\n              {\n                linkToOrganizationSecurityAndPrivacy: (\n                  <Link to={`/settings/${organization.slug}/security-and-privacy/`}>\n                    {title}\n                  </Link>\n                ),\n              }\n            )}\n          </span>\n        }\n        endpoint={endpoint}\n        relayPiiConfig={relayPiiConfig}\n        disabled={!access.has('project:write')}\n        organization={organization}\n        project={project}\n        onSubmitSuccess={data => handleUpdateProject({...project, ...data})}\n      />\n    </Fragment>\n  );\n}\n"],"names":["route","ORG_DISABLED_REASON","t","hasOrgOverride","organization","name","title","fields","type","label","help","tct","organizationSettingsLink","to","slug","visible","features","has","placeholder","value","organizationValue","formatStoreCrashReports","storeCrashReports","choices","getStoreCrashReportsValues","SettingScope","map","disabled","disabledReason","setValue","val","props","confirm","false","multiline","autosize","maxRows","rows","getValue","extractMultilineFields","convertMultilineFieldValue","ProjectSecurityAndPrivacy","project","handleUpdateProject","data","ProjectsStore","initialData","projectSlug","endpoint","access","Set","relayPiiConfig","Fragment","saveOnBlur","allowUndo","apiMethod","apiEndpoint","onSubmitSuccess","onSubmitError","addErrorMessage","additionalFieldProps","forms","projectSecurityAndPrivacyGroups","additionalContext","linkToOrganizationSecurityAndPrivacy"],"sourceRoot":""}