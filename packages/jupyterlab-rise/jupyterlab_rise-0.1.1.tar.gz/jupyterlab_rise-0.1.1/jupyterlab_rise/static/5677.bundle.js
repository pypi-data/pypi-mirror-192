"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[5677],{67863:(e,t,r)=>{r.d(t,{L:()=>i,c:()=>o});var n=r(79645),a=r(17646);const i=new n.Token("@jupyterlab/application:ILayoutRestorer"),s="layout-restorer:data";class o{constructor(e){this._firstDone=!1,this._promisesDone=!1,this._promises=[],this._restored=new n.PromiseDelegate,this._trackers=new Set,this._widgets=new Map,this._connector=e.connector,this._first=e.first,this._registry=e.registry,this._first.then((()=>{this._firstDone=!0})).then((()=>Promise.all(this._promises))).then((()=>{this._promisesDone=!0,this._trackers.clear()})).then((()=>{this._restored.resolve(void 0)}))}get restored(){return this._restored.promise}add(e,t){c.nameProperty.set(e,t),this._widgets.set(t,e),e.disposed.connect(this._onWidgetDisposed,this)}async fetch(){const e={fresh:!0,mainArea:null,downArea:null,leftArea:null,rightArea:null,relativeSizes:null},t=this._connector.fetch(s);try{const[r]=await Promise.all([t,this.restored]);if(!r)return e;const{main:n,down:a,left:i,right:s,relativeSizes:o}=r,c=!1,d=this._rehydrateMainArea(n),l=this._rehydrateDownArea(a);return{fresh:c,mainArea:d,downArea:l,leftArea:this._rehydrateSideArea(i),rightArea:this._rehydrateSideArea(s),relativeSizes:o||null}}catch(t){return e}}restore(e,t){const r="restore() can only be called before `first` has resolved.";if(this._firstDone)return console.warn(r),Promise.reject(r);const{namespace:a}=e;if(this._trackers.has(a)){const e=`A tracker namespaced ${a} was already restored.`;return console.warn(e),Promise.reject(e)}const{args:i,command:s,name:o,when:d}=t;this._trackers.add(a),e.widgetAdded.connect(((e,t)=>{const r=o(t);r&&this.add(t,`${a}:${r}`)}),this),e.widgetUpdated.connect(((e,t)=>{const r=o(t);if(r){const e=`${a}:${r}`;c.nameProperty.set(t,e),this._widgets.set(e,t)}}));const l=this._first,u=e.restore({args:i||(()=>n.JSONExt.emptyObject),command:s,connector:this._connector,name:o,registry:this._registry,when:d?[l].concat(d):l}).catch((e=>{console.error(e)}));return this._promises.push(u),u}save(e){if(!this._promisesDone){const e="save() was called prematurely.";return console.warn(e),Promise.reject(e)}const t={};return t.main=this._dehydrateMainArea(e.mainArea),t.down=this._dehydrateDownArea(e.downArea),t.left=this._dehydrateSideArea(e.leftArea),t.right=this._dehydrateSideArea(e.rightArea),t.relativeSizes=e.relativeSizes,this._connector.save(s,t)}_dehydrateMainArea(e){return e?c.serializeMain(e):null}_rehydrateMainArea(e){return e?c.deserializeMain(e,this._widgets):null}_dehydrateDownArea(e){if(!e)return null;const t={size:e.size};if(e.currentWidget){const r=c.nameProperty.get(e.currentWidget);r&&(t.current=r)}return e.widgets&&(t.widgets=e.widgets.map((e=>c.nameProperty.get(e))).filter((e=>!!e))),t}_rehydrateDownArea(e){var t;if(!e)return{currentWidget:null,size:0,widgets:null};const r=this._widgets,n=e.current&&r.has(`${e.current}`)?r.get(`${e.current}`):null,a=Array.isArray(e.widgets)?e.widgets.map((e=>r.has(`${e}`)?r.get(`${e}`):null)).filter((e=>!!e)):null;return{currentWidget:n,size:null!==(t=e.size)&&void 0!==t?t:0,widgets:a}}_dehydrateSideArea(e){if(!e)return null;const t={collapsed:e.collapsed};if(e.currentWidget){const r=c.nameProperty.get(e.currentWidget);r&&(t.current=r)}return e.widgets&&(t.widgets=e.widgets.map((e=>c.nameProperty.get(e))).filter((e=>!!e))),t}_rehydrateSideArea(e){var t;if(!e)return{collapsed:!0,currentWidget:null,widgets:null};const r=this._widgets;return{collapsed:null!==(t=e.collapsed)&&void 0!==t&&t,currentWidget:e.current&&r.has(`${e.current}`)?r.get(`${e.current}`):null,widgets:Array.isArray(e.widgets)?e.widgets.map((e=>r.has(`${e}`)?r.get(`${e}`):null)).filter((e=>!!e)):null}}_onWidgetDisposed(e){const t=c.nameProperty.get(e);this._widgets.delete(t)}}var c;!function(e){function t(r){return r&&r.type?"tab-area"===r.type?{type:"tab-area",currentIndex:r.currentIndex,widgets:r.widgets.map((t=>e.nameProperty.get(t))).filter((e=>!!e))}:{type:"split-area",orientation:r.orientation,sizes:r.sizes,children:r.children.map(t).filter((e=>!!e))}:null}function r(e,t){if(!e)return null;const n=e.type||"unknown";if("unknown"===n||"tab-area"!==n&&"split-area"!==n)return console.warn(`Attempted to deserialize unknown type: ${n}`),null;if("tab-area"===n){const{currentIndex:r,widgets:n}=e,a={type:"tab-area",currentIndex:r||0,widgets:n&&n.map((e=>t.get(e))).filter((e=>!!e))||[]};return a.currentIndex>a.widgets.length-1&&(a.currentIndex=0),a}const{orientation:a,sizes:i,children:s}=e;return{type:"split-area",orientation:a,sizes:i||[],children:s&&s.map((e=>r(e,t))).filter((e=>!!e))||[]}}e.nameProperty=new a.AttachedProperty({name:"name",create:e=>""}),e.serializeMain=function(r){const n={dock:r&&r.dock&&t(r.dock.main)||null};if(r&&r.currentWidget){const t=e.nameProperty.get(r.currentWidget);t&&(n.current=t)}return n},e.deserializeMain=function(e,t){if(!e)return null;const n=e.current||null,a=e.dock||null;return{currentWidget:n&&t.has(n)&&t.get(n)||null,dock:a?{main:r(a,t)}:null}}}(c||(c={}))},75677:(e,t,r)=>{r.d(t,{aX:()=>p,as:()=>h,w2:()=>u});var n=r(57490),a=r(45799),i=r(41139),s=r(78074),o=r(12121),c=r(79645),d=r(17646),l=r(67863);const u=new c.Token("@jupyterlab/application:IMimeDocumentTracker");function h(e){const t=[],r=new n.WidgetTracker({namespace:"application-mimedocuments"});return e.forEach((e=>{let n=e.default;e.hasOwnProperty("__esModule")||(n=e),Array.isArray(n)||(n=[n]),n.forEach((e=>{t.push(p(r,e))}))})),t.push({id:"@jupyterlab/application:mimedocument",optional:[l.L],provides:u,autoStart:!0,activate:(e,t)=>(t&&t.restore(r,{command:"docmanager:open",args:e=>({path:e.context.path,factory:y.factoryNameProperty.get(e)}),name:e=>`${e.context.path}:${y.factoryNameProperty.get(e)}`}),r)}),t}function p(e,t){return{id:t.id,requires:[i.IRenderMimeRegistry,s.ITranslator],autoStart:!0,activate:(r,n,i)=>{if(void 0!==t.rank?n.addFactory(t.rendererFactory,t.rank):n.addFactory(t.rendererFactory),!t.documentWidgetFactoryOptions)return;const s=r.docRegistry;let c=[];c=Array.isArray(t.documentWidgetFactoryOptions)?t.documentWidgetFactoryOptions:[t.documentWidgetFactoryOptions],t.fileTypes&&t.fileTypes.forEach((e=>{e.icon&&(e=Object.assign(Object.assign({},e),{icon:o.LabIcon.resolve({icon:e.icon})})),r.docRegistry.addFileType(e)})),c.forEach((r=>{const o=r.toolbarFactory?e=>r.toolbarFactory(e.content.renderer):void 0,c=new a.MimeDocumentFactory({renderTimeout:t.renderTimeout,dataType:t.dataType,rendermime:n,modelName:r.modelName,name:r.name,primaryFileType:s.getFileType(r.primaryFileType),fileTypes:r.fileTypes,defaultFor:r.defaultFor,defaultRendered:r.defaultRendered,toolbarFactory:o,translator:i,factory:t.rendererFactory});s.addWidgetFactory(c),c.widgetCreated.connect(((t,r)=>{y.factoryNameProperty.set(r,c.name),r.context.pathChanged.connect((()=>{e.save(r)})),e.add(r)}))}))}}}var y;!function(e){e.factoryNameProperty=new d.AttachedProperty({name:"factoryName",create:()=>{}})}(y||(y={}))}}]);
//# sourceMappingURL=5677.js.map